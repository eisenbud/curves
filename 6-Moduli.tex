\input{header}

\chapter{Moduli of Curves}
\label{Moduli chapter}

Philosophy of this chapter: the book \emph{Moduli of Curves} has already been written, and we don't want to write it again. But a summary of the basic information would be useful

\section{What is a moduli problem?}

We've already seen, in the preceding chapters, examples of \emph{moduli}, or \emph{parameter spaces}---spaces parametrizing algebro-geometric objects of a specified sort. In this chapter, we'll try to systematize this, giving a general framework for the notion of moduli space, introducing the main examples we'll be dealing with here, and mentioning some common variants.

As for the question of the title, in colloquial terms a \emph{moduli problem} consist of two things: a class of objects in algebraic geometry---schemes, subschemes of a given scheme, sheaves on schemes, and the like---and a notion of what it means to have a \emph{family} of these objects parametrized by a scheme $B$. As usual, some examples will make this somewhat vague notion more real. In each case, we'll discuss the notion as it applies to curves.

\subsection{Examples}

\begin{enumerate}
\item \emph{Curves of genus $g$}. Here, the objects are simply (isomorphism classes of) smooth, projective curves of genus $g$. By a family of such curves, we'll mean a smooth, projective morphism $f : \cC \to B$ whose fibers are  curves of genus $g$.

\item \emph{Curves in projective space} Here, the objects are simply subschemes $C \subset \PP^r$ of degree $d$, isomorphic to smooth, projective curves of genus $g$. By a family of such curves, we'll mean a subscheme $\cC \subset B \times \PP^r$, flat over $B$,  whose fibers are smooth, projective curves of genus $g$.

\item \emph{Effective divisors on a given curve}. The objects are divisors of degree $d$ on a given smooth, projective curve $C$. To define a family of such divisors, we use the equivalence between effective divisors and subschemes to define a family to be subscheme $\cD \subset B \times C$, flat of relative degree $d$ over $B$.


\item \emph{Line bundles on a given curve}. Now the objects are line bundles of degree $d$ on a given smooth, projective curve $C$; by a family of line bundles we'll mean simply a line bundle $\cL$ on $B \times C$, whose restriction to each fiber of $B \times C$ over $B$ has degree $d$.

\end{enumerate}

\section{What is a solution to a moduli problem?}

The basic idea here is straightforward: given a moduli problem, we want to construct a scheme $M$ whose closed points are in natural  1-to-1 correspondence with the objects we're trying to parametrize. The problem, as it so often is, is the word ``natural" appearing in that last sentence: given that most of the time, the set of objects has cardinality $\aleph_1$, as do all positive-dimensional varieties $M$ over $\CC$, the existence of a bijection between the points of $M$ and the objects to be parametrized is not much of a condition!

In the pre-scheme days, the answer was not entirely satisfactory, but at least easy to understand:  for any family of objects parametrized by a variety $B$, we have an induced map of sets from the closed points of $B$ to the set of closed points in $M$, and the requirement is simply that this be the underlying set map of a regular morphism $B \to M$.

In the world of schemes, however, a map is not determined by its underlying set map, and this needs to be updated. In the end, rather than construct a morphism $B \to M$ associated to a family of objects over $B$ and then require it to be a regular map, we simply require that there exist a natural bijection, for any scheme $B$, between the set of families $\cC$ over $B$ and the set of morphisms $\phi_\cC : B \to M$. Moreover, here the word ``natural" is easy to make precise: we require that if $\pi : B \to B_0$ is any morphism of schemes, $\cC_0 \to B_0$ a family ovr $B_0$ and $\cC := \cC_0 \times_{B_0} B \to B$ the induced family over $B$, then the morphism
$$
\phi_B = \phi_{B_0} \circ \pi.
$$
In other words, we have two functors from the category of schemes to the category of sets: the functor $h$ that associates to a scheme $B$ the set of families over $B$; and the functor $\rm{Mor}(\bullet, M)$ that associates to a scheme $B$ the set of morphisms $B \to M$. We'll say that $M$ is a \emph{fine moduli space} for the given moduli problem if there exists an isomorphism of functors $h \cong \rm{Mor}(\bullet, M)$

\section{$M_g$}

Assert existence as a coarse, rather than a fine moduli space (say what this means and give ref to Geometry of Schemes?)

\section{Compactifying $M_g$}

Describe the Deligne-Mumford compactification; mention alternatives?

\section{Auxilliary constructions}

It is hard to specify an abstract curve. It is much easier if the curve $C$ comes to us with some additional structure, such as a map to projective space; if the map is a birational embedding, we can specify the curve just by specifying a set of polynomial equations cutting it out. 

There are two special cases of this: we can look at pairs $(C,f)$ where $f : C \to \PP^1$ is a branched cover of degree $d$, which yields various flavors of the \emph{Hurwitz spaces}; and we can look at pairs $(C,f)$ where $f : C \to \PP^2$ is a birational embedding of $C$ as a plane curve of degree $d$, yielding the \emph{Severi varieties}. Both of these spaces are more readily described and better-behaved than the moduli space $M_g$ of abstract curves, or the Hilbert scheme $\cH$ of curves in higher-dimensional space; for this reason they are useful in proving theorems about $M_g$ and $\cH$.

\subsection{Hurwitz spaces}

Fix integers $d \geq 2$ and $g \geq 0$. By the \emph{small Hurwitz space} $\cH^\circ_{d,g}$ we will mean a space parametrizing simply branched covers $f : C \to \PP^1$ of degree $d$, with $C$ a smooth projective curve of genus $g$. Here ``simply branched" means that every fiber  either is reduced---that is, consists of $d$ reduced points---or consists of one double point and $d-2$ reduced points. If a map $f : C \to \PP^1$ is simply branched, in particular, the branch divisor $B \subset \PP^1$ of the map will consist of $b = 2d+2g-2$ distinct points in $\PP^1$

What does such a space look like? The answer is easiest to see if we work over $\CC$ and use the classical or \'etale topology. To begin with, we've observed that the effective divisors of degree $b$ on a curve $C$ are parametrized by the $b$th symmetric product $C_b$ of $C$; in the case of $C = \PP^1$, since an effective divisor on $\PP^1$ is given by a homogeneous polynomial $F \in H^0(\cO_{\PP^1}(b))$, the space of all effective divisors is $(\PP^1)_b \cong \PP^b$, and the locus of reduced divisors---divisors consisting of $b$ distinct points---is an open subset $U \subset \PP^b$.


 In this setting, we consider the incidence correspondence

\begin{diagram}
& & \cH_{d,g} & & \\
& \ldTo^\alpha & & \rdTo^\beta & \\
U \subset \PP^b & & & & M_g
\end{diagram} 
Here $\alpha$ is the map associating to a branched cover $f : C \to \PP^1$ its branch divisor, and $\beta$ the map sending $f : C \to \PP^1$ to the point $[C] \in M_g$; the open set $U \subset \PP^b$ is the open set of $b$-tuples of distinct points in the space $\PP^b$ of all effective divisors of degree $b$ on $\PP^1$.

Over $\CC$, we can describe a branched cover concretely: if we make a collection of cuts in $\PP^1$ joining a base point $p$ to each of the branch points $p_1, p_2, \dots, p_b$ of the map, the preimage in $C$ of the complement of the cuts will consist of $d$ disjoint copies of the complement of the cuts in $\PP^1$ (the ``sheets" of the cover), which we can label with the integers $1, 2, \dots, d$. In these terms, we can associate to each branch point $p_i \in \PP^1$ the transposition $\tau_i \in S_d$ exchanging the two sheets that come together over $p_i$. We arrive at a sequence of transpositions $\tau_1, \tau_2, \dots, \tau_b \in S_d$, that satisfies two conditions:

\begin{enumerate}
\item the product $\tau_1\cdot \tau_2 \cdots \tau_b$ is the identity; and
\item the $\tau_i$ together generate a transitive subgroup of $S_d$.
\end{enumerate}

Note that the sequence $\tau_1, \tau_2, \dots, \tau_b \in S_d$ is determined by the cover $f : C \to \PP^1$ up to simultaneous conjugation in $S_d$: we can revise our labelling of the sheets, which has the effect of conjugating all the $\tau_i$ by the relabelling permutation.

The conclusion is simply that \emph{the map $\alpha : \cH_{d,g} \to U$ is a covering space map}, which gives us a picture of the local geometry of $\cH_{d,g}$. 

We can also ask, and in many cases answer, questions about the global geometry of the map $\alpha : \cH_{d,g} \to U$. For example, the degrees of the covering spaces $\alpha : \cH_{d,g} \to U$ are what are called \emph{Hurwitz numbers}; they arise in many contexts, and in many cases, they can be calculated **\cite{}**. Another global aspect of the geometry of the maps $\alpha$ that can be described is their \emph{monodromy}. Indeed, this  was the basis of the first proof that $M_g$ is irreducible: Clebsch, Hurwitz and others (**??**) analyzed the monodromy of the cover $\alpha : \cH_{d,g} \to U$, and showed that it was indeed transitive; they concluded that \emph{$\cH_{d,g}$ is irreducible for all $d$ and $g$} and hence, since $\cH_{d,g}$ dominates $M_g$ for $d \gg g$, that $M_g$ is irreducible for all $g$. (Note that because of the reliance on the classical topology, this argument only works in characteristric 0; a proof of the irreducibility of $M_g$ valid in arbitrary characteristic was not found until much later.

\begin{exercise}
Find the degree of the covering space $\alpha : \cH_{3,g} \to U \subset \PP^{2g+4}$
\end{exercise}

The Hurwitz spaces also give us a way to estimate the dimension of the moduli space $M_g$. The point is, while it may not be immediately obvious what the dimension of $M_g$ is, the dimension of $\cH_{d,g}$ is clear: it's a finite-sheeted cover of an open subset $U \subset \PP^b$, and so has dimension  $b = 2d+2g-2$. To find the dimension of $M_g$, accordingly, we simply have to choose $d \gg g$ (so that $\cH_{d,g}$ dominates $M_g$), and estimate the dimension of the fibers of $\cH_{d,g}$ over $M_g$.

This is straightforward, based on our previous constructions. Given a curve $C$, to specify a map $f : C \to \PP^1$ we have to specify first a line bundle $L$ of degree $d$ on $C$ ($g$ parameters, as described in Chapter~\ref{new Jacobians chapter}. We then have to specify a pair of sections of $L$ (up to multiplying the pair by a scalar). By Riemann-Roch, we will have $h^0(L) = d-g+1$, so to specify a pair of sections (mod scalars) is $2(d-g+1)-1$ parameters. Altogether, we have
$$
2d+2g-2 = \dim \cH_{d,g} = \dim M_g + g + 2(d-g+1)-1;
$$
and solving, we arrive at
$$
\dim M_g \; = \; 3g-3.
$$




\subsection{Severi varieties}

The Severi varieties behave in many ways like the Hurwitz spaces, even though they differ in virtually all particulars.

Just as the Hurwitz space $\cH_{d,g}$ parametrizes pairs $(C,f)$ consisting of a smooth curve $C$ of genus $g$ and a map $f : C \to \PP^1$ of degree $d$, the Severi variety parametrizes pairs $(C,f)$ consisting of a smooth curve $C$ of genus $g$ and a map $f : C \to \PP^2$ of degree $d$. As, in the case of Hurwitz spaces we restrict our attention initially to the locus where the map $f$ is simply branched, we initially make a similar restriction: we consider only those maps $f : C \to \PP^2$ that are birational onto a plane curve $C_0$ having only nodes as singularities. In this case, the curve $C$ is determined simply as the normalization of $C_0$, so we can define the \emph{small Severi variety} $V_{d,g}$ to be the locally closed subset of the projective space $\PP^N$ parametrizing plane curves of degree $d$ corresponding to irreducible nodal curves of degree $d$ and geometric genus $g$.

Since we have appended the adjective ``small" to both the Hurwitz spaces and the Severi varieties, we should explain: in both cases, one goal is to find a good compactification or partial compactification of these spaces. ``Good" here means that the larger space is still a moduli space, but for a larger class of pairs $(C,f)$. For example, in the case of the Hurwitz space, we have the \emph{space of admissible covers}, which parametrizes  maps of degree $d$ from nodal curves $C$ of arithmetic genus $g$ to nodal curves of arithmetic genus 0 satisfying certain local conditions. In the case of Severi varieties, we could simply take the closure $\overline{V_{d,g}}$ of $V_{d,g}$ in the space $\PP^N = \PP^{\binom{d+2}{2}-1}$ of all plane curves of degree $d$, but this is unsatisfactory in a number of ways: the singularities of $\overline{V_{d,g}}$ are arbitrarily awful, as are those of the curves $C_0 \subset \PP^2$ corresponding to the added points.

In fact, the Severi varieties share two key attributes with Hurwitz spaces, the first of which is that their dimensions are readily calculable. In brief, the curve $C_0 \subset \PP^2$ corresponding to a point on the small Severi variety $V_{d,g}$ will have $\delta = \binom{d-1}{2} - g$ nodes; to describe the locus of such points, we can introduce the incidence correspondence
$$
\Sigma = \{(C_0,p_1,\dots,p_\delta) \in V_{d,g} \times (\PP^2)^\delta \; \mid \; C_0 \text{ has a node at $p_i$} \}.
$$
The fibers of the projection $\Sigma \to (\PP^2)^\delta$ are linear subspaces of $\PP^N$, and either a calculation in local coordinates or a little deformation theory shows that they have the expected dimension $N - 3\delta$. We see thus that
$$
\dim V_{d,g} = \dim \Sigma = 2\delta + N - 3\delta = 3d+g-1.
$$

As in the case of Hurwitz spaces, this knowledge is enough for us to determine the dimension of $M_g$. Again, for any given $g$ if we choose $d \gg g$ the map $V_{d,g} \to M_g$ sending the pair $(C, f)$ to the point $C \in M_g$ will be dominant. And again, we can readily calculate the dimension of the fibers: if $C$ is a given curve of genus $g$, to specify a map $f : C \to \PP^2$ of degree $d$ we have to choose a line bundle $L$ of degree $d$ on $C$ ($g$ parameters), and then choose 3 global sections of $L$ up to simultaneous multiplication by a scalar. Since by Riemann-Roch we will have $h^0(L) = d-g+1$, we arrive at
$$
3d+g-1 = \dim V_{d,g}  = g + 3(d-g+1) - 1,
$$
and solving we see again that $\dim M_g = 3g-3$.

The second key attribute that the Severi variety $V_{d,g}$ shares with the Hurwitz space $H_{d,g}$ and  is that \emph{it is irreducible for all $d$ and $g\leq \binom{d-1}{2}$}. In particular, we can use the Severi varieties to prove that $M_g$ is irreducible for all $g$. It should be said, however, that it's not so easy to prove irreducibility of the Severi variety\footnote{The second author of the current volume owes his current employment to this fact.}; the fastest way to prove irreducibility of $M_g$ (in characteristic 0, at least) is still via the Hurwitz spaces.

\section{Hilbert schemes}\label{hilbert scheme section}

The Hilbert schemes---schemes $\cH_{d,g,r}$ parametrizing curves of given degree and arithmetic genus in $\PP^r$ for any $r$---are the subject of a later chapter in their own right. But it should be said at this point that the sort of regular behavior exhibited by the Hurwitz spaces and the Severi varieties is completely absent from the Hilbert scheme. Even if we restrict out attention to  what we might call the ``small Hilbert scheme"---the open subset corresponding to smooth, irreducible and nondegenerate curves---Hilbert schemes are truly wild. Locally, they can have arbitrarily bad singularities (ref to Vakil); globally, they can have many irreducible components---no one has any idea how many in general---of many different dimensions.


\section{Unirationality}

The Brill-Noether theorem, in all its many forms, deals with a simple question: what linear series $g^r_d$ does a curve $C$ of genus $g$ possess? Of course, the answer depends on $C$, but we know from general principles that it's constant on an open subset of $M_g$; so it's natural to ask what the answer is on that open set. That is the subject of the Brill-Noether theorem: what linear series exist on a general curve $C$ of genus $g$? This raises, naturally, a question we'll take up next.

\subsection{Can we write down a general curve of genus $g$?}

Let's do this one genus at a time. For curves of genus 2, the family of curves given by
$$
y^2 = x^6 + a_5x^5 + \dots + a_1x + a_0
$$
includes every curve of genus $2$; in other words, the induced (rational) map $\AA^6 \to M_2$ is dominant, so that  a general choice of the coefficients $a_i$ will yield a general curve.

For genus 3, we can consider the family
$$
\sum_{i+j+k = 4} a_{i,j,k}x^i y^jz^k = 0
$$
of all plane quartic curves; again, the rational map $\AA^{15} \to M_3$ is dominant, so a general choice of the $a_{i,j,k}$ yields a general curve. The same approach works in genera $4$ and $5$; in each case a general canonical curve is a complete intersection, so that if we take the coefficients of its defining polynomials to be general scalars we have a general curve.

This breaks down when we get to genus 6, where a canonical curve is not a complete intersection. But it's close enough: a general canonical curve of genus 6 is the intersection of a smooth del Pezzo surface $S \subset \PP^5$ with a quadric hypersurface $Q$; since all smooth del Pezzo surfaces in $\PP^5$ are isomorphic, we can just fix one such surface $S$ and let $Q$ be a general quadric.

What we are doing in each of these cases is exhibiting a family of curves of the relevant genus over a rational base that dominates $M_g$. Thus, to say that we can write down a general curve of genus $g$ is tantamount to saying that \emph{the moduli space $M_g$ is unirational}

It gets harder as the genus increases. Let's do one more case, genus 7, which already calls for a different approach. Here we want to argue that, by Brill-Noether theory, a general curve of genus $7$ can be realized as (the normalization of) a plane septic curve with 8 nodes $p_1,\dots,p_8 \in \PP^2$. Equivalently, if we let $S = Bl_{p_1,\dots,p_8}(\PP^2)$ be the blow-up, and let $l$ and $e_1,\dots,e_8$ be the classes of the pullback of a line and of the eight exceptional divisors respectively, a divisor of class $7l - 2 \sum e_i$ on $S$. Thus the curves on $S$ form a linear series, parametrized by a projective space $\PP^{11}$.

The problem is, there are many such surfaces $S$; we don't have a single linear system that includes the general curve of genus 7. The good news is, that's OK because the surfaces $S$ themselves form a rationally parametrized family. Explicitly, if we look at the set $\Phi$ of pairs $(S, C)$ with $S = Bl_{p_1,\dots,p_8}(\PP^2)$  the blow-up of $\PP^2$ at eight points and $C \subset S$ a curve of class $7l - 2 \sum e_i$ on $S$, then $\Phi$ is a $\PP^{11}$-bundle over $(\PP^2)^8$, and so is again a rational variety; choosing a rational parametrization of $\Phi$ we get a family of curves of genus $7$ parametrized by $\PP^{27}$ and dominating $M_7$. As before, then, a general point in $\PP^{27}$ yields a general curve of genus 7.

Things continued in this vein up through genus 10, but then this approach fails as well: if we represent a general curve of genus 11 as a plane curve with nodes, the nodes are no longer general points of $\PP^2$, and the same argument doesn't work. Ad hoc (and much more difficult) arguments were given in general 11, 12 13 and 14, but that's where progress apparently stalled.

The reason why became apparent in 1982, when it was shown that for $g$ odd and $>23$, \emph{the moduli space $M_g$ is of general type}; in particular, it can't be unirational. Thus the answer to our naive question---can we write down a general curve of genus $g$---is ``no" for large g!


\input{footer}