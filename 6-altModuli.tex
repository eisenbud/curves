\input{header}

\chapter{Moduli} 
\label{Moduli chapter}\label{ModuliChapter}

In the preceding chapters, we have seen numerous examples of moduli spaces: the symmetric product $C_d$ of a curve $C$ is a moduli space for effective divisors of degree $d$ on $C$; the Picard variety $\pic_d(C)$ is a moduli space for invertible sheaves of degree $d$ on $C$, and of course we have in general the Hilbert scheme parametrizing subschemes of a given scheme. In this chapter, we want to take some time and discuss the moduli space most central to the theory of algebraic curves: the moduli space of curves of genus $g$ up to isomorphism.

\subsection{Genus 2}

Let's start with an example: the moduli space of smooth projective curves of genus $2$. We have seen that the simplest way to represent a curve $C$ of genus 2 is via the canonical map $\phi_K : C \to \PP^1$, which expresses $C$ as a 2-sheeted cover of $\PP^1$ branched over 6 distinct points $p_1,\dots,p_6 \in \PP^1$. Since this expression is unique, we see that the moduli space $M_2$ of smooth curves of genus 2 is---at least set-theoretically---the set of unordered 6-tuples of distinct points in $\PP^1$, modulo the automorphism group ${\rm Aut}(\PP^1) = PGL_2$.

How can we describe this set as the set of points of an algebraic variety in a ``natural" way? This is relatively straightforward: if we choose an ordering of the points $p_i$, there is a unique automorphism of $\PP^1$ carrying $p_1, p_2$ and $p_3$ to $0$, $1$ and $\infty$ respectively.  The remaining three points will be sent to three distinct points in $\PP^1 \setminus \{0, 1, \infty \} $. Of course, this depends on how we order the points in the first place; at the end of the day, we see that the symmetric group $S_6$ acts on the quasi-projective variety
$$
\Gamma = \left( \PP^1 \setminus \{0, 1, \infty \} \right)^3 \setminus \Delta
$$
(where $\Delta$ is the union of all diagonals in the triple product), and the set $M_2$ of isomorphism classes of smooth curves of genus 2 is thus identified with the points of the quotient variety $\Gamma/S_6$.

There are clearly many questions to address---for example, is the variety $\Gamma/S_6$ a fine moduli space in the sense of Chapter~\ref{**}---but this construction at least does two things:

One, it may serve to convince us that $M_2$ is irreducible of dimension 3; and

Two, it allows us to write down explicitly a ``general curve of genus 2:" this is just the curve
$$
y^2 = x(x-1)(x-a)(x-b)(x-c)
$$
with $a, b$ and $c$ general scalars.

\subsection{Higher genus}

Is there an analog for curves of higher genus of the construction above for genus 2? Yes, but we have to make a number of adaptations. To begin with, in the genus 2 example, we worked with the canonical map $\phi_K$, expressing a given curve $C$ of genus 2 as a 2-sheeted cover of $\PP^1$, so that the moduli space of curves of genus 2 could be realized as the space of such double covers modulo $\PGL_2$. What if we adopted the same approach, for example, in genus 3? There, if a curve $C$ of genus 3 is non-hyperelliptic, the canonical map embeds $C$ as a smooth quartic curve in $\PP^2$; since this realization is unique up to automorphisms of $\PP^2$, we might try to realize the space $\tilde M_3$ of non-hyperelliptic curves as the quotient of the space of smooth plane quartic curves---an open subset of the $\PP^{14}$ of all quartic curves---by the action of ${\rm Aut}(\PP^2) = PGL_3$.

There are two immediate issues to deal with, one with a relatively simple solution and one requiring a good bit more work. The first, that we are excluding hyperelliptic curves in this construction, has a relatively straightforward solution: instead of looking at the canonical map, we look at the bicanonical map $\phi_{2K} : C \to \PP^{3g-4}$ (or, if we want to include the case of genus 2, the tricanonical map  $\phi_{3K} : C \to \PP^{5g-6}$). This means we have to replace the relatively simple ``space of smooth plane quartic curves" (an open subset of $\PP^{14}$) diuwith the more daunting ``open subset of the Hilbert scheme of curves of genus $g$ and degree $6g-6$ in $\PP^{5g-6}$," but since we've introduced and constructed the Hilbert scheme in Chapter~\ref{**} this is more a matter of comfort than rigor.

The second issue is more serious: whereas in the case of genus 2 curves in the preceding section we were taking the quotient of a variety by a finite group---which we know always exists---in the proposed construction here we want to take the quotient of (an open subset of) the Hilbert scheme by the positive-dimensional group $PGL_{5g-5}$, and the existence of this quotient is more problematic.

Indeed, the question of when quotients of algebraic varieties by (certain) positive-dimensional groups exist is the central problem of \emph{geometric invariant theory}, which was developed for this reason. In the present volume, we will treat geometric invariant theory as a black box; to describe its inputs and outputs, we will describe a relatively well-understood example.

\subsection{An example: plane cubics}

The simplest way to describe the moduli space of smooth curves of genus 1 is to observe that every such curve can be expressed as a 2-sheeted cover of $\PP^1$ branched over 4 points, and to construct the moduli of unordered 4-tuples of distinct points in $\PP^1$, much as we did in the case of curves of genus 2 above.

But suppose we tried a different approach: suppose we observed that any curve of genus 1 can be realized as a plane cubic, and tried to construct the moduli space by taking the quotient of the space $\PP^9$ of plane cubics by the group ${\rm Aut}(\PP^2) = PGL_3$. Would this work?

The answer is clearly ``no." For example, any $PGL_3$ orbit in $\PP^9$ contains in its closure the locus of points in $\PP^9$ corresponding to triple lines. If the quotient $\PP^9/PGL_3$ existed in the world of algebraic varieties, then, the point corresponding to triple lines would be in the closure of every other point, which can't occur. 

The same problem occurs in less obvious fashion for other orbits as well. For example, consider the orbit of cuspidal plane cubics, like the one given by $y^2-x^3=0$. Given any smooth plane cubic $C$, written in terms of suitable affine coordinates as $y^2-x^3 - ax - b$, we can look at the family of cubics
$$
y^2 - x^3 - t^2ax - t^3b.
$$
For all $t \neq 0$, this cubic belongs to the orbit of $C$, but for $t=0$ it belongs to the orbit of the cuspidal cubic; thus, if a quotient existed, the point corresponding to the orbit of a cuspidal cubic would lie in the closure of every point corresponding to a smooth cubic. 

A related phenomenon involves curves without any singularities other than nodes: as the reader can verify, the orbit in $\PP^9$ corresponding to irreducible cubics with a node contains in its closure the locus of reducible cubics consisting of a line and a conic meeting transversely; and this orbit contains in its closure the orbit of triangles, cubics consisting of three non-concurrent lines. Thus if the quotient existed and was separated, all three of these orbits would have to map to the same point of the quotient.

Geometric invariant theory, or GIT, deals with exactly this issue in general. If we are given a quasiprojective variety $X$, and an action of a reductive algebraic group $G$ on $X$, geometric invariant theory breaks up the set of orbits into three classes: 

\begin{enumerate}

\item First, there are the \emph{stable} orbits. These comprise an open subset $U \subset X$, and the quotient of $U$ by $G$ exists and is well-behaved (that is, the quotient $U/G$ is separated, and its points correspond one-to-one to the stable orbits. In the case of the action of $PGL_3$ on the $\PP^9$ of plane cubics, these are the orbits of smooth plane cubics, and the quotient is the affine $j$-line.

\item Second, there are the \emph{strictly semistable} orbits. These, together with the stable orbits, comprise a larger open subset $V \subset X$, called the \emph{semistable} locus. A quotient $V/G$ exists and is separated, but the points of the quotient may not correspond one-to-one to the semistable orbits. In the example of the action of $PGL_3$ on  $\PP^9$, this would be the orbits of nodal plane cubics; that is, smooth cubics plus the three orbits consisting of irreducible cubics with a node, unions of lines and conics meeting transversely, and triangles. In the quotient, these last three orbits correspond to just one additional point, and this quotient is just the compactification of the affine line to the projective line obtained by adding one point.

\item Lastly, there are the \emph{unstable} orbits. These are the ones that cannot be included in any quotient without resulting in a non-separated space.

\end{enumerate}

One important observation here is that geometric invariant theory is more than an abstract classification theorem; it actually provides tools for determining which class a given orbit belongs to. These are crucial for the application of geometric invariant theory to specific situations; a  priori, given an action of a group $G$ on a variety $X$, we don't know that there are any stable orbits at all.

\subsection{A construction of the moduli space of curves}

To summarize, the tool of geometric invariant theory gives us a way of constructing a moduli space $M_g$ for smooth  curves of genus $g$. As we suggested, we start with the Hilbert scheme $\cH$ parametrizing curves of genus $g$ and degree $6g-6$ in $\PP^{5g-6}$, and pass to the open subset $W \subset \cH$ of smooth curves. Within this open subset, the locus $U \subset W$ of curves embedded by their tricanonical bundles is a closed subvariety, and---once we verify that orbits in $U$ are stable, we can take the moduli space $M_g$ to be the quotient $U/PGL_{5g-5}$.

\section{Compactifying moduli}

We come now to a development that has played an enormous role in the history of algebraic curves: the compactification of the moduli space of curves of genus $g$.

Why is this an important development? There are two reasons:

First, the great majority of the techniques that algebraic geometers have developed for dealing with varieties apply to projective varieties. Indeed, the most effective way of dealing with a quasi-projective variety has proved to be to realize it as the complement of a divisor in a projective variety. To give one example, we have asked whether we can ``write down a general curve of genus $g$" for any given $g$, a question that we have interpreted as asking whether there is a family of curves $\cC \to B$ of genus $g$ over an open subset $B \subset \AA^N$ such that the induced map $B \to M_g$ is dominant. Bur this would imply that $M_g$ was unirational, and that in turn would be contradicted by the presence of any pluricanonical differential form on any smooth compactification of $M_g$. To carry this out, we need to have a compactification of $M_g$.

The second applies to a special class of compactifications of the moduli space $M_g$, called \emph{modular compactifications}. 



\newpage

Here's a possible new structure for the chapter. Possible too ambitious. But some items below could be quite short. Can we prove *anything*? Severi varieties move back home to "Plane curves". Hurwitz and Hurwitz numbers should go into the Hyperelliptic chapter, where we have a section on coverings of $\PP^1$ already.

\begin{enumerate}
 \item Name: let's call it ``parameter spaces and moduli''.
 
 Introduction: what we want of moduli (replacing "what is a moduli problem"). Three routes
 1. Get lucky, and find a moduli space readymade (eg: Jacobian). 2.  gather all examples in one place, factor out isomorphisms (we did this with divisors). 3. Get local deformation info, patch.
 
 \item Gathering all examples:  the Hilbert scheme, with it's family. Note that every variety appears many times (GL(n)). Talk briefly about construction: universal bound for regularity of ideals with given saturation and/or Gotzmann's persistence theorem (if an ideal generated in degree $\leq d$ achieves minimal growth
 from degree $d$ to degree $d+1$, it has minimal growth (and thus known Hilbert function) thereafter.
 Use this to give determinantal equations.
 
 \item versal deformation explain why not universal deformation.
 
 \item The moduli space. Approach \#1 (Mumford's Thesis, GIT, then--for the compactification, projectiveness, Mumford-Kundsen and Knudsen) Explain Hilbert scheme of tricanonical curves, linearize the action of PGL, take quotient. Fibers are NOT the orbits (unlike case of finite groups). Stable, semistable, unstable. 
 
 \item Interlude: Semistable reduction. ``every degeneration of curves is a degeneration to a nodal curve''
(mention open problems). The reason why the compactification is compact.

\item The moduli space. Approach \#2 (Deligne-Mumford)

\end{enumerate}


\subsection{Can one write down a general curve of genus $g$?}

%The first important result about the moduli space is that $M_g$ is irreducible; we will sketch the characteristic 0 proof in Section~\ref{hurwitz spaces}  (a proof of the irreducibility of $M_g$ valid in arbitrary characteristic was not found until much later. \fix{reference!})

Given that a moduli space $M_g$ exists and is irreducible, we can make sense of the question: Can one write down a general curve of genus $g$?
That is: can we find a family of curves depending freely on parameters---in other words, a family $\cC \to B$ over an open subset $B \subset \AA^n$---that includes a general curve of genus $g$, in the sense that the induced map $\phi_\cC : B \to M_g$ is dominant? This is of course just the first step in knowing the structure of $M_g$.

We have done this in the case of genus 2 and 3. Essentially
the same approach works in genera $4$ and $5$; in each case a general canonical curve is a complete intersection, so that if we take the coefficients of its defining polynomials to be general scalars we have a general curve.

This method breaks down when we get to genus 6, where a canonical curve is not a complete intersection. But it's close enough: a general canonical curve of genus 6 is the intersection of a smooth del Pezzo surface $S \subset \PP^5$ with a quadric hypersurface $Q$; since all smooth del Pezzo surfaces in $\PP^5$ are isomorphic, we can just fix one such surface $S$ and let $Q$ be a general quadric.

It gets harder as the genus increases. Let's do one more case, genus 7, which already calls for a different approach. Here we want to argue that, by Brill-Noether theory, a general curve of genus $7$ can be realized as (the normalization of) a plane septic curve with 8 nodes $p_1,\dots,p_8 \in \PP^2$. Equivalently, if we let $S = Bl_{p_1,\dots,p_8}(\PP^2)$ be the blow-up, and let $l$ and $e_1,\dots,e_8$ be the classes of the pullback of a line and of the eight exceptional divisors respectively, a divisor of class $7l - 2 \sum e_i$ is a curve of genus 7 on $S$. Thus the curves on $S$ form a linear series, parametrized by a projective space $\PP^{11}$.

The problem is, there are many such surfaces $S$; we don't have a single linear system that includes the general curve of genus 7. The good news is, that's OK because the surfaces $S$ themselves form a rationally parametrized family. Explicitly, if we look at the set $\Phi$ of pairs $(S, C)$ with $S = Bl_{p_1,\dots,p_8}(\PP^2)$  the blow-up of $\PP^2$ at eight points and $C \subset S$ a curve of class $7l - 2 \sum e_i$ on $S$, then $\Phi$ is a $\PP^{11}$-bundle over $(\PP^2)^8$, and so is again a rational variety; choosing a rational parametrization of $\Phi$ we get a family of curves of genus $7$ parametrized by $\PP^{27}$ and dominating $M_7$. As before, then, a general point in $\PP^{27}$ yields a general curve of genus 7.

Things continued in this vein up through genus 10, but then this approach fails as well: if we represent a general curve of genus 11 as a plane curve with nodes, the nodes are no longer general points of $\PP^2$, and the same argument doesn't work. Ad hoc (and much more difficult) arguments were given in genera 11, 12 13 and 14, but so far no-one can go further in producing general curves. 

A spectacular application of the existence of $\overline M_g$ was the proof that this sequence cannot go much further! To say that there exists a family $\cC \to B$ over an open subset $B \subset \AA^n$ such that the induced map $\phi_\cC : B \to M_g$ is dominant implies that $M_g$ is \emph{unirational}, an assertion that we can disprove simply by exhibiting a pluricanonical divisor on a desingularization of $\overline M_g$. This was carried out in \fix{add references)} for all genera $g \geq 23$; in a neat twist, the divisor used consisted of curves possessing a special linear system with Brill-Noether number $-1$, meaning its existence was dependent on the proof of the Brill-Noether Theorem.

The existence of an effective pluricanonical divisor on $\overline M_g$ tells us even more: for example it implies that \emph{$M_g$ is not uniruled}, meaning that through a general point $[C] \in M_g$ there are no rational curves. This is because the restriction (or pullback) of a nonzero differential to such a curve would be a nonzero diferential, contradicting the fact that the canonical bundle of $\PP^1$ has  negative degree. A consequence is that the sort of descriptions of embeddings with which much of this book is concerned, where we produce a surface on which a general curve of a certain sort lies, cannot be continued to high genus:

\begin{corollary}
 A general curve $C$ of  genus $\geq 22$ does not lie in a nontrivial linear series on any surface
 except those birational to $C\times \PP^1$.
\end{corollary}
\begin{proof}
 A linear family of curves containing $C$ that are not all isomorphic would map to a rational curve in $M_g$; if the curves are all isomorphic, one can show that the family
 covers a surface birational to a product of $C$ and some other curve \fix{put in an argument,
 using the prop. that a general curve has no automorphisms.}
\end{proof}



\begin{exercise}
Find the degree of the covering space $\alpha : \cH_{3,g} \to U \subset \PP^{2g+4}$
defined in Section{hurwitz spaces}.
\end{exercise}

\begin{exercise}\label{symmetric power vs Hilbert scheme}
\begin{enumerate}
 \item If $X$ is a smooth curve, then the Hilbert scheme of finite subschemes of $X$ of degree $d$ is
 isomorphic to the symmetric product of $d$ copies of $X$.
 \item If $X$ is a singular curve or any variety of dimension $r \geq 2$, the symmetric power $X^{(d)}$ is \emph{not} the Hilbert scheme of subschemes of dimension 0 and degree $d$ on $X$. 
 
 \fix{maybe needs a hint, especially since we can't do even the first part!}
\end{enumerate}
 \end{exercise}

\section{Exercises}
\begin{exercise}
It is not an accident that we can characterize a fine moduli space $M$ in terms of the maps into it. 
 Let $X$ be a category, and $F,G$ two functors from $X$ to the category of sets.
 A morphism $\eta: F\to G$ in the category of functors is what is called a \emph{natural transformation}:
 for every object $a\in X$ there is a morphism $\eta_a:F(a) \to G(a)$ such that for every
 morphism $f: a\to b$ in $X$ the compositions $G(f)\circ \eta_a$ and $\eta_b\circ F(f)$
 are equal. 
\begin{enumerate}
 \item (Prove Yoneda's Lemma: If $X$ is any category, and $F$ is a contravariant functor from $X$ to the category of sets, then 
 $$
 \Hom_{\hbox{\scriptsize Functors on $X$}}(\Hom_X( -, Z), F) = F(Z)
 $$
 \item Conclude that if the functors $\Hom_X( -, Z)$ and $Hom_X( -, Z')$ are isomorphic in the functor category, 
 then $Z \cong Z'$ in $X$; that is, the functor $\Hom_X( -, Z)$ determines the object $Z$.
 \end{enumerate}
\end{exercise}

%
%\section{Unirationality}
%
%The Brill-Noether theorem, in all its many forms, deals with a simple question: what linear series $g^r_d$ does a curve $C$ of genus $g$ possess? Of course, the answer depends on $C$, but we know from general principles that it's constant on an open subset of $M_g$; so it's natural to ask what the answer is on that open set. That is the subject of the Brill-Noether theorem: what linear series exist on a general curve $C$ of genus $g$? This raises, naturally, a question we'll take up next.
%
%\subsection{Can we write down a general curve of genus $g$?}
%
%Let's do this one genus at a time. For curves of genus 2, the family of curves given by
%$$
%y^2 = x^6 + a_5x^5 + \dots + a_1x + a_0
%$$
%includes every curve of genus $2$; in other words, the induced (rational) map $\AA^6 \to M_2$ is dominant, so that  a general choice of the coefficients $a_i$ will yield a general curve.



\input{footer}