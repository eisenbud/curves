\input{header}

\chapter{Syzygies}
\label{SyzygiesChapter}

%Useful for drawing betti tables:
%$$
%\vbox{\offinterlineskip %\baselineskip=15pt
%\halign{\strut\hfil# \ \vrule\quad&# \ &# \ &# \ &# \ &# \ &# \ 
%&# \ &# \ &# \ &# \ &# \ 
%\cr
%degree&\cr
%\noalign {\hrule}
%0&1&--&--&--&--&--&--\cr
%1&--&17&46&45&4&--&--\cr
%2&--&--&--&--&25&18&4\cr
%\noalign{\bigskip}
%\omit&\multispan{8}{\bf Conjectural shape of $F_\bullet$}\cr
%\noalign{\smallskip}
%}}
%$$
%
%
%\centerline{\scriptsize
%\begin{tabular}{r|ccc} 
%$j\backslash i$&0&1&2\\ 
%\hline 
%0&1&$-$&$-$\\ 
%1&$-$&3&2\\ 
%\end{tabular}}
%
%
%$$
%\begin{matrix} 
%j\backslash i&\vline&0   &  1    & \cdots & n    \cr\hline
%\vdots&\vline&\vdots&\vdots & \cdots    &\vdots     \cr 
%       0&\vline&\beta_{0,0}&\beta_{1,1}&\cdots&\beta_{n,n}\cr
%       1&\vline&\beta_{0,1}&\beta_{1,2}&\cdots&\beta_{n,n+1}\cr
%\vdots&\vline&\vdots&\vdots & \cdots    &\vdots     \cr 
%\end{matrix}
%$$         
%%
%
\def\length{{\rm length}}

%Motivation: canonical embedding turns intrinsic invariants into projective invariants. Hilbert Function. Projective Normality; Canonical Module.
%
%What are the projective invariants that correspond to Clifford index? Conjecturally, Green's conjecture. Inequality from Eagon-Northcott.
%
%Hilbert Syzygy theorem, Hilbert function derivation, Unique minimal resolution, Betti table, 
%\fix{ introduce tools as they are used}


In Chapter~\ref{LinkageChapter} we related the resolutions of curves in $\PP^3$ to their Hartshorne-Rao modules. The
simplest case was that in which the Hartshorne-Rao module vanishes, that is, the case of arithmetically Cohen-Macaulay curves.
In this chapter, after a review of some key ideas from homological commutative algebra, we will show that curves embedded by complete linear series of high degree, and also canonical curves, are arithmetically
Cohen-Macaulay. We will then introduce the Eagon-Northcott complexes, and explain their relation to the resolutions of canonical curves. We close the chapter with an explanation of Green's conjecture, which proposes a a way in which the intrinsic geometry
of a curve may be connected to the shape of its minimal free resolution of its ideal in the canonical embedding.


\section{Free resolutions and the Cohen-Macaulay and Gorenstein conditions}
This section contains few proofs; the material may be found in~\cite[Chapter ****]{Eisenbud1995}.

\begin{remark}
 There are two related contexts in which the results of this section can be used: over a local ring and, with graded modules and homogeneous ideals, over a polynomial ring whose variables have positive degree. These are parallel essentially because Nakayama's Lemma works in both cases. They can be unified by working with graded modules over positively graded rings whose degree 0 component is a local ring, but rather than worry the reader with this generality we will simply work with local rings or polynomial rings over a field with variables in degree 1, and trust the reader to apply the results in the other case when necessary.
\end{remark}

\subsection{Free resolutions}
Let $(R,\gm, k)$ be a local ring and let $M$ be a finitely generated module. A \emph{free resolution} of $M$ is an exact complex
$$
\FF: \cdots \rTo F_s \rTo^{\phi_s} F_{s-1} \rTo^{\phi_{s-1}} \cdots \rTo F_1 \rTo^{\phi_1}  F_0 \rTo M \rTo 0.
$$
The resolution is \emph{minimal} if a minimal set of generators of $F_i$ maps to a minimal set of generators of the kernel of the following map,
or equivalently (by Nakayama's Lemma) the maps in $\FF\otimes_R k$ are all 0.

The first examples of a minimal free resolution are the Koszul complexes, which resolve $R/I$ when
 $I = (f_1,\dots, f_t)$
is a complete intersection, that is, $f_1,\dots, f_t$ is a regular sequence.  For $t = 2,3$ these look like
$$
\begin{aligned}
 0\rTo &R \rTo^{
\begin{pmatrix}
-f_2\\f_1
\end{pmatrix}}
 R^2\rTo^{
 \begin{pmatrix}
f_1&f_2
\end{pmatrix}}
 R \rTo R/I \rTo 0\\
 \end{aligned}
 $$
 
%%

and

$$
\begin{aligned}
0\rTo R \rTo^{
\begin{pmatrix}
f_1\\f_2\\f_3
\end{pmatrix}} R^3&\rTo{
\begin{pmatrix}
 0&f_3&-f_2\\
 -f_3&0&f_1\\
 f_2&-f_1&0
\end{pmatrix}}
 R^3\rTo^{
 \begin{pmatrix}
f_1&f_2&f_3
\end{pmatrix}}R \rTo R/I \rTo 0
\end{aligned}
$$

Minimal free resolutions of a given module $M$ are all isomorphic, and the \emph{projective dimension}  $\pd(M) = \pd_R(M)$ is their length, the number of nonzero
maps (possibly infinity). Equivalently, 
$$
\pd\ M = \max\{s \mid \Ext_R^s(M,k) \neq 0 \}.
$$
Fundamental
results of Auslander, Buchsbaum and Serre say that $R$ is \emph{regular}---that is, the Krull dimension of $R$ is equal to the minimal number
of generators of $\gm$---if and only if the minimal free resolution of the residue field is finite, in which case
the minimal free resolution of every module is finite. 

\subsection{Depth and the Cohen-Macaulay property}
The Auslander-Buchsbaum formula expresses the projective dimension of a module in the case where the projective dimension is finite. We will restrict to the case of most interest to us, that of a graded module $M$ over a polynomial ring $S$; but the
theory for a regular local ring is exactly parallel, and the theorem is true over an arbitrary local ring if we restrict to modules of finite projective dimension.

\begin{definition}
 The \emph{depth of $M$} is the maximal length of sequence of homogeneous polynomials $f_1,\dots,f_m \in S$ of positive degree such that $f_1$ is a nonzerodivisor on $M$, $f_2$ is a nonzerodivisor on $M/(f_1M)$, and so on. 
\end{definition}

\begin{theorem}[Auslander-Buchsbaum formula]\label{AB formula}
If $M$ is a finitely generated graded module over $S = \CC[x_0,\dots, x_r]$  then
$$
\pd M = \dim S - \depth M
$$
and this is $\geq \codim \ann_S M$, the codimension of the annihilator of $M$.
\end{theorem}

Thus the depth of an $S$-module $M$ is equal to the dimension of $M$ if and only if the projective dimension
of $M$ is equal to the codimension of $M$; In this case we say that $M$ is a
\emph{Cohen-Macaulay module}. It follows from the characterization that every localization of a Cohen-Macaulay
module is again Cohen-Macaulay.

As we showed in Chapter~\ref{linkageChapter}, a curve $C\subset \PP^3$ is linked to a complete intersection
if and only if  $H^1_*(\sI_C) := \oplus_{m\in \ZZ} H^1(\sI_C(m)) = 0$, in which case $C$ is said to be is arithmetically Cohen-Macaulay. Here is the connection between these notions: 

\begin{proposition}\label{meaning of ACM}
A projective curve $C \subset \PP^r$  has $H^1_*(\sI_C) = 0$ if and only if the homogeneous coordinate ring of $C$
is Cohen-Macaulay or, equivalently, the depth of the homogeneous  coordinate ring of $C$ is 2.
\end{proposition}

\begin{proof}
 From the exact sequence
$$
0\to I_C \to S \to S/I_C \to  H^0_*( \sO_C) \to H^1_*(\sI_C) \to 0,
$$
we see that $H^1_*(\sI_C) = 0$ if and only if the natural map $S/I_C\to H^0_*(\sO_C)$ is an isomorphism. 
Moreover, for any purely 1-dimensional projective scheme $C$ the $S$-module $H^0_*(\sO_C)$ is finitely generated and
 has depth 2; this follows because
a general form $f_1$ does not vanish identically on any component of $C$, and modulo $f_1$ we get a submodule of $H^0_*(\sO_\Gamma)$, where $\Gamma$ is the intersction of $C$ with the vanishing locus of $f_1$. Moreover any submodule of $H^0_*(\sO_\Gamma)$ has depth
1 because any form that is nonzero at every point of the (finite) support of $\Gamma$ is a nonzerodivisor.

Conversely, if $S/I\neq H^0_*( \sO_C)$, then since $H^0_*( \sO_C)/(S/I)$ has finite length, this quotient has depth 0,
and it follows from Lemma~\ref{depth lemma} below that $S/I$ has depth 1.
\end{proof}

More generally, we say that a subscheme $X\subset \PP^r$ is \emph{arithmetically Cohen-Macaulay}
if $H^1(\sI_{X/\PP^r}(m)) = 0$ for all $m$ and also $H^i(\sO_X(m)) = 0$ for all $m$ and all $0<i<\dim X$,
and this is equivalent to the Cohen-Macaulay property of $S/I_X$. As with the case of curves,
the condition that $H^1(\sI_{X/\PP^r}(m)) = 0$ 
is strongly dependent on the embedding. Using Theorem~\ref{WMACE} below one can show
that $X$ is arithmetically Cohen-Macaulay if and only if the dual of the minimal $S$-free resolution
of $S/I_X$ is the minimal $S$-free resolution of $\omega_{S/I_X}$, where as usual $S$ is the
homogeneous coordinate ring of $\PP^r$.


By contrast, the condition
that $H^i(\sO_X(m)) = 0$ for all $m$ and all $0<i<\dim X$, which is in any case trivial for curves, is 
equivalent to saying that $X$ is \emph{locally Cohen-Macaulay}: the local rings of $X$ are all Cohen-Macaulay (that is, their depth is equal to their dimension). This is the case for any purely 1-dimensional scheme. 

Usually the adjective ``locally'' is omitted. Instead, the 
modifier ``arithmetically'' is added when the homogeneous coordinate ring is Cohen-Macaulay (which implies the local condition).

The \emph{depth lemma} \cite[***]{Eisenbud1995} is a useful tool for computing the depth:

\begin{lemma}\label{depth lemma}
If 
$$
0\to A\to B\to C\to 0
$$
is a short exact sequence of finitely generated modules over a local or positively graded ring $R$ then
\begin{enumerate}
\item $\depth B \geq \min\{\depth A, \depth C\}$;
 \item If $\depth B>\depth C$ then $\depth A = \depth C -1$
\end{enumerate}
\end{lemma}


\subsection{The Gorenstein property} 
Another important homological condition is the condition that $\omega_X$ is an invertible sheaf; when this holds, $X$ is \emph{quasi-Gorenstein}. When, in addition, $X$ is Cohen-Macaulay we say that $X$ is \emph{Gorenstein}. Any scheme that is locally a complete intersection, such as any smooth scheme and any plane curve, is Gorenstein. Since the restriction
of $\sO_{\PP^r}(1)$ to a subvariety is always invertible, saying that a scheme $X$ is canonically embedded implies that
$X$ is at least quasi-Gorenstein. As with the Cohen-Macaulay property, the Gorenstein property is interpreted locally
on a scheme. We say that a projective scheme $X$ is \emph{arithmetically Gorenstein}
if its homogeneous coordinate ring is Gorenstein, and it follows that $\omega_{S/I} \cong S/I(a)$ for some integer $a = a(X)$.

If $X$ is arithmetically Cohen-Macaulay, so that
$\pd(X) = codim(X)$,  then since 
$$
(S/I)(a) \cong \omega_{S/I_X} \cong \Ext^{\codim X}(S/I, S)(-r-1),
$$
it follows that if $X$ is arithmetically Cohen-Macaulay, then $X$ is  \emph{arithmetically Gorenstein} if and only if
the  minimal free resolution of $S/I$ is isomorphic, up to shift, to its own dual. We have seen an example already
in the Koszul complex (a complete intersection is Gorenstein) and we will see more examples
below.


\section{Curves of high degree}\label{high degree ACM}
Let $C$ be a smooth curve of  genus $g$. We have seen that every invertible sheaf of degree $d \geq 2g+1$ is very ample. We will now show that
such a curve,  embedded by the corresponding complete linear series, is arithmetically Cohen-Macaulay.

\begin{theorem}\label{high degree ACM}
If $C\subset \PP^r$ is an integral projective curve, embedded by a complete linear series $|D|$ of degree $d\geq 2p_a(C)+1$, then
the restriction maps 
$$
H^0(\sO_{\PP^{r}}(m)) \to H^0(\sO_C(m))
$$
 are surjective for all $m$. Equivalently, $H^1(\sI_C(m)) = 0$ for all $m$.
\end{theorem}


\begin{proof} We do induction on $m$, noting that
for $m\leq 1$ the conclusion is immediate. 

The case $m=2$ requires a special argument. Note that the complete linear series
embeds $C$ in $\PP^{r}$.  Let $H$ be a general hyperlane in $\PP^{r}$.
 By Theorem~\ref{linear general position} the $d$ points $\Gamma = C\cap H$ are in linearly general position. By Proposition~\ref{arbitrary hyperplane} they span $H \cong \PP^{r}$.
 
By the Riemann-Roch theorem $r = d-p_a$. The inequality $d\geq 2p_a+1$ is equivalent to the statement that $d\leq 2(r-1)+1$ so by Lemma~\ref{min hilb} the points of $\Gamma$ impose $d$ conditions on quadrics.
This implies that
the restriction map $H^0(\sO_{\PP^{r}}(2))\to H^0(\sO_H(2)) \to H^0(\sO_{\Gamma/H}(2))$ is surjective, whence $H^1(\sI_\Gamma(2)) = 0.$

Applying $H^1$ to exact sequence 
$$
0\to \sI_C(1) \to \sI_C(2) \to \sI_{\Gamma/H}(2) \to 0
$$
of Proposition~\ref{arbitrary hyperplane}
we see that $H^1(\sI_C(2))=0$.

Now suppose that  $m>2$. By induction, it suffices to show that the multiplication map
$$
H^0(\sO_C(1)) \otimes H^0(\sO_C(m-1)) \to H^0(\sO_{C}(m))
$$
is surjective.

For this we use what David Mumford has called the \emph{base-point-free pencil trick}:
Let $V$ be a pair of sections of $H^0(\sO_{\PP^{d-g}}(1)) = H^0(\sO_C(1))$ that do not vanish simultaneously anywhere on $C$ (and thus define a base-point-free pencil on $C$).
Since $V\otimes \sO_{C}(m-1)\to \sO_{C}(m)$ is an epimorphism, it follows that the kernel $\sL$ is an invertible sheaf.
From the exact sequence
$$
0\to \sL \to V\otimes \sO_{C}(m-1) \to \sO_{C}(m) \to 0
$$
we see that
$$
\sL \otimes \sO_{C}(m) \cong  \wedge^2(V\otimes \sO_{C}(m-1))\cong \sO_C(2m-2).
$$
Thus $\sL \cong \sO_C(m-2)$.
Though not necessary for the argument, we note that we have described a Koszul complex
$$
0\to \wedge^2V \otimes \sO_C(m-2) \to V\otimes \sO_{C}(m-1)\to \sO_{C}(m)\to 0,
$$
and we could have argued directly from criteria for the exactness of such sequences.

Since $m\geq 3$ we have $\deg(\sO_C(m-2)) \geq d > 2p_a-2$, so $H^1(\sO_C(m-2)) =0$, and it follows that the map $V\otimes H^0(\sO_{C}(m-1))\to H^0(\sO_{C}(m))$
is surjective. Thus  
$H^0(\sO_C(1))\otimes H^0(\sO_{C}(m-1))\to H^0(\sO_{C}(m))$
is surjective, completing the proof.
\end{proof}


%\section{Canonical Curves}\label{canonical ACM}
%
%\fix{Since canonical curves are Castelnuovo curves, we could move this theorem to Chapter 9, as an application of
%(the proof of) Castelnuovo's theorem. The proof given here is probably more general -- it only needs a simple $g-2$-secant---but we're not using that extra generality, and we could refer to Schreyer's paper. I have added this to Ch 9, along with the 
%fact. Most of this
%section can go, but we should keep a discussion of the canonical resolution here.}
%
%A slightly more subtle argument will show that
%canonical curves are arithmetically Cohen-Macaulay, a result (in the smooth case) of~\cite{Noether-canonical} that we have been using ever since Section~\ref{Noether theorem section}.
%The necessary modification is to replace the base-point-free pencil with one having many base points in a controlled way.
%We follow the treatment in \cite{Schreyer}. 
%
%If $C$ is an integral curve then by Theorem~\ref{linear general position} a general hyperplane $H\subset \PP^{g-1}$
%meets $C$ transversely in a set of points in linearly general position. Any subset $\Gamma$ of $g-2$ of these points will span a $(g-3)$-plane $\Lambda$
%meeting $C$ transversely in $\Gamma$, and we call $\Lambda$ a \emph{simple $(g-2)$-secant $(g-3)$-plane}. 
%
%\begin{theorem}\label{canonical curves are ACM}
%If $C\subset \PP^{g-1}$ is a  canonically embedded integral curve of genus $g := H^0(\omega_C)$, then 
%$$
%\HH^{0}(\sO_{\PP^{g-1}}(m)) \to \HH^{0}(\sO_{C}(m));
%$$
%is  surjective for all $m$; equivalently,
%$\HH^{1}_*(\sI_{C/\PP^{g-1}}) = 0$.
%\end{theorem}
%  
%\begin{proof} 
%%The Hilbert polynomial $\chi_{C}(t) = h^{0}\sO(t)-\h^{1}\sO(t)$ of $C$ has degree equal to
%%$\dim C = 1$, so it is determined by two values.
%
%For $m = 0,1$ the conclusion is immediate. Let $H$ be a general hyperplane in $\PP^{g-1}$, 
%and let $\Gamma$ be a set of
% of $g-2$ points of $H\cap C$ (so that the linear span $\overline \Gamma$ is a simple $(g-2)$-secant $(g-3)$-plane).
%
%By induction on $m$ it suffices to prove the surjectivity of
%$$
%\HH^{0}(\sO_{C}(H)) \otimes \HH^{0}(\sO_{C}((m-1)H)) \to \HH^{0}(\sO_{C}(mH))
%$$
%for all $m$, where $H$ is the hyperplane divisor on $C$. The cases $m=0,1$ are immediate.
%
%Since the points of $\Gamma$
%are linearly independent, we may choose homogeneous coordinates $x_{i} \in \HH^{0}(\sO_{C}(1))$ so that
%$x_{i}(p_{j}) \neq 0$ if and only if $i = j$. 
%and $H^0(\sO_C(1))$ is the direct sum of the 2-dimensional
%space $V:= \HH^{0}(\sO_{C}(H-\Gamma))$ and the space $X := \langle x_1,\dots, x_{g-2}\rangle$ spanned by the $x_i$.
%Furthermore, the image of 
%$$
%V \otimes \HH^{0}(\sO_{C}((m-1)H)) \to \HH^{0}(\sO_{C}(mH))
%$$
%is contained in $\HH^{0}(\sO_{C}(mH-\Gamma))$, which is disjoint from the space
%$X_m:= \langle x_1^m,\dots, x_{g-2}^m\rangle$. Since $X_m$ surjects onto
%$$
%H^0(\sO_C(mH|_\Gamma) = H^0(\sO_C(mH)/H^0(\sO_C(mH(-\Gamma)),
%$$
%it suffices to prove the surjectivity of
%$$
%V \otimes \HH^{0}(\sO_{C}((m-1)H)) \to \HH^{0}(\sO_{C}(mH-\Gamma))
%$$
%for  $m\geq 2$.
%
%
%Since $V$ is base-point free away from $\Gamma$, the two sections of $V$
%define a surjective map $V\otimes \sO_C \to  \sO_{C}(H-\Gamma)$ and thus a short exact sequence of sheaves
%$$
%(*) \quad 0\to \sL  \to V\otimes \sO_C((m-1)H) \to  \sO_{C}(mH-\Gamma)\to 0
%$$
%for some invertible sheaf $\sL$. We must show that the right-hand map is surjective on global sections for $m\geq 2$.
%
%From the exact sequence $(*)$ it follows that
%$$
%\sL\otimes \sO_{C}(mH-\Gamma) \cong  \wedge^2(V\otimes \sO_C((m-1)H) ) \cong \sO_C(2(m-1)H) 
%$$
%so $\sL \cong \sO_C((m-2)H+\Gamma).$ 
%
%
%To deal with the case $m=2$ we compute the dimensions of the cohomology of the three sheaves in the exact squence (*).
%By the Riemann-Roch theorem,
%$$
%h^0(\sO_C(2H-\Gamma)) = 3g-3 - (g-2) = 2g-1.
%$$ 
%On the other hand,
%$$
%h^0(\sO_C(\Gamma)))=\deg \Gamma -g+1+h^0(H-\Gamma) = -1 + h^0(\sO_C(H-\Gamma)) = 1
%$$
%and 
%$$
%\dim V \otimes H^0(\sO_C(H)) = 2g.
%$$
%Thus the left exact sequence
%$$
%0\to H^0(\sO_{C}(\Gamma)  \to V\otimes H^0(\sO_C(H)) \to H^0( \sO_{C}(2H-\Gamma))) \to 0
%$$
%is also right exact, as required for the case $m=2$.
%
%For $m\geq 3$ the divisor $(m-2)H+\Gamma$ has degree $>2g-2$. Consequently
%$H^1(\sO_{C}((m-2)H+\Gamma)) = 0$, which implies that the sequence $(*)$ is
%exact on global sections, as required.
%\end{proof}
%
%
%\begin{fact}
%Though we have stated and proved this theorem for smooth curves,
%only a few additional arguments are needed to treat a much more  general case. In \cite{Schreyer} 
%the same result is proven for
%any purely one-dimensional, nondegenerate closed subscheme $C\subset \PP^{g-1}$ satisfying
%$$
% h^{0}(\sO_{C}) = 1,\ h^{0}(\sO_{C}(1) = g, \ \omega_{C} = \sO_{C}(1),
%$$ 
%and having a simple $(g-2)$-secant $(g-3)$-plane.
%\end{fact}
% 
 \fix{the theorem and proof commented out above are tentatively replaced by the simpler argument in Ch 9}
 
 \begin{corollary}\label{canonical hilbert function}
If $C\subset \PP^{g-1}$ is a canonical curve with a simple $g-2$-secant $g-3$-plane, then the Hilbert function of the homogeneous coordinate ring $S_{C}$ of  $C$ depends only on $g$, and is given by:
$$
\dim({S_{C}})_{n} = h^{0}(\cO_{C}(n)) = 
\begin{cases}
 0 &\mbox {if } d<0\\
 1 & \mbox {if }  d=0\\
 g & \mbox {if }  d=1\\
 (2g-2)n + 1 - g & \mbox {if }  d>1\\
\end{cases}
$$
\end{corollary}
\begin{proof}
Theorem~\ref{canonical curves are ACM} implies, in particular, that the homogeneous coordinate ring of $C$ can be identified with $\oplus_{n \in \ZZ} H^0(\sO_C(n))$.  
\end{proof}

 As noted above, the homogeneous coordinate ring $S/I_C$ of an arithmetically Cohen-Macaulay curve $C\subset \PP^r$ is isomorphic
 to $H^0_*(\sO_C)$. In the same way, the canonical module $\omega_{S/I} \cong \Ext_S^{r-1}(S/I_C, S(-r-1))$ of an arithmetically Gorenstein curve satisfies
 $\omega_{S/I} = H^0_*(\omega_C)$.  If the last free module in the minimal resolution of $S/I$ is $S(-a-r-1)$,
 then $\Ext_S^{r-1}(S/I_C, S(-r-1)) = (S/I)(a)$, and the number $a$ is (unimaginatively) called the $a$-invariant
 of the ring $S/I$.
 
 In the case of a canonically embedded curve $C\subset \PP^{g-1}$ we have $\omega_C = \sO_C(1)$, 
 so  $\omega_{S/I}= H^0_*(\omega_C)$ is generated in degree $-1$. Thus the  the last
 free module in the minimal free resolution $\FF$ of $S/I$ is $S(-r-2)$. Since the resolution is minimal,
 the minimal  twist in $F_{i+1}$ must be $\leq$ the minimal twist in $F_i$; since the dual is also a minimal resolution,
 it follows that both the minimal and maximal twists of $F_{i+1}$ are $\leq$ the minimal and maximal twists of $F_i$, respectively.
 Since there are no linear forms in the ideal, and the resolution is self-dual, we see that the betti table of $\FF$ 
 
 \fix{We haven't said what a Betti table is at this point. It will be defined and described in the section ``How to look at a resolution" later in this chapter; maybe move that section earlier?}
 
 has the form

% \centerline{\scriptsize
%\begin{tabular}{r|cccccc} 
%$j\backslash i$&0&1&2&$\cdots$&$r-2$&$r-1$\\ 
%\hline 
%0&1&$-$&$-$&$\cdots$&$-$&$-$\\ 
%1&$-$&$\binom{g-2}{2}$&$?$&$\cdots$&$?$&$-$\\
%2&$-$&?&$?$&$\cdots$&$\binom{g-2}{2}$&$-$\\
%3&$-$&$-$&$-$&$\cdots$&$-$&$1$\\
%\end{tabular}.}
%
%\centerline{\scriptsize
%\begin{tabular}{r|cccccc} 
%$j\backslash i$&0&1&2&$\cdots$&$r-2$&$r-1$\\ 
%\hline 
%0&1&$-$&$-$&$\cdots$&$-$&$-$\\ 
%1&$-$&$\binom{g-2}{2}$&$b_2$&$\cdots$&$b_{r-2}$&$-$\\
%2&$-$&$b_{r-2}$&$b_{r-3}$&$\cdots$&$\binom{g-2}{2}$&$-$\\
%3&$-$&$-$&$-$&$\cdots$&$-$&$1$\\
%\end{tabular}.}

\centerline{\scriptsize
\begin{tabular}{r|cccccc} 
$j\backslash i$&0&1&2&$\cdots$&$g-3$&$g-2$\\ 
\hline 
0&1&$-$&$-$&$\cdots$&$-$&$-$\\ 
1&$-$&$b_1$&$b_2$&$\cdots$&$b_{g-3}$&$-$\\
2&$-$&$b_{g-3}$&$b_{g-4}$&$\cdots$&$b_1$&$-$\\
3&$-$&$-$&$-$&$\cdots$&$-$&$1$\\
\end{tabular}.}

where $b_2 = \binom{g-2}{2}$. It turns out that the other $b_i$ depend on the particular canonical curve,
but since the Hilbert function of the curve is the alternating sum of the Hilbert functions in the resolution,
the differences $b_i- b_{g-i-1}$ are independent of the curve.

 
\section{The Eagon-Northcott Complex}\label{EN section}

The Eagon-Northcott complex is a complex of free modules associated to any matrix over any commutative ring. The most familiar special case is the Koszul complex, which one may think of as the Eagon-Northcott complex of a $1\times n$ matrix, and  even in the general case the Eagon-Northcott complex is in a sense built out of the Koszul complexes. A full treatment of this and a family of related complexes can be found in 
\cite[Appendix A2]{Eisenbud1995}, and, from a more conceptual and general point of view, in \cite{Weyman-book}. 

We have seen in Chapter~\ref{ScrollsChapter} that if $X\subset \PP^r$ is an integral scheme, then any decomposition
of the hyperplane section as the sum of two Cartier divisors
 $H = D+E$ where both $r(D) = 1$ and $r(E) = c\geq 1$ gives a 1-generic $2 \times (c+1)$
 matrix of linear forms whose $2\times 2$ minors generate the ideal of a rational normal scroll of codimension $c$
 containing $X$. In this section we will give an explicit minimal free resolution of such an ideal of minors, and show that 
 this resolution is a termwise a direct summand of the
 minimal free resolution of the ideal of $X$.

\begin{theorem}\label{Eagon-Northcott}\label{E-N}
 Let $S = k[x_0,\dots, x_r]$ be a polynomial ring,  and let 
 $M: F = S^n(-1) \to G= S^2$ be a homomorphism of degree 0. If $I_2(M)$ has codimension $\geq n-1$, then the minimal free resolution of $S/I_2(M)$ has the form:
\begin{align*}
EN(M) := 
S \lTo{\bigwedge^2 M} 
 \bigwedge^2 F&
 \lTo^{\delta_{2}}
 G^*\otimes \bigwedge^3 F  \lTo^{\delta_{3}}
  (\Sym^2G)^*\otimes\bigwedge^4F  \\
 &\lTo^{\delta_{4}}\cdots\lTo^{\delta_{n-1}} 
(\Sym^{n-2}G)^*\otimes\bigwedge^nF 
 \lTo 0.
\end{align*}
\end{theorem}

Note that the degree of the generators of the $i$-term $EN(M)_i$ is $i+1$ for every $i\geq 1$.

Essentially the same construction works over any local ring, with any map $M: F\to G$ of free modules
with $\rank(F) \geq \rank(G) \geq 1$
and yields a minimal resolution whenever the entries of a matrix for $M$ are in the maximal
ideal and the maximal minors of $M$ generate an ideal of grade $\rank(F) - \rank(G)+1$.

\begin{proof} We begin the discussion of $EN(M)$ by defining the maps $\delta_i$ and and proving that the given sequence is indeed a complex---that is, consecutive maps compose to 0. For simplicity of notation, we choose a generator of $\wedge^2 S^2$
 and identify it with $S$, which gives a sense to the map labeled $\bigwedge^2M$.
 
  Although it is not hard to do this directly, the dual maps
 $$
 \partial_i: \Sym^{i-2} G \otimes \bigwedge^i F^* \rTo \Sym^{i-1} G \otimes \bigwedge^{i+1} F^*
 $$
 have a more familar-looking description, so we define these instead. Indeed, the map $M$ corresponds to an
 element $\mu\in G\otimes F^*$. We may think of $ \Sym^{i-2} G \otimes \bigwedge^i  F^*$
 as a (bigraded) component of the exterior algebra over $ \Sym G$ of 
 $$
  \Sym G \otimes \bigwedge_S  F^*= \bigwedge_{ \Sym G} (\Sym G \otimes  F^*).
 $$
We define $\partial_i$ to be  multiplication by $\mu$ in the sense of this exterior algebra. Since $\mu$ has degree 1
in this sense, its square is 0. 

To show that $(\bigwedge^2 M)\circ \delta_2$ is zero, it is simplest to choose a matrix representing $M$.
Direct computation using only the usual expansion of a determinant
along a row shows that, up to sign, the
pure basis vector $e\otimes f_i\wedge f_j\wedge f_k$ of $G^*\otimes \bigwedge^3 F$
maps under the composition $(\bigwedge^2 M)\circ \delta_2$ to the determinant
of the $3\times 3$ matrix obtained from $M$ by repeating the row corresponding to $e$ and
the columns $i,j,k$. This determinant is 0 because it has a repeated row.

We next prove that if a map $M': F\to G$ is surjective, then the complex $EN(M')$
is split exact. Such a map $M'$ induces a splitting $F = G\oplus F'$ in such a way that the map $M': G\oplus F' \to G$ is the projection onto the first factor. 

It will be more convenient to prove the equivalent statement that 
the dual sequence,  
\begin{align*}
EN(M')^* := 
0\rTo S \rTo{\bigwedge^2 M'^*} 
 &\bigwedge^2 F^*
 \rTo^{\partial_{2}}
 G\otimes \bigwedge^3 F^*  
 \rTo^{\partial_{3}}\\
  \Sym^2G\otimes\bigwedge^4F^*  
 &\rTo^{\partial_{4}}\cdots\rTo^{\partial_{n-1}} 
\Sym^{n-2}G\otimes\bigwedge^nF^* 
 \rTo 0.
\end{align*}
is split exact.

We begin by proving split exactness at  
 $\Sym^{i} G \otimes \bigwedge^{i+2}  F^*$ where $i\geq 1$.
The rank of $G$ is 2, so the module
$ \Sym^{i} G \otimes \bigwedge^{i+2}  F^*$
decomposes as
\begin{align*}
&\Sym^{i} G \otimes \bigwedge^2 G^* \otimes \bigwedge^{i} F'^*\oplus \\
&\Sym^{i} G \otimes  G^*\otimes \bigwedge^{i+1} F'^* \oplus \\
&\Sym^{i} G \otimes  \bigwedge^{i+2} F'^* 
\end{align*}
Note that under our hypothesis, the element $\mu' \in G\otimes F^* = G\otimes G^* \oplus G\otimes F'^*$
has the form $(\mu_G, 0)$. Choosing dual bases $g_1,g_2$ of $G$ and $\widehat g_1,\widehat g_2$ of $G^*$,
$\mu_G$ is the element
 $\mu_G = \sum_i g_i\otimes \widehat g_i$
representing the identity map $G \to G$. Thus the complex
$EN(M')^*$ is a direct sum over $i$ of 3-term complexes of the form
%$$
%\Sym^{i+1} G \otimes \bigwedge^2 G^* 
%\lTo^{-\wedge \mu'} 
%\Sym^{i} G \otimes  G^*
%\lTo^{-\wedge \mu'} 
%\Sym^{i-1} G
%$$
$$
\Sym^{i-1} G 
\rTo^{-\wedge \mu'} 
\Sym^{i} G \otimes  G^*
\rTo^{-\wedge \mu'} 
\Sym^{i+1} G \otimes \bigwedge^2 G^* 
$$
tensored with various $\bigwedge^j F'^*$, and it suffices to show that the former are split exact in the middle
when
$i\geq 1$. Now $\Sym G$ may be identified with $R:= S[x,y]$, where $x,y$ are a basis of $S^2$, and
as such the three-term sequence above may be identified with the $(i-1)$-st homogeneous component 
of the Koszul complex of $x,y$ over $R$,
%$$
%R\otimes \wedge^2 G\lTo R\otimes G \lTo R .
%$$
$$
0\to R \rTo R\otimes G^* \rTo R\otimes \wedge^2 G^*.
$$
This is an $R$-free resolution of  $R/(x,y)R = S$ so as sequences
of $S$-modules every homogeneous component is split exact at the term $R_i\otimes G^*$,
as required.

It remains to treat the beginning of the complex $EN(M')^*$,
$$
S \rTo{\bigwedge^2 M'^*} 
 \bigwedge^2 F^*
 \rTo^{-\wedge \mu'}
G\otimes \bigwedge^3 F^*,
$$
which in our case may be written:
%$$
%\wedge^2 F^* = \bigwedge^2 G^* \oplus (G^*\otimes F'^*) \oplus \bigwedge^2 F'*
%$$
%Consider the pair of maps
\begin{align*}
S \rTo{\bigwedge^2 M'^*} 
 &\bigwedge^2 G^* \ \oplus\ (G^*\otimes F'^*)\ \oplus\ \bigwedge^2 F'^*
 \rTo^{-\wedge \mu'} \\
 &G\otimes \bigwedge^2 G^*\otimes F'^*\ \oplus\ (G\otimes G^*\otimes \bigwedge^2 F'^*)\ \oplus\ G\otimes \bigwedge^3 F'^*
\end{align*}
The map $\bigwedge^2 M'$ is the projection to $\bigwedge^2 G$ composed with the chosen isomorphism
$\bigwedge^2 G \cong S$, and is thus a split monomorphism. To complete the argument, we must show that
 the map marked $-\wedge \mu'$ is a monomorphism on $(G^*\otimes F'^*) \oplus \bigwedge^2 F'^*$.
 
 Identifying $\wedge^2 G^*$ with $S$, this map is the direct sum of the two maps
  $$
 (G^* \rTo^{-\wedge \mu_G} G\otimes \bigwedge^2 G^*)  \otimes F'^*
 $$
 and
 $$
(S  \rTo^{\mu_G} G\otimes G^*) \otimes \bigwedge^2 F'^*.
 $$
 The first of these is the tensor product of $F'^*$ with
 something that becomes the identity map after the natural identification of $G^*$ with $G\otimes \wedge^2 G^*$,
 while the second is the tensor product of $\wedge^2 F'^*$ with
  $$
 1 \mapsto \sum_i(g_i\otimes \widehat g_i).
 $$
Since these are split monomorphisms,
the proof of split exactness of $EN(M')^*$ and thus of $EN(M')$ is complete.

To deduce that $EN(M)$ is a resolution when $M$ is 1-generic we use
a result that is proven in a more general form (and with a slightly different statement) 
in~\cite[Theorem 20.9]{Eisenbud1995}. We make the convention
that the codimension of the empty set is infinity.

\begin{theorem}\label{WMACE}
 Let $S = k[x_0,\dots, x_r]$, and
 $$ 
\FF:  F_0\lTo^{\phi_1}F_1 \lTo \cdots \lTo F_{n-1}\lTo^{\phi_n} F_n\lTo 0
 $$
be a finite complex of free $S$-modules. Set
$$
X_i = \{p\in \AA^{n+1} \mid  H_i(\FF \otimes \kappa(p)) \neq 0\}
$$
The complex $\FF$ is \emph{acyclic} (that is, $H_i(\FF) = 0$ for all $i>0$) if and only if
$$
\codim X_i \geq i
$$
for all $i>0$. Moreover, $X_{0}\supseteq X_{1}\supseteq \cdots \supseteq X_{n}$.
\qed
\end{theorem}

For example, Nakayama's Lemma implies that $X_{0}$ is the support of $\coker \phi_{1}$; thus $X_{0}$ is the set defined by the $\rank F_{0}$-sized minors of $\phi_{1}$. Similarly, 
$X_{n}$ is the support of the cokernel of the dual of $\phi_{n}$. 

A familiar case occurs when  $n=1$. In this case the theorem says that a map $F_1\to F_0$ is a monomorphism iff it becomes a monomorphism after tensoring with the field of rational functions $K$, which follows from the flatness of
localization and the fact that $F_1$ is torsion-free, so that
$F_1 \subset F_1 \otimes K$. 

\begin{fact}
Theorem~\ref{WMACE} is true in this form over any Cohen-Macaulay ring; for more general
rings, ``codimension'' must be replaced by ``grade," as in the given reference.
The Theorem can be generalized
to case where the $F_i$ are not free, but are sufficiently ``like'' free modules, too.
\end{fact}

Conclusion of the proof of Theorem~\ref{Eagon-Northcott}.
Let $X_{i}\subset \AA^{r+1}$ be the variety defined from the complex $EN(M)$ as in 
Theorem~\ref{WMACE}. Since $EN(M)$ becomes split exact after inverting any $2\times 2$ minor of $M$,
$X_{i}$ is
contained in the closed set defined by $I_{2}(M)$ for all $i$. Thus if $I_{2}(M)$ has codimension $n-1$,
then $EN(M)$ is acyclic. 
\end {proof}

\begin{corollary}\label{E-N cor}
With notation as in Theorem~\ref{E-N}, if the ideal $I_2(M)$ has codimension $\geq n-1$ then it has
codimension exactly $n-1$, the ring $S/I_2(M)$ is Cohen-Macaulay, and the $\binom{n}{2}$ quadratic forms
that are the $2\times 2$ minors of $M$ are linearly independent over $\CC$.
\end{corollary}

\begin{proof}
From the resolution $EN(M)$ we see that the projective dimension of $S/I_2(M)$ is $n-1$. Since the projective dimension of a module
is at least the codimension of its annihilator, the equality follows, and the Auslander-Buchsbaum formula implies that $S/I_2(M)$ is 
Cohen-Macaulay. The linear independence of the minors of $M$ follows because $EN(M)$ is a resolution and there
$EN(M)_2$ is generated in degree 3, so all the relations on the minors have coefficients of degree 1.
\end{proof}

%\fix{START COMMENTED OUT MATERIAL}
%We will also use a special case of the Auslander-Buchsbaum formula connecting projective dimension and depth:
%
%\begin{theorem}\label{Auslander-Buchsbaum}
%If $R$ is a regular local ring of dimension $d$, and $M$ is a finitely generated $R$-module, then the projective dimension of $M$ is $\leq d$ with equality only if
%$M$ contains a submodule of finite length. 
%\end{theorem}
%
%\begin{corollary}\label{associated primes}
%If $R$ is a regular local ring of dimension $d$, and $M$ is a finitely generated $R$-module, then the codimension of an associated prime of $A$ is at most the projective dimension of $A$. 
%\end{corollary}
%\begin{proof}[Proof of  Corollary~\ref{associated primes}]
% Projective dimension can only decrease under localization, and
% the associated primes $P$ of $A$ are those for which $A_{P}$ contains a submodule
% of finite length.
%\end{proof}
%
%With this and the multi-linear algebra above we can  prove the basic acyclicity result for an Eagon-Northcott complex:
%
%\fix{the Theorem as now stated doesn't need the following. I've copied the short proof
%of acyclicity into the end of the proof above.}
%\begin{proposition}\label{acyclicity}
%Let $S = k[x_0,\dots, x_r]$ be a polynomial ring,  and let $M: F\to G$ be a homomorphism with
% $F = S^n(-1), G= S^2$.
% $$
% S^n \cong F \rTo^M G \cong S^2
% $$
% is a (not necessarily homogeneous) map of free $S$-modules.
% The Eagon-Northcott complex $EN(M)$ is acyclic if and only if $\codim I_2(M) \geq n-1$, in which case the dual complex is also acyclic and
% the associated primes of $I_2(M)$ are all minimal and of codimension $n-1$.
% \end{proposition}
%
%\begin{proof}[Proof of Proposition~\ref{acyclicity}]
%Let $X_{i}\subset \AA^{r+1}$ be the variety defined from the complex $EN(M)$ as in 
%Theorem~\ref{WMACE}. Since $EN(M)$ becomes split exact after inverting any $2\times 2$ minor of $M$
%$X_{i}$ is
%contained in the closed set defined by $I_{2}(M)$, for all $i$. Thus if $I_{2}(M)$ has codimension $n-1$,
%then $EN(M)$ is acyclic. 
%
%In this case the projective dimension
%of $S/I_{2}(M)$ is $n-1$, so all the associated primes of $I_{2}(M)$ have codimension
%exactly $n-1$.
%
%If $EN(M)$ is  acylic then, by Theorem~\ref{WMACE}, the codimension of $X_{n-1}$ is at least $n-1$. Thus to prove that the acyclicity of $EN(M)$ implies  $\codim I_{2}(M) \geq n-1$ (and thus
%$\codim I_{2}(M))  n-1$, it suffices to show that $X_{n-1} = X_{0}$ as algebraic sets.
%
%To see this, note that
%the ideal of $2\times 2$ minors of $M$. By definition, $X_{n-1}$ 
%is the set of points $p$ where $\kappa(p)\otimes \delta_{n-1}$ is not an inclusion, 
%or equivalently, that 
%that 
%$$
%\kappa(p)\otimes F\otimes \Sym^{n-3}G 
%\cong 
%\kappa(p)\otimes \bigwedge^{n-1} F^{*} \otimes  \Sym^{n-3}G 
%\rTo^{\partial_{n-1}}
%\kappa(p)\otimes \bigwedge^{n} F^{*} \otimes  \Sym^{n-2}G
%\cong
%\kappa(p)\otimes \Sym^{n-2}G
%$$
%is not a split surjection, and it is easy to see that the composite map takes
%$a\otimes b$ to $\kappa(p) \otimes M(a)\cdot b$, so the cokernel is the $(n-2)$-nd symmetric power
%of the cokernel of the map $\kappa(p) \otimes M$. Thus $X_{n}$ is equal to the support
%of the cokernel of $M$ itself. 
%
%By Nakayama's Lemma, $X_{0}$ is the support of $M$; furthermore, the localization of $\coker M$ at $p$ is 0 if and only if
%one of the 
%$2\times 2$ minors of $M$ is a unit locally at $p$ so $X_{0}$, so this is defined
%set-theoretically by $I_{2}(M)$.
%
%It now follows from Theorem~\ref{WMACE} that all the $X_{i}$ are equal, so $EN(M)$ is 
%acyclic if and only if $EN(M)^{*}$ is acyclic. 
%
%Since $M$ is 1-generic the entries of of the second row of $M$ are linearly independent, and since the dimension of the span of all the linear forms is at least $n+1$, some element in the first row is outside the span of the the elements in the second. After a permutation of columns we may assume that $l_{1,1}, l_{2,1}, l_{2,2},\dots l_{2,n}$ are linearly independent, and we may take them to be a subset of the variables, say $x_{0},\dots x_{n+1}$
%
%We next show by induction on $n$ that  $I_{2}(M)$ is prime. In the case $n=2$ we have $I_{2}(M) =  (x_{0}x_{2}-x_{1}l_{1,2})$ which obviously does not factor. 
%
%Now suppose that $n>2$, and let $M'$ be the matrix $M$ with the first column omitted. we know by induction that $I_{2}(M')$ is prime of codimension $n-2$. Since $I:=I_{2}(M)$ does not have the maximal ideal as an associated prime, it is saturated. The ideal $I_{2}(M)+x_{0}$ properly contains $I_{2}(M')$ and thus has codimension $\geq n-1$ in $S/x_{0}$, whence we see that every component of $I_{2}(M)$ meets the open set
%$x_{0} = 1$. Restricting to this open set \fix{complete the proof}
%\end{proof}
%
%The first non-trivial example of a finite free resolution is the Koszul complex on 3 variables, which is the minimal $S = k[x,y,z]$-free resolution of the module $S/(x,y,z)$:
%$$
%0\to S(-3) \rTo^{
%\begin{pmatrix}
%x\\y\\z 
%\end{pmatrix}}
% S^3(-2) \rTo^{\begin{pmatrix}
%0&-z&y\\
%z&0&-x\\
%-y&x &0
%\end{pmatrix}}
%S^3(-1) \rTo^{
%\begin{pmatrix}
%x&y&z
%\end{pmatrix}}
%S
%$$
%In fact this is the first example that 
%Hilbert
% presented in his famous paper \cite{Hilbert1890}. 																											
%\fix{END COMMENTED OUT MATERIAL}

\section{How to look at a resolution}
In this section we collect some definitions and results from \cite{Eisenbud1995} that will help to understand the exposition of Green's conjecture, which occupies the last section of this chapter.

If $N$ is a finitely generated graded module over $S = \CC[x_0,\dots, x_r]$, then there is a minimal graded free resolution $\FF$
of $N$ that we can write in the form
$$
0\lTo N \lTo^\epsilon \bigoplus_jS(-j)^{\beta_{0,j}} \lTo^{\phi_1} \cdots \lTo^{\phi_t}\bigoplus_jS(-j)^{\beta_{t,j}}\lTo 0,
$$
where it is understood that each direct sum has only finitely many nonzero terms.
To construct this, suppose that a minimal homogeneous set of generators of $N$
contains $\beta_{1,j}$ generators of degree $j$ for each $j$; this defines a degree 0 map $\epsilon$
from 
$
\oplus S(-j)^{\beta_{0,j}}
$
onto $N$. We proceed similarly with the kernel of $\epsilon$, and continue to construct the whole resolution.
Hilbert's syzygy theorem \cite[***]{Eisenbud1995} implies that the process ends after $t\leq n$ steps with a map $\phi_t$ whose
kernel is 0. The number $t$ is then the projective dimension of $N$. It follows from the Auslander-Buchsbaum
theorem~\cite[***]{Eisenbud1995} that $t \geq \codim \ann_S(N)$, the codimension of the support of $N$.

Since we choose a minimal set of generators at each stage, the matrices of the $\phi_i$ have entries in the maximal
ideal $(x_0,\dots x_r)$, and thus each $\beta_{i+1, j}$ must be strictly greater than some $\beta_{i,j}$. For this reason it
is more convenient to tabulate the numbers so that $\beta_{i,j}$ is in the $i$-th column and $j-i$-th row:

$$
\scriptsize{
\begin{matrix} 
j\backslash i&\vline&0   &  1    & \cdots & n    \cr\hline
\vdots&\vline&\vdots&\vdots & \cdots    &\vdots     \cr 
       0&\vline&\beta_{0,0}&\beta_{1,1}&\cdots&\beta_{n,n}\cr
       1&\vline&\beta_{0,1}&\beta_{1,2}&\cdots&\beta_{n,n+1}\cr
\vdots&\vline&\vdots&\vdots & \cdots    &\vdots     \cr 
\end{matrix}.
}
$$         


%$$
%\vbox{\offinterlineskip %\baselineskip=15pt
%\halign{\strut\hfil# \ \vrule\quad&# \ &# \ &# \ &# \ &# \ &# \ 
%&# \ &# \ &# \ &# \ &# \ 
%\cr
%degree&\cr
%\noalign {\hrule}
%0&1&--&--&--&--&--&--\cr
%1&--&17&46&45&4&--&--\cr
%2&--&--&--&--&25&18&4\cr
%\noalign{\bigskip}
%\omit&\multispan{8}{\bf Conjectural shape of $F_\bullet$}\cr
%\noalign{\smallskip}
%}}
%$$
%
%
%\centerline{\scriptsize
%\begin{tabular}{r|ccc} 
%$j\backslash i$&0&1&2\\ 
%\hline 
%0&1&$-$&$-$\\ 
%1&$-$&3&2\\ 
%\end{tabular}}
%
%
\begin{example}
 For example the Koszul complex that resolves the homogeneous coordinate ring $S/(Q, F_1, F_2)$ of the complete intersection of  2 quadrics and  and a cubic in $\PP^3$ has the form
$$
S \lTo S(-2)\oplus S(-3)^2 \lTo S(-5)^2\oplus S(-6) \lTo S(-8) \lTo 0,
$$
which has betti table:

\centerline{\scriptsize
\begin{tabular}{r|ccccc} 
$j\backslash i$&0&1&2&3\\ 
\hline 
0&1&$-$&$-$&$-$\\ 
1&$-$&1&$-$&$-$\\
2&$-$&2&$-$&$-$\\
3&$-$&$-$&$2$&$-$\\
4&$-$&$-$&$1$&$-$\\
5&$-$&$-$&$-$&$1$\\
\end{tabular}.}
\end{example}

\begin{example}
The betti table of the Eagon-Northcott complex of 
a $2\times n$ matrix of linear forms is:

\centerline{\scriptsize
\begin{tabular}{r|ccccc} 
$j\backslash i$&0&1&2&3&4\\ 
\hline 
0&1&$-$&$-$&$\cdots$&$-$\\ 
1&$-$&$\binom{n}{2}$&$2\binom{n}{3}$&$\cdots$&$(n-1)\binom{n}{n}$\\ 
\end{tabular}}
\end{example}

In general when $X\subset Y\subset \PP^r$, so that $I_X \supset I_Y$, it may be hard to see which syzygies of $X$ come
from syzygies of $Y$. But when the degrees of the syzygies of $Y$ are smaller than those from $X$, the situation is simpler.
Here is the special case we will use:

\begin{proposition}
Suppose that $C\subset \PP^r$ is a nondegenerate curve. If $C\subset X \subset \PP^r$, where $X$ is a rational
normal scroll, then the Eagon-Northcott complex that is  the minimal free resolution of $I_X$ is termwise a direct summand
of the minimal free resolution of $I_C$. Thus the betti table of the resolution of $I_C$ is termwise $\geq$ that of $I_X$.
\end{proposition}

\begin{proof}
Let $EN$ be the minimal resolution of $I_X$, and let $\FF$ be the minimal resolution of $I_C$.
The inclusion $I_X \subset I_C$ induces a map $\phi: EN\to \FF$, unique up to homotopy. Since the minimal generators of $I_X$ are quadratic, and $I_C$ contains no linear forms, $\phi_0: EN_0\to \FF_0$ is a spit monomorphism.

By induction, we may assume that $\phi_{i-1}$ is a split monomorphism. The free module $EN_{i}$ is generated in 
degree $i+1$, while the free module $\FF_i$ is generated in degrees $\geq i+1$. It follows that the relations
represented by $EN_i$, extended by 0, are among the minimal generators of the relations represented by $\FF_i$,
completing the proof.
 \end{proof}
 
 To simplify our language, we will speak of the \emph{betti table of a scheme $X$} rather than the ``betti table of the minimal free resolution of the ideal of $X$.'
\section{Green's Conjecture}

Corollary~\ref{canonical hilbert function} implies that the dimension of the vector space of forms of degree $d$
vanishing on a canonical curve is independent of the curve; for example, for $d=2$ we get
$
\dim ({I_{C}})_{2} = {g-2\choose 2}.
$
The Hilbert function of $I_C$ is determined by the betti table of its resolution, so that the table generally has more information.

 For example
when $C$ is trigonal then, by the geometric Riemann-Roch theorem, $C$ has a 1-dimensional family of trisecant lines; any quadric containing $C$ must contain all these. As we have seen in Chapter~\ref{ScrollsChapter}, these lines sweep
out a 2-dimensional scroll defined by the $2\times g-2$ matrix corresponding to the decompostion of $\sO_C(1)$
into a tensor product of the $g^{1}_{3}$ defined by a line bundle $\sL$, the complementary linear series,
defined by $\omega_{C}\otimes \sL^{-1}$ has $g-2$ sections, and we see from Theorem ****
that the scroll itself lies on the ${g-2\choose 2}$ quadrics defined by the minors of a $2\times g-2$, 1-generic matrix of linear forms. The exactness of the Eagon-Northcott complex associated to this matrix shows that there are no relations of degree 0 on these minors -- that is, they are linearly independent over the ground field. It follows that they generate the vector space of all quadrics containing $C$. This
ideal of minors defines a rational normal scroll of dimension 2.

Furthermore, if $g = 6$ and $C$ is isomorphic to a plane quintic curve, then the canonical series of the plane quintic is $5-3 = 2$ times the hyperplane series, and it follows that the canonical image of $C$ lies on the Veronese surface in $\PP^{5}$. Using Theorem *** again, we see that the Veronese is contained in (in fact, equal to) the intersection of the quadrics defined by the $2\times 2$ minors of a generic symmetric matrix, coming from the 
multiplication map 
$$
H^{0}(\sO_{\PP^{1}}(1))\otimes H^{0}(\sO_{\PP^{1}}(1)) \to H^{0}(\sO_{\PP^{1}}(2)) = H^{0}(\sO_{\PP^{5}}(1))
$$
and there are $6 = {g-2\choose 2}$ independent quadrics in this ideal. Again in this case, they cannot generate the ideal of the curve.

One might fear that this is the beginning of some long series of examples, but in fact it is not: 

\begin{theorem} [Petri]
The ideal of a canonical curve of genus $\geq 5$ is generated by the $\g-2\choose 2$-dimensional space of quadrics it contains unless the curve is either trigonal or isomorphic to a plane quintic; in the latter cases, the ideal of the curve is generated by quadrics and cubics.
\end{theorem}

For a modern treatment of Petri's Theorem in this level of generality see \cite{Schreyer}; for a different treatment see \cite{Arbarello-Sernesi}.

The two exceptions can be described simultaneously by using the Clifford index:

\begin{definition}
 The \emph{Clifford index} Cliff $\sL$ of a line bundle $\sL$ on a curve $C$ is $d-2r$, where $d := \deg \sL$ and $r :=  h^0(\sL)-1$. The Clifford index Cliff $C$ of
 a curve $C$ of genus $\geq 2$ is the minimum of the Clifford indices of special line bundles with at least 2 sections.
\end{definition}

Clifford's Theorem (Corollaries \ref{Clifford bound} and ~\ref{equality in Clifford from Martens}) says that Cliff $C \geq 0$, and that Cliff $C = 0$ if and only if $C$ is hyperelliptic. If $C$ is not hyperelliptic, then it turns out that Cliff $C=1$ if and only if $C$ is either trigonal or isomorphic to a plane quintic. The Clifford index of any smooth curve of genus $g\geq 2$ is $\leq \lceil g/2\rceil+1$, with equality for a general curve, as one sees from the Brill-Noether Theorem~\ref{basic BN}, and for ``most'' curves the line bundle $\sL$ of maximal Clifford index has only 2 sections, though there is an infinite sequence of examples where this
``Clifford dimension'' is greater.

Moving to cubic forms, we see that $\dim ({I_C})_3 = {g+2\choose 3}-(5g-5)$. Comparing this number with the number of (possibly linearly dependent)
cubics obtained by multiplying $g$ linear forms and ${g-2\choose 2}$ quadrics, we see that the ideal of the curve has at least
$$
{g-2\choose 2} - {g+2\choose 3}-(5g-5) 
$$
independent syzygies of total degree 3 (that is, linear syzygies on the quadrics). For example when $g=4$ so that $C\subset \PP^3$ there is one quadric and 5 independent
cubics, at most 4 of which are multiples of the quadric. Since the curve has degree $6 = 2\times 3$, the ideal of the curve must be generated by
the quadric and one cubic. When $g=5$ there are genuinely two possibilities: the three quadrics in the ideal might be a complete intersection
(then they generate the ideal), so the Betti table would be

\

\centerline{\small %\scriptsize
\begin{tabular}{r|ccc} 
$j\backslash i$&0&1&2\\ 
\hline 
0&1&$-$&$-$\\ 
1&$-$&2&$-$\\ 
2&$-$&$-$&$1$\\ 
\end{tabular}}

\noindent or the curve could be trigonal, in which case the 3 quadrics generate the ideal of a surface scroll $F$. In the latter
case, the Eagon-Northcott complex resolves the homogeneous coordinate  ring  $S_F$ of the scroll,
$$
0\to S^2(-3) \to S^3(-2) \to S \to S_F \to 0
$$
which has Betti table

\centerline{\small %\scriptsize
\begin{tabular}{r|ccc} 
$j\backslash i$&0&1&2\\ 
\hline 
0&1&$-$&$-$\\ 
1&$-$&3&$2$\\ 
\end{tabular}}
\noindent and we see that there are 2 linear relations among the quadrics. Thus the minimal generators of $I_C$ must include exactly 2 cubics as well as the 3 quadrics. Since the homogeneous ring of a canonical curve is Gorenstein, its minimal free resolution is symmetric, and this is enough for us to fill in its Betti table:

\centerline{\small %\scriptsize
\begin{tabular}{r|cccc} 
$j\backslash i$&0&1&2&3\\ 
\hline 
0&1&$-$&$-$&$-$\\ 
1&$-$&3&$2$&$-$\\ 
2&$-$&$2$&$3$&$-$\\ 
3&$-$&$-$&$-$&$1$\\ 
\end{tabular}}
\noindent Note that we can ``see'' the scroll reflected in the top two lines of the table.

From the analogue of the Hilbert-Burch Theorem for Gorenstein rings of codimension 3 one can show that the 5 generators can be written as the 
pfaffians of a skew symmetric $5\times 5$ matrix whose entries are of degrees 1 and 2, in the following pattern (we give just the degrees, and put - in the places that are 0):
$$
\begin{pmatrix}
 -&-&1&1&1\\
-&-&1&1&1\\
1&1&-&2&2\\
1&1&2&-&2\\
1&1&2&2&-
\end{pmatrix}
$$
Here the $2\times 2$ minors of the upper $2\times 3$ block of linear forms generate the ideal of the scroll. 

Applying this logic more generally we get the following result about the canonical embedding of curves with low degree maps to $\PP^1$:

\begin{theorem}
 Let $C\subset \PP^{g-1}$ be a reduced, irreducible canonical curve. If $C$ has a line bundle $\sL$ of degree $d \leq g-1$ with $h^0(\sL) = 2$  then
 there is a 1-generic  $2\times (g+1-d)$ matrix of linear forms whose minors define a scroll of codimension $g-d$ containing $C$; and thus an
 Eagon-Northcott complex of length $g-d$ is a subcomplex of the minimal free resolution of $S_C$. In particular, the Betti table of $S_C$ is
 termwise $\geq$ that of the homogeneous coordinate ring of the scroll.
 \end{theorem}
 
 (We have stated this theorem for canonical curves, but in fact the construction applies much more generally to a linearly normal variety $X \subset \PP^n$ of any dimension: if $X$ has a divisor $D$ that moves in a pencil and is contained in a subspace $\PP^k$ with $k \leq n-2$, the planes spanned by the divisors of the pencil $|D|$ sweep out a rational normal scroll.)
 
 Thus the existence of the $g^1_d$ on $C$, together with the symmetry of the resolution of the Gorenstein ring $S_C$,
  implies that the Betti table of $S_C$ has the form
 
 \centerline{\small %\scriptsize
\begin{tabular}{r|cccccccccccc} 
$j\backslash i$&0&1&2&\dots&d-3&d-2&\dots&g-d-1&g-d&\dots&g-3&g-2\\ 
\hline 
0&1&$-$&$-$&$\cdots$&$-$&$-$&$-$&$-$&$-$&$-$&$-$&$-$\\ 
1&$-$&*&*&$\cdots$&*&*&$\cdots$&*&$?$&$\cdots$&?&?\\ 
2&$-$&?&?&$\cdots$&?&*&$\cdots$&*&*&$\cdots$&*&*\\ 
3&$-$&$-$&$-$&$\cdots$&$-$&$-$&$-$&$-$&$-$&$-$&$-$&1
\end{tabular}}
\noindent where we have assumed for illustration that $d-2<g-d-1$. The places marked $-$ are definitely 0 and those marked * are definitely nonzero. The entries of the rows marked 0 and 1 are $\geq$ the corresponding entries of the Betti table of the scroll.

We can summarize this by saying
that if the curve $C$ has a line bundle $\sL$ of degree $d$ with exactly 2 sections, and thus of Clifford index $c = d-2$ the row labeled  2 
in the Betti diagram definitely has $\beta_c, c+2\neq 0$. As with the case of the plane quintics, above, one can
make a similar argument for \emph{any} line bundle of Clifford index $c$. Thus:

\begin{corollary}
 If Cliff $C \leq c$ then $\beta_{c,c-2}(S/I_C)) \neq 0.$
\end{corollary}
 

Starting from examples such as the case of genus 6, Mark Green made a bold conjecture that is still open as of this writing:

\begin{conjecture}[Green's Conjecture]
If $C$ is a smooth canonical curve of genus $g$ and $S/I_C$ is the homogeneous coordinate ring of $C$ in its canonical embedding,
then the Clifford index of $C$ is $\leq c$ if and only if $\beta_{c,c-2}(S/I_C) \neq 0$. 
\end{conjecture}

The conjecture was made for curves over a field of characteristic 0, and is known in many cases, though it is also known to fail in small finite characteristics (see~\cite{Bopp-Schreyer} for an amended conjecture that may hold in all characteristics.)
In \cite{MR1941089} and \cite{MR2157134} the conjecture was proven for generic curves of each Clifford index.  See~\cite{MR4022070} for the currently simplest
proof. As of this writing the conjecture is also is known up to genus 9,  for plane curves, and in a number of other special cases.
See for example \cite{Farkas-progress-on-syzygies} for a survey on this and related topics.

\subsection{Low genus canonical embeddings} 
In his 1983 Brandeis thesis \cite{Schreyer-canonical}, Frank Schreyer analyzed all the possibilities for resolutions of smooth canonical curves up to genus 8. The project was carried further to genus 9 in a Saarbr\"ucken thesis \cite{Sagraloff}  of a student of Schreyer. The results are summarized in the tables below.
\fix{M2 notation is
different; and the hyperelliptic cases are included. Maybe retype in normal notation?}

\includepdf[pages=1, scale=.8]{"SyzygiesGupto8"}
\includegraphics[scale = .35]{"genus 9 Sagraloff"}
%\includepdf[scale=.8]{"SyzygiesGupto8"}
%\section{Low degree}

\section{Exercises}

\begin{exercise}
Prove that if $X\subset \PP^r$ is arithmetically Cohen-Macaulay then the dual of the minimal free resolution of $S/I_X$
is the minimal free resolution of $\omega_X$. Hint:Use Theorem~\ref{WMACE} and the characterization of $\omega_{S/I_X}$
as an Ext module.
\end{exercise}

\begin{exercise}
 Prove Lemma~\ref{depth lemma} for modules over a regular local ring.  Hint: use the characterization of depth
 via projective dimension.
\end{exercise}

\begin{exercise}
In dealing with arithmetically Gorenstein schemes, we used the fact that if $\omega_{S/I}$ is an invertible
sheaf (over $\Spec(S/I)$) then it is isomorphic to $S/I(a)$ for some $a$. Why is this true?
\end{exercise}

\begin{exercise}
Find a degree 6 embedding of a curve of genus 3 that is not arithmetically Cohen-Macaulay, and another that is.
Hint: Show that the $3\times 3$ minors of a general $4\times 3$matrix of linear forms defines a Cohen-Macaulay curve
of genus 3. Show that a curve of type $(2,4)$ on a smooth quadric in $\PP^3$ is not arithmetically Cohen-Macaulay.
\end{exercise}

\begin{exercise}
Referring to the betti table of a canonical curve just before Section~\ref{EN section}, give a formula
for the differences $b_i- b_{g-i-1}$ that depends only on $i$ and $g$.
\end{exercise}

\begin{exercise}
 Show that if $I \subset S := \CC[x_0,\dots, x_r]$ is a codimension 2 ideal, then $S/I$ is Cohen-Macaulay if and only
 if the minimal $S$-free resolution of $S/I$ has the form
 $$
 0\rTo S^{n-1} \to S^n \to S
 $$
 for some $n$. Show that $S/I$ is Gorenstein if and only if $I$ is a complete intersection. Hint: for the first part, tensor with
 the field of rational functions. 
\end{exercise}

\begin{exercise}
Which sets of 4 distinct points in $\PP^2$ are arithmetically Gorenstein? Which sets of 5 points? Which sets of 6 points?
\end{exercise}

\begin{exercise}
 Give an example of a set of points in $\PP^3$ that is arithmetically Gorenstein but not a complete intersection. Hint: take the 
hyperplane section of a trigonal canonical curve of genus 5.
\end{exercise}

\begin{exercise}
 Let $Q\subset \PP^3$ be the quadric defined by the determinant of the $2\times 2$ matrix 
 $$
q := F \rTo^{\begin{pmatrix}
 x_0&x_1\\
 x_2&x_3
\end{pmatrix}}
G
$$
where $F = S^2(-1)$ and $G = S^2$.
\begin{enumerate}

\item Show that the sheafification of the graded module $M := \coker q$ is $\sO_Q(1,0)$ and the sheafification
of $\coker transpose q$ is $\sO_Q(0,1)$ by computing the vanishing locus
of the two sections corresponding to the generators of the module.

\item Show that the sheafification of $\Sym^a(M)$ is $\sO_Q(a,0)$. Conclude that
 if $a\leq b$ then the relative ideal sheaf $\sI_{C/Q} = \sO(-a,-b)$ of a curve $C$ of type $(a,b)$
is the sheafification of the module $Sym^{b-a}(M)(-b)$.

\item Let $S = \CC[x_0,\dots, x_3]$. Show that the minimal $S$-free resolution of $\Sym^a(M)$ 
has the form 
\begin{small}
$$
0 \rTo \wedge^2 F \otimes \Sym^{a-2} G(-2)\rTo F\otimes \Sym^{a-1} G(-1)\rTo \Sym^a G%\rTo \Sym^a(M)\rTo 0
$$
\end{small}

\item Show that if $C\subset \PP^3$ is a curve of type $(a, b)$ with $a\leq b$ then
 there is a free resolution of a module
whose sheafification is $\sI_{C/\PP^3}$ that is a mapping cone of the map of complexes: 
\begin{tiny}
$$
\begin{diagram}[size=2em]
                                                       0&\rTo&0&\rTo& \wedge^2 F &\rTo^{\wedge^2 q}&\wedge^2 G\\
 &&\uTo&&\uTo&&\uTo\\
 0 &\rTo& \wedge^2 F \otimes \Sym^{b-a-2} G(-b-2) &\rTo &F\otimes \Sym^{b-a-1} G(-b-1) &\rTo& \Sym^{b-a} G(-b)
\end{diagram}
$$
\end{tiny}

\item Conclude that the deficiency module of a curve of type $(a, b)$ with $a\leq b$ is the cokernel of a map
$$
\wedge^2 F^* \otimes \Sym^{b-a-2} (G^*)(b+2) \lTo F^*\otimes \Sym^{b-a-1} G^*(b+1)
$$
and thus, after choosing a basis of $F = S^2$, may be identified as the sheafification of the cokernel of
$$
\Sym^{b-a-2} (G^*)(b+2) \lTo F\otimes \Sym^{b-a-1} G^*(b+1)
$$
where the map is the action of $F$ on $\wedge G^*$ via the map $q: F\to G$.
\end{enumerate}
 Hint: Show that the sheafification of the graded module $\coker q$ is $\sO_Q(1,0)$ by computing the vanishing locus
of the two sections corresponding to the generators of the module. Imitate the proof of Theorem~\ref{E-N} to prove
the exactness of the given resolution of $\Sym^a(M)$. See also \cite[Appendix ****]{Eisenbud1995}. \fix{citation}.
\end{exercise}
\input{footer}