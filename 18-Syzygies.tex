\input{header}

\chapter{Free resolutions and canonical curves}
\label{SyzygiesChapter}

\def\length{\mathrm{ length}}

In Chapter~\ref{LinkageChapter} we related the resolutions of curves
in $\PP^3$ to their Hartshorne--Rao modules. The simplest case was
that in which the Hartshorne--Rao module vanishes, that is, the case
of arithmetically Cohen--Macaulay curves. The first 3 sections of this
chapter constitue a quick review of some necessary parts of
 homological commutative algebra; see~\cite[Part III]{Eisenbud1995}
 for a more complete exposition. In particular, we
  explain how the condition that a curve
in $\PP^r$ is arithmetically Cohen--Macaulay manifests itself in the
free resolution of the homogeneous ideal of the curve. We then
introduce the Eagon--Northcott complexes, and explain their relation to
the free resolutions of canonical curves. We close the chapter with an
explanation of Green's conjecture, which proposes a way in which the
intrinsic geometry of a curve may be connected to the shape of its
minimal free resolution of its ideal in the canonical embedding.


\section{Free resolutions}


The basic results described here depend on 
\blue{Nakayama's lemma} and hold 
\index{Nakayama's lemma}%
 in two parallel contexts:
\blue{modules over a local ring,}
\index{module!over a local ring}%
\index{local ring!module over}%
and
\blue{graded modules over a polynomial ring}
\index{graded module}%
\index{polynomial ring}%
whose variables have positive degree. 
We will work both with local rings and with
polynomial rings whose variables have degree 1,
as appropriate, and leave the translations to the reader.
%%These are similar
%The similarity is essentially because
%%because
%\blue{Nakayama's lemma}
%\index{Nakayama's lemma}%
%works in both cases. We will work in either context, as convenient,
%%with local rings or with polynomial rings over a field with variables in
%%degree 1 as convenient, 



Let $M$ be a finitely generated graded module over $S \colonequals
\CC[x_0, \dots x_r]$. A \emph{free resolution} of $M$ is an
\index{exact complex}%
exact complex
\index{free resolution|defi}%
of graded free modules, with maps of degree~0:
$$
\let\quad\enspace
(\FF, \phi):\quad 0\leftarrow M \luto{\ \epsilon}
\tsty\bigoplus_jS(-j)^{@\beta_{0,j}}
\leftarrow\cdots
\luto{\ \phi_t}\bigoplus_jS(-j)^{@\beta_{t,j}}\leftarrow 0.
$$
Here $S(-j)$ denotes the graded free module of rank 1 with generator in
degree~$j$.
The map to $M$ is not considered part of the free resolution. The
resolution is called \emph{minimal} if a minimal set of generators of $F_i
\index{minimal free resolution}%
\index{free resolution!minimal}%
\colonequals  \bigoplus_jS(-j)^{\beta_{t,j}}$ maps to a minimal set of
generators of the kernel of the following map,
or equivalently (by Nakayama's lemma) the maps in $\FF\otimes_S \CC$
\index{Nakayama's lemma}%
are all 0. The numbers $\beta_{i,j}$ are called the \blue{\emph{Betti numbers}}
\index{Betti numbers}%
of $M$.

The most basic examples of minimal free resolutions are the Koszul complexes
\index{Koszul complex}%
\index{historic context}%
(first defined, despite the name, in \cite{Cayley}, and found
\index{Cayley, David}%
\index{Hilbert, David}%
as examples,
in \cite{Hilbert1890}), which resolve $S/I$ when
$I = (f_1,\dots, f_t)$
is a complete intersection, that is, $f_1,\dots, f_t$ is a regular
sequence.  For $t = 2,3$, if $\deg f_i = d_i$, these have the form
$$
\xymatrix@C=30pt{
S
&S(-d_1)\oplus S(-d_2) \ar[l]_{\null\hskip-10pt(f_1\ f_2)\hskip10pt\null}
&S(-d_1-d_2)\ar[l]_{\hskip5pt\tbinom{-f_2}{f_1}}
&0\ar[l]
}
$$
and
$$
\xymatrix@C=40pt{
S
&F_1 \ar[l]_{\hskip-3pt(f_1\ f_2\ f_3)}
&F_2 \ar[l]_{\Biggl(
\begin{smallmatrix}
0&f_3&\!-f_2\!\\
\!-f_3&0&f_1\!\\
f_2&\!-f_1&0\!
\end{smallmatrix}\Biggr)}
&F_3 \ar[l]_{\Biggl(
\begin{smallmatrix}
f_1\\f_2\\f_3
\end{smallmatrix}\Biggr)}
&0\ar[l]
}
$$
where
$$
\tsty
F_1 = \bigoplus\limits_{j=1}^3S(-d_j),\quad
F_2=
\bigoplus\limits_{1\leq i <j\leq 3} S(-d_i-d_j), \quad
F_3 =
S(-d_1-d_2-d_3).
$$
Minimal free resolutions of a given module $M$ are all isomorphic, and thus provide
interesting invariants of $M$.

To construct the minimal free resolution of a finitely generated graded module $M$, suppose that a minimal homogeneous set of generators
of $M$
contains $\beta_{0,j}$ generators of degree $j$ for each $j$; the choice of generators
defines a degree 0 map $\epsilon$
from
$
\oplus_jS(-j)^{\beta_{0,j}}
$
onto $M$. We proceed to do the same with the kernel of $\epsilon$ to construct $\phi_{1}$, and continue similarly to construct $\phi_{2}\dots$.
Hilbert's basis theorem
\index{Hilbert's basis theorem}%
and
syzygy theorem
\index{Hilbert's syzygy theorem}%
together imply that 
that for some $t\leq r+1$ we will find that $\phi_t$ has
kernel equal to 0; that is,
every finitely
generated $S$-module has a finite free resolution
of length $t\leq r+1$
\cite[Corollary 19.7]{Eisenbud1995}.
The minimal such $t$ is called the \emph{projective dimension} of $M$,
written $\pd\ M$.
\index{projective dimension}%
\index{pd@$\pd$}%
Computing $\Ext(M,-)$ from such a resolution, Nakayama's lemma implies that,
$$
t = \max\{s \mid \Ext_S^s(M,k) \neq 0 \}.
$$
It follows from the Auslander--Buchsbaum
\index{Auslander--Buchsbaum theorem}%
theorem \cite[Theorem 19.9]{Eisenbud1995} that $t \geq \codim \ann_S(M)$,
the codimension of the support of $M$.

\begin{fact}
 Fundamental
results of Auslander, Buchsbaum and Serre say that a local ring $R$
\index{Serre, Jean-Pierre}%
\index{Buchsbaum, David A.}%
\index{Auslander, Maurice}%
is \emph{regular}\emdash that is, the
\index{regular!ring|defi}%
\blue{Krull dimension}
\index{Krull dimension}%
of $R$ is equal to the
minimal number
of generators of is maximal ideal \emdash if and only~if the minimal free resolution
of the residue field is finite, in which case
the minimal free resolution of every module is finite.
\end{fact}
 



\section{Classification of 1-generic \texorpdfstring{$2\times f$}{2 x f}
matrices}\label{Kronecker}

We can use the uniqueness of minimal free resolutions to give a simple
proof of Kronecker's classification of 1-generic $2\times f$
\index{Kronecker, Leopold}%
matrices, which was announced in Chapter~\ref{ScrollsChapter}.

\begin{theorem}\label{matrix pencils}
Every
$1$-generic $2 \times f$ matrix of linear forms can be transformed by
row and column operations and a linear change
of variables to one of the type shown in
Corollary~\ref{equations of scrolls}, and thus the minors of any 1-generic
matrix define a scroll.
\unif
\end{theorem}

To prove this result we first reinterpret the 1-generic condition:
We have observed that an
$a\times b$ matrix of linear forms in $c$ variables is the same as a
$\CC$-linear map of vector spaces
$A \otimes B \to C$, where $A, B$ and $C$ have dimensions $a,b$ and $c$
respectively. Such a map
can be viewed in several ways, for example as a map $C^{*} \otimes B\to
A^{*}$\emdash in other words, a $c\times b$ matrix in $a$ variables\emdash
or equivalently an $a$-dimensional family of $c\times b$ matrices (and
similarly for other permutations of $A,B,C$).
This bit of trivial formalism pays off in the following observation:

\begin{proposition}\label{reinterpretation of 1-generic}
An  $a\times b$ matrix of linear forms in $c$ variables $M$ corresponding
to $A\otimes B \to C$ is 1-generic if and only~if the $c \times b$ matrix
$N$ of linear forms in $a$ variables corresponding to $C^{*}\otimes B
\to A$ has constant rank $b$; that is,
for any point $x$ in $\PP^{a-1}$, the rank of $N$ evaluated at $x$ is $b$.
\unif
\end{proposition}

\begin{proof}
The $b$ columns of $N$ correspond to the $b$ columns of $M$, while the
rows of $N$ are indexed
by the $c$ variables in $M$ and the variables in $N$ are indexed by the
$a$ rows of $M$. Thus the
evaluation of $N$ at a point $x$ corresponds to a generalized row of $M$;
and the image of $N(x)$
is the span of the variables in that generalized row. The matrix $M$
is 1-generic if the dimension
of that span is $b$ for every generalized row.
\end{proof}

Thus the classification of 1-generic $2\times f$ matrices of linear
forms in $r+1$ variables of Theorem~\ref{matrix pencils} is equivalent
to the classification
of \emph{matrix pencils} of constant maximal rank\emdash that is $f \times
\index{matrix pencil}%
(r+1)$ matrices of linear forms over $\PP^{1}$ with constant rank $f$.
Such ``matrix pencils'' were first classified by Kronecker; see
\index{Kronecker, Leopold}%
\cite[Chapter 12]{Gantmacher} for an exposition, and
\cite{Eisenbud-Harris-Centennial} for a geometric approach.

\begin{proof}[Proof of Theorem~\ref{matrix pencils}]
Let $M$ be a 1-generic $2\times b$ matrix in $r+1$ variables. We may
assume that the span of the entries
is equal to the vector space of linear forms in $\PP^{r}$. The associated
$(r+1)\times b$ matrix
$$
N: \sO_{\PP^{1}}(-1)^{b} \to \sO_{\PP^{1}}^{r+1}
$$
of linear forms over $\PP^{1}$ has constant rank $b$.
For every point $x\in \PP^{1}$ the scalar matrix $N(x)$ is a split
inclusion, and thus
$\coker N$ is a vector bundle on $\PP^{1}$ that is generated by its global sections, and thus, necessarily of the form $\sum_{i
=1}^{d}\sO_{\PP^{1}}(a_{i})$ for some
integers $a_{i}\geq 0$.

Regarding $N$ as a matrix over the homogeneous coordinate ring $S\colonequals \CC[s,t]$ of $\PP^{1}$, and taking global sections of all
non-negative twists, we get
$$
\tsty
0\to S(-1)^{b} \ruto {N}
S^{r+1}  \to \bigoplus\limits_{i = 1}^{d}\,\bigl(
\bigoplus\limits_{j=0}^{\infty}H^{0}(\sO_{\PP^{1}}(j+a_{i}))\bigr)\to 0,
$$
which is a minimal free resolution because $H^{1}(\sO_{\PP^{1}}(j)) = 0$ for all $j\geq -1$.
It follows that the map $N$ is the direct
sum of the minimal $S$-free resolutions
of the modules
$$
\tsty
\bigoplus\limits_{j=0}^{\infty}H^{0}(\sO_{\PP^{1}}(j+a_{i})) = (s,t)^{a_{i}},
$$
where we take the generators to be in degree 0.
As we will explain in Example~\ref{res of max ideal power}, the minimal
presentation of $(s,t)^{a_{i}}$ is the $(a_{i}+1)\times a_{i}$ matrix
$$
\phi_a=
\left(\,
\begin{matrix}
s&0&0&\dots&0\\
\!-t&s&0&\dots&0\\
0&\!-t&s&\dots&0\\
0&0&\!-t&\dots&0\\
\vdots&\vdots&\rlap{\,$\ddots$}&&\vdots\\
0&0&0&\ddots&s\\
0&0&0&\cdots&\!-t\\
\end{matrix}
\right)
.
\label{phia} % for page number
$$
 Thus, by a change of bases and variables, the matrix $N$ can be
transformed into the direct sum of such matrices.
The direct sum decomposition of $N$ corresponds to a block decomposition
of $M$. Translating this
back to a $2\times (r+d-1)$ matrix $M$, we have
transformed $M$ into a matrix of
the desired form.
\end{proof}

\subsection*{How to look at a resolution}
As is apparent even in the example $t=3$ above, free resolutions can be
bulky to describe; the
\emph{Betti table} is a compact representation of the numerical
\index{Betti table}%
information in the resolution.
Suppose that
$F$ is a minimal free resolution of a graded module $M$ as illustrated in the
beginning of the previous section. Since we choose a minimal set of
generators at each stage, the matrices of the $\phi_i$ have entries in
the maximal
ideal $(x_0,\dots,x_r)$, and thus each $\beta_{i+1, j}$ must be strictly
greater than some $\beta_{i,j}$. For this reason it
is convenient to tabulate the Betti numbers so that $\beta_{i,j}$ is in the
$i$-th column and $(j-i)$-th row:
$$
\small
\begin{tabular}{r|@{\hskip17pt}ccccc}
\downstrut
$j$&\llap{$i={}$}0&1&$\cdots$&$n$\\
\hline\upstrut
$\vdots$&$\vdots$&$\vdots $&$     $&$\vdots     $\cr
0&$\beta_{0,0}$&$\beta_{1,1}$&$\cdots$&$\beta_{n,n}$\cr
1&$\beta_{0,1}$&$\beta_{1,2}$&$\cdots$&$\beta_{n,n+1}$\cr
$\vdots$&$\vdots$&$\vdots$ &    &$\vdots$     \cr
\end{tabular}
$$

\begin{example}
The Koszul complex that resolves the homogeneous coordinate ring $S/(Q,
\index{Koszul complex}%
F_1, F_2)$ of the complete intersection of  2 quadrics and a cubic in
$\PP^3$ has the form
$$
\let\lTo\leftarrow
S \lTo S(-2)\oplus S(-3)^2 \lTo S(-5)^2\oplus S(-6) \lTo S(-8) \lTo 0,
$$
which has Betti table
\index{Betti table}%
$$
\small
\begin{tabular}{r|@{\hskip20pt}ccccc}
\downstrut
$j$&\llap{$i={}$}0&1&2&3\\
\hline\upstrut
0&1&--&--&--\\
1&--&1&--&--\\
2&--&2&--&--\\
3&--&--&$2$&--\\
4&--&--&$1$&--\\
5&--&--&--&$1$\\
\end{tabular}
$$
where 
a dash
represents 0.  
\end{example}

To simplify our language, we will speak of the \emph{Betti table of a
scheme $X$} rather than the ``Betti table of the minimal free resolution
of the ideal of $X$''.

\subsection*{When is a finite free complex a resolution?}
How does a free resolution over $S \colonequals  \CC[x_0, \dots x_r]$
``know'' to end no later than the $(r+1)$-st step?
The main theorem of \cite{WMACE}, describes a sense in which the maps in the resolution
change as the resolution continues.See \cite[Theorem 20.9]{Eisenbud1995}
for further exposition.

A central role in the theorem is played by the ideals of minors of the
differentials in the complex: If $\phi: F\to G$ is a map of finitely
generated free $R$-modules with cokernel $M$, then
\blue{$I_t(\phi)$} 
\index{I@$I_t$}
denotes the ideal generated by all the $t\times t$ minors
\marginpar{removed equals sign in parenthesis}
(subdeterminants) of a matrix representing $\phi$; this is independent
of the choice of bases used to represent $\phi$ as a matrix.
The ideal $I_{\rank G -j}(\phi)$ depends only on $M$; it called the
$j$-th \emph{Fitting ideal} of $\coker \phi$  and
\index{ideal!Fitting}%
\index{Fitting ideal}%
\index{Fitting, Hans, 1906--1938}
usually written $\Fitt_{j} M$. Some basic properties of these ideals are
given in Exercise~\ref{Fitt}, where the reader may show that the
annihilator of $M$ has the
same radical as $\Fitt_{0} M$. Actually more is true:

\begin{fact}
If $F\to G \to M \to 0$ is an exact sequence of finitely generated
$R$-modules, then
$$
(\ann_{R}(\coker \phi))^{\rank G}\subset \Fitt_{0}\phi \subset
\ann_{R}(\coker \phi).
$$
For this and other such inequalities, see \cite{MR476736}.
\end{fact}

The \emph{rank} of $\phi: F\to G$ is the largest size of a nonvanishing
\index{rank!of map of modules|defi}%
minor of a matrix for $\phi$,
or equivalently the largest $k$ such that the
\blue{exterior power}
\index{exterior power}%
$$\mwedge^{k}\phi : \mwedge^{k}@F \to \mwedge^{k}@G$$
is nonzero. If $r\colonequals  \rank \phi = \rank G$, then the ideal
$I(\phi): = I_{\rank \phi}(\phi)$ plays a special role: the cokernel
of $\phi$
is projective (= locally free) if and only~if $I(\phi) = R$. If $I(\phi)$
contains a
\blue{nonzerodivisor,}
\index{nonzerodivisor}%
then
the construction localizes, and we see that $I(\phi)$ defines the locus
$P\in \Spec R$ where $(\coker \phi)_{P}$
is not free.

The \emph{grade} of an ideal $I$ is defined to be the length of a maximal regular
\index{grade!of ideal}%
sequence
contained $I$, or $\infty$ if $I=R$. If $R$ is a
\blue{Cohen--Macaulay ring}
\index{Cohen--Macaulay ring}%
such as
%say
$\CC[x_{0},\dots, x_{r}]$ then the grade
of any proper ideal is equal to its codimension, so grade becomes a
geometric notion.
Readers less familiar with commutative algebra will lose little if they
stick with the case when $R$ is
regular, or even the case when $R$ is $\CC[x_{0},\dots, x_{r}]$. This
suffices, for example, for the applications
\index{Eagon--Northcott complex}%
of the Eagon--Northcott complex described below.

\begin{theorem}\label{WMACE}  (\cite{WMACE}) 

Let $R$ be a Noetherian ring and let
$$
\FF:\quad
F_0\luto{\phi_1}F_1 \leftarrow \cdots \leftarrow F_{n-1}\luto{\phi_n}
F_n\leftarrow 0
$$
be a finite complex of free $S$-modules. Set $r_i \colonequals  \rank
\phi_i$.
The complex $@\FF$ is
\blue{\emph{acyclic}}
\index{acyclic|defi}%
(that is, $H_i(\FF) = 0$ for all $i>0$) if and only~if,
for all $i$,
$$
\rank F_i = r_i+r_{i+1}\quad\hbox{ and }\quad
\grade @I_{r_{i}}(\phi_i) \geq i.
\eqno\qed
$$
\end{theorem}


A familiar case occurs when  $r=1$ and $R$ is a domain. In this case the
theorem says that a map $F_1\to F_0$ is a monomorphism if and only~if
it becomes a monomorphism after tensoring with the field of rational
functions $K$, which follows from the flatness of
localization and the fact that $F_1$ is torsion-free, so that
$F_1 \subset F_1 \otimes K$. More generally, 
if $R$ is Noetherian, then a map of finitely generated
free modules
$\phi:F\to G$
is injective
if and only~if $I_{\rank F}(\phi)$ contains a nonzerodivisor.


To see the relevance of the grade hypothesis to the conclusion, suppose
for a moment that $R$ is
a regular local ring of dimension $r$, and suppose that the complex
$\FF$ is acyclic. The hypothesis $\grade I(\phi_{d+1}) \geq d+1$ can
only be satisfied if $I(\phi_{d+1}) = R$ (so that its grade is $\infty$
by convention). This  is equivalent to the cokernel of $\phi_{d+1}$
being free. Thus the theorem ``explains'' why a minimal free resolution
has length $\leq r+1$.

\section{Depth and the Cohen--Macaulay property}

If $M$ is a graded  $\CC[x_0, \dots x_r]$-module then an \emph{$M$-regular
sequence} is a sequence of homogeneous polynomials
$f_1,\dots,f_m \in (x_0,\dots, x_r)$ such that $f_1$ is a nonzerodivisor
on $M$, $f_2$ is a nonzerodivisor on $M/(f_1M)$, and so on.
The maximal length of such a sequence is called the \emph{depth} of $M$,
\index{depth!of a module|defi}%
or more properly the depth of $(x_0,\dots, x_r)$ on $M$.
The lengths of
all maximal $M$-regular sequences
\index{maximal $M$-regular sequence}%
are
the same:

\begin{theorem}[Auslander--Buchsbaum]\label{Auslander--Buchsbaum}
If $M$ is a finitely generated graded module
over $S \colonequals  \CC[x_0, \dots x_r]$,
then the length of every $M$-regular sequence is
$$m = r+1 - \pd\  M,$$
and $m$ is the smallest integer $m$ such that
$\Ext_S^m(S/(x_0, \dots x_r), M) \neq 0$.
\index{Ext@$Ext_S^m$}%
\qed
\end{theorem}

The depth of a module $M$ is bounded above by $\dim M$, the Krull
dimension. The reason is that if the dimension of $M$
is $d$, and $f_1 \in (x_0, \dots x_r) $ is a nonzerodivisor on $M$,
then $\dim M/(f_1)M= \dim M-1$. Thus by induction, if
$f_1,\dots, f_d$ is $M$-regular then $M/(f_1, \dots, f_d)M$ has
dimension 0, which is equivalent to its being Artinian. Thus any
$ f_{d+1} \in(x_0, \dots x_r) $ acts as a nilpotent endomorphism of
$M/(f_1, \dots, f_d)M$.

It follows from these facts that the depth of an $S$-module $M$ is equal
to the dimension of $M$ if and only~if the projective dimension
of $M$ is equal to the codimension of $M$; in this case we say that $M$
is a
\index{Cohen--Macaulay module}%
\emph{Cohen--Macaulay module}.

As we showed in Chapter~\ref{linkageChapter}, a curve $C\subset \PP^3$
is linked to a complete intersection
if and only~if
$H^1_*(\sI_C) \colonequals  \bigoplus_{m\in \ZZ} H^1(\sI_C(m)) = 0$,
in which case we said that $C$ was
\blue{arithmetically Cohen--Macaulay.}
\index{ACM}%
This is equivalent to the condition that the homogeneous coordinate
ring $R_{C}$ of $C$ is Cohen-Macaulay.
In general, we say that a projective scheme $X\subset \PP^{r}$
is arithmetically Cohen-Macaulay if its homogeneous coordinate ring $R_{X}$
is Cohen-Macaulay, and this is true
if and only~if $\pd R_X = \codim X$. 

\subsection*{The Gorenstein property}
An important homological condition on a scheme $X$ is the condition that
$\omega_X$ is an invertible sheaf; when this holds, we say that $X$
is \emph{quasi-Gorenstein}. When, in addition, $X$ is Cohen--Macaulay
\index{quasi-Gorenstein}%
\index{Gorenstein!module|defi}%
we say that $X$ is \emph{Gorenstein}. As with the Cohen--Macaulay property,
the Gorenstein property is interpreted locally
on a scheme. 
Any scheme that is locally a
complete intersection, such as any smooth scheme, is Gorenstein. Since
the restriction
of $\sO_{\PP^r}(1)$ to a subvariety is always invertible, saying that
a scheme $X$ is canonically embedded implies that
$X$ is at least quasi-Gorenstein. We say that a projective scheme $X$ is
\emph{arithmetically Gorenstein}
\index{arithmetically Gorenstein}%
if its homogeneous coordinate ring is Gorenstein, and it follows that
$\omega_{S/I} \cong S/I(a)$ for some integer $a = a(X)$.

In Chapter~\ref{LinkageChapter},  we expressed $\omega_X$
for a subscheme $X\subset Y$ of a scheme $Y$ as
$\Ext^{\codim X}_{\sO_Y}(\sO_X, \omega_Y)$. Slightly extending this idea,
if $C\subset \PP^r$ is a curve
with homogeneous coordinate ring $R_{C}$,
we define $\omega_{R_C}$ to be $\Ext^{r-1}_S(R_C, S(-r-1))$, where $S$
is the homogeneous coordinate ring of $\PP^r` `$.
Since $\omega_{\PP^r} = \sO_{\PP^r}(-r-1)$, the sheafification of this
module is  $\omega_C$.

If $C$ is arithmetically Cohen--Macaulay, so that
$\pd (C) = \codim C = r-1$,  then by
computing $\Ext^{r-1}_S(R_C, S(-r-1))$ from the 
\blue{minimal free resolution}
\index{minimal free resolution}%
$$
(\FF, \phi):\quad 
0\leftarrow R_C \leftarrow S\luto{\phi_1} F_1 \leftarrow \cdots \leftarrow 
F_{r-2} \luto{\!\phi_{r-1}}\hskip-15pt-\ F_r\leftarrow 0
$$
we see that $\omega_{R_C} = \coker \phi_{r-1}^*$. 
\index{omega@$\omega_{R_C}$}%
Theorem~\ref{WMACE}
implies that the complex $(\FF^*, \phi^*)$ which is the dual
of the  resolution $(\FF, \phi)$ is again acyclic, so it is the minimal
free resolution of $\omega_{R_C}$. Thus
$\omega_{R_C}$ is a Cohen--Macaulay module. Just as the Cohen--Macaulay
property of
$R_C$ implies that $R_C = H^0_*(\sO_C)$, it follows that $\omega_{R_C}
= H^0_*(\omega_C)$.

If, in addition, $C$ is a canonical curve, so that $\omega_C = \sO_C(1)$,
then we derive:
$$
\omega_{R_C} = \coker(\phi_{r-2}^*)(-r-1) = R_C(1)
$$
so $\coker \phi_{r-2}^* = R_C(r)$. Thus $(\FF^*(-r), \phi^*)$ is a
minimal free resolution of $R_C$, and is therefore isomorphic to
$(\FF^*, \phi^*)$; that is, $(\FF, \phi)$ is self-dual.
We have seen an example already
in the Koszul complex (a complete intersection is arithmetically Gorenstein).

Taking into account that in a resolution $(\FF, \phi)$ each summand
$S(-j)$ of $F_{i+1}$ can only
map to summands $S(-l)$ of $F_i$ with $\ell < j$, and similarly for the
dual, we see that the
Betti table of the minimal free resolution of a canonical curve of genus
\index{Betti table}%
$g\geq 4$ must have the form
$$
\small
\begin{tabular}{r|@{\hskip20pt}cccccc}
\downstrut
$j$&\llap{$i={}$}0&1&2&$\cdots$&$g{-}3$&$g{-}2$\\
\hline\upstrut
0&1&--&--&$\cdots$&--&--\\
1&--&$b_1$&$b_2$&$\cdots$&$b_{g-3}$&--\\
2&--&$b_{g-3}$&$b_{g-4}$&$\cdots$&$b_1$&--\\
3&--&--&--&$\cdots$&--&$1$\\
\end{tabular}
$$
It turns out that the $b_i$ depend
on the particular canonical curve,
but since the Hilbert function of the curve is the alternating sum of
\index{Hilbert function}%
the Hilbert functions in the resolution,
the differences $b_i- b_{g-i-1}$ are independent of the curve.
This together with the self-duality implies that the whole Betti table
of a canonical curve
is determined by the numbers $b_{1}, \dots, b_{g-2}$.

The geometry of linear series on $C$ influences these Betti numbers.
If $|\sL|$ is a $g^{r}_{d}$ on $C$ then the multiplication map
$H^0(\sL) \otimes H^0(\sL^{-1}\otimes \omega_C) \to H^0(\omega_C) =
H^0(\sO_C(1))$
corresponds to a $2\times h^{1}(\sL)$ matrix of linear forms on $\PP^{g-1}$
as in Chapter~\ref{ScrollsChapter}.
and
the ideal $I$ generated by the minors of this matrix is contained in the homogeneous
ideal of $C$. It turns out that the whole resolution of $I$ is a subcomplex of
the resolution of $R_{C}$. Resolutions of such determinantal ideals can be
described explicitly, and we turn now to this description.

\section{The Eagon--Northcott complex}\label{EN section}

The Eagon--Northcott complex $EN(\phi)$ \cite{MR0142592} associated with
\index{Eagon--Northcott complex}%
\index{EN@$EN(\phi)$}%
a matrix, or a map of free modules $\phi: F\to G$,
is a generalization of the Koszul complex, which is the case $\rank G =
\index{Koszul complex}%
1$. Like the Koszul complex,
it is tautological: its existence depends only on the properties
of commutative rings; and like the Koszul complex it is exact or
not depending on a property of the matrix $\phi$ related to regular
sequences. It is part of a family of complexes described in
\cite[Appendix A2]{Eisenbud1995}, and, from a more conceptual and general
point of view, in \cite{Weyman-book}.

We
are interested in $EN(\phi)$ because its shape
influences the shape of the free resolutions of canonical curves in an
interesting way,
leading to Green's conjecture. This conjecture, one of the central open
problems in the theory of algebraic curves, is described in the last
section of this chapter. We will also use the the Eagon--Northcott
complex, in a special case, to give a proof of the classification of
matrix pencils and an analysis of the ideals of ACM curves in $\PP^{3}$.

To prepare for the description of the Eagon--Northcott complex we revisit
the Koszul complex, which is equal
to the Eagon--Northcott complex in the case $\rank G = 1$, and then
consider the case $\rank F = \rank G + 1$.

\smallbreak
\noindent
\underline{The case $\rank G = 1$}
\smallbreak

Let $\phi:F = R^{f}\to R$ be a homomorphism from
a free module to a ring $R$. We will
analyze the Koszul complex $K(\phi)$.

We may write
$K(\phi) = EN(\phi)$ in the form
$$
S \luto{\,\delta_{1}} \!F \luto{\,\delta_{2}}\!\! \mwedge^{2}F
\luto{\,\delta_{3}} \!\cdots \luto{\,\delta_{f}}\!\!\mwedge^{f}F\leftarrow 0, 
$$
where $\delta_{1} = \phi$.

To define the complex, we must construct the differentials $\delta_{i}$
and prove that
$\delta_{i}\delta_{i+1} = 0$. Since the modules are free, it suffices
to do this for the
dual maps
$$
\partial_{i}: \mwedge^{i}F^{*} \to \mwedge^{i+1}F^{*},
$$
and it turns out that this is in a sense even more natural.

It is convenient to think of $R$ as an $S \colonequals  \ZZ[x_{1},\dots,
x_{f}]$-algebra by the map sending
$x_{i}$ to $\phi_{i}$; we  define the Koszul complex of $\phi$ over $R$
\index{Koszul complex}%
by tensoring
the Koszul complex of $(x_{1}, \dots, x_{f})$ with $R$.

Thus for the definition we take the map $\phi$ to be
$$
\phi: S^{f}\ruuuto {\ \
(x_{1} \,\dots \, x_{f})
} \hskip0.7em S.
$$

First of all, the map $\partial_{i}$ (like the map $\delta_{i}$) is
\emph{linear}: the image of a basis vector of $\mwedge^{i}@F^{*} $ is a
sum of variables times basis vectors
of $\mwedge^{i+1}@F^{*}$. We may write $S$ as $\Sym(V)$, where $V$ is the
free $\ZZ$-module generated by $x_{1}, \dots, x_{f}$, and we may think
of $F$ as the module $V\otimes S$ with the map
$\phi$ sending $V\otimes 1\subset F$ by the identity to $V = S_{1}\subset S$
\emdash the 
\blue{\emph{tautological map.}}
\index{tautological map}%
Let $t\in V\otimes V^{*}\subset S\otimes \mwedge \,V^{*}$ be the \blue{\emph{trace element}}
\index{trace}%
represented in terms of any basis $\{x_{i}\}$ of $V$
and dual basis $\{\hat e_{i}\}$ of $V^{*}$ as $t = \sum x_{i}\otimes
\hat e_{i}$. Because $\mwedge \,V^{*}$ is
an anti-commutative algebra, we have $t^{2} = 0$.

We define the map
$$
\partial_{i}: S\otimes_{\CC} \mwedge^{i}@V^{*} = \mwedge^{i}@F^{*}  \to
\mwedge^{i+1}@F^{*} = S\otimes_{\CC} \mwedge^{i+1}@V^{*}
$$
to be multiplication by $t$, and thus $\partial_{i+1}\partial_{i}$ is
multiplication by $t^{2} = 0$.

Having defined the complex $K(\phi) = EN(\phi)$ in the case $\rank G =
1$, we next ask what conditions on $\phi$
make it acyclic (that is, a free resolution of $\coker \delta_{1}$).

\begin{theorem}\label{rankG1}
Suppose that $R$ is a ring and $\phi: F\to R$ is a map from a free
$R$-module of rank $f$.
The complex $K(\phi)$ is acyclic if and only~if the ideal $I \colonequals
I_{1}(\phi)$ has grade $\geq f$.
\index{grade}%
\end{theorem}

\begin{proof}
Theorem~\ref{WMACE} 
directly 
implies that if $K(\phi)$ is acyclic then
$\rank \delta_{f} = 1$ and $\grade I(\delta_{f}) \geq f$. Since
$I(\delta_{f}) = I$, this proves one implication.

Now assume that $\grade I \geq f$. We first prove that
$K(\phi)$ is 
\blue{split exact}
\index{split exact}%
when $I = R$; that is, 
$\mwedge^{i}@F = \ker \delta_{i} \oplus \im \delta_{i}$ 
for every $i$, or equivalently
$\mwedge^{i}@F^{*} = \im \partial_{i}\oplus\coker \partial_{i}$ for
every $i$. The condition $I=R$ implies that $\delta_{1}$ is s split
surjection,
or equivalently that
$\partial_{1}$ is a split injection. In this case we may write $F^{*}
= R\oplus F'^{*}$ in such a way that $\partial_{1}$ is the injection
into the first summand, and we may
choose a basis $\{\hat e_{i}\}$ of $F^{*}$ so that the last $f-1$ basis
elements are a basis for $F'^{*}$.
Specializing the sequence $x_{1},x_{2}, \dots, x_{f}$ to the sequence $1,
0,\dots, 0$, the differential of $K(\phi)^{*}$
becomes the multiplication by  $1\otimes e_{1}$.

The module
$\mwedge^{i}@F^{*}$  decomposes as
$$
\mwedge^{i}@F^{*} = \bigl(Re_{1}\otimes_{R} \mwedge^{i-1}@F^{*} \bigr)
\oplus \mwedge^{i}@F'^{*}.
$$
Because $e_{1}\wedge e_{1} = 0$ the differential $\partial_{i}: \wedge^{i}F^{*} \to \wedge^{i+1}F^{*}$ has the form
$$
\begin{diagram}
&&Re_{1}\otimes \wedge^{i-1}F'^{*} &\rTo^{0}&  Re_{1}\otimes \wedge^{i}F'^{*}\\
\wedge^{i}F^{*}&=& \bigoplus&\ruTo^{\cong}&\bigoplus&=&\wedge^{i+1}F^{*}\\
 &&\wedge^{i}F'^{*}&\rTo^{0}& \wedge^{i+1}F'^{*}
\end{diagram}.
$$
Thus we see that $K(\phi)$ is split exact when $\phi$ is a split
surjection.

We now assume only that $\grade I\geq f$. From what we just proved we
see that if we localize
$R$ by inverting any element of $I$ the complex $K(\phi)$ becomes split
exact. Since $\grade f\geq 1$,
we can find such  a nonzerodivisor in $I$, and inverting it does not
change the ranks of the
maps $\phi_{i}$. Because ranks of free modules are additive in direct
sums, it is obvious that
in the split exact case the condition on the ranks of the $\phi_{i}$
is satisfied; more precisely,
$\rank(\delta_{i}) = \tbinom{i-1}{f-1}$. We also see that after inverting
a nonzerodivisor in $I(\delta_{1})$ we have $I(\delta_{i}) = R$;
equivalently,
$$
\tsty % tame the square root
I  \subset \sqrt {I(\delta_{i})}.
$$
(In fact $I(\delta_{i}) = I^{\sbinom{i-1}{f-1}}$, though this requires a
separate argument.) Thus if $\grade I = f$ then  $\grade I(\delta_{i})
\geq i$ for all $i$, so $K(\phi)$ is acyclic.
\end{proof}

\smallbreak
\noindent
\underline{Case $\rank F=\rank G + 1$}
\smallbreak

We set $g=\rank G$ and $f = \rank F = g+1$. In this case the
Eagon--Northcott complex has the form
$$
EN(\phi):\quad 0\to G^{*}\otimes \mwedge^{f}F \ruto {\delta_{2}}
\mwedge^{f-1}F \ruto {\delta_{1}} \mwedge^g@G.
$$
Here $\delta_{1} = \mwedge^{g}\phi$, so that the entries of a matrix for
$\delta_{1}$ are the $g\times g$ minors of
$\phi$.

We choose an identification $\mwedge^{f}F = S$, called an
\index{orientation}%
\blue{\emph{orientation}}
of $F$, and get a perfect pairing
$$
\mwedge^{g}F \times F \to \mwedge^{f}F = S
$$
so that we may identify
$\mwedge^{g}@F$ with $F^{*}$. With this identification, we define
$\delta_{2}$ as
$$
\delta_{2}:  G^{*}\ruto {\phi^{*}}  F^{*} = \mwedge^{g}@F.
$$
We also choose an orientation $\mwedge^{g}@G = S$, in terms of which the
image of $\delta_{1}$ is
the ideal generated by the $(f{-}1)\times (f{-}1)$  minors of $\phi$.

We first claim that $EN(\phi)$ is a complex; that is,
$\delta_{1}\delta_{2} = 0$.  As with the Koszul complex,
\index{Koszul complex}%
it is convenient to dualize and consider the maps
$$
EN(\phi)^{*}:\quad 0\to \mwedge^{g} @
G \to \mwedge^{g}@F^{*} = F\ruto{\,\phi} G
.
$$
The fact that this composition is 0 is often taught as 
\blue{Cramer's rule}
\index{Cramer's rule}%
for solving a system of
homogeneous equations represented by a $g\times (g+1)$ matrix of rank $g$.
The solutions\emdash that is, the elements of $\ker \phi$\emdash are
multiples of the column
$\Delta_{1}, \dots, \Delta_{g}$ where the $\Delta_{j}$ is 
$(-1)^{j}$
times the determinant
of the matrix obtained from $\phi$ by leaving out the $j$-th column. This
works
because the composition of the two maps is a column matrix whose $i$-th
entry is the
expansion of the $(g+1)\times (g+1)$ determinant of the matrix obtained
from $\phi$ by
repeating the $i$-th row.

\begin{theorem}\label{EN grade 2}
Suppose that $R$ is a ring and $\phi: F\to G$ is a map of  free
$R$-modules,
where $G$ has rank $g$ and $F$ has rank $f = g+1$.
The complex $EN(\phi)$ is acyclic if and only~if the ideal $I
\colonequals  I_{g}(\phi)$ has grade $\geq 2$.
\end{theorem}

\begin{example}
We have seen that the ideal of the twisted cubic is generated by the
$2\times 2$ minors of the matrix
$$
\phi \colonequals
\begin{pmatrix}
x_{0}&x_{1}&x_{2}\\
x_{1}&x_{2}&x_{3}
\end{pmatrix}
$$
and it follows that the free resolution of its homogeneous coordinate
ring is the Eagon--Northcott complex
$$
0\to S^{2}(-3)
\hskip1pt
-\hskip-4pt-\hskip-4pt\ruuto {\hskip-13pt\vbox{\hbox{$\biggl(\!\begin{smallmatrix}
x_{0}&x_{1}\\
x_{1}&x_{2}\\
x_{2}&x_{3}
\end{smallmatrix}\!\biggr)$}\vskip0pt}}
S^{3}(-2)
\ruuto {\phi\wedge\phi}
S
\marginparhere{used $\phi\wedge\phi$ instead of big wedge, ok?}
$$
\end{example}

\begin{example}\label{res of max ideal power}
In Section~\ref{Kronecker} we asserted that  the $(a+1)\times a$  matrix
$\phi_{a}$ given on page~\pageref{phia}
is the minimal presentation of the ideal $(s^{a},s^{a-1}t, \dots, t^{a})
\subset R\colonequals \CC[s,t]$. It is not hard to check this
directly, but in any case it's easy to see that its $a\times a$ minors of
$\phi_{a}$ generate this ideal, which has grade 2, so the Eagon--Northcott
resolution $EN(\phi)$
has the form
$$
R\luto{\ \ssty\bigwedge^a\!\phi_a}\hskip-23pt-\hskip-4pt-
\hskip2pt R^{a+1} 
\luto{@\phi_{a}} R^{a} \leftarrow 0
,
$$
verifying the assertion.
\end{example}

\begin{proof}
Once having shown that $EN(\phi)$ is a complex, as we did above,  the
proof of the equivalence in the theorem follows the same pattern as the
proof given above for the Koszul complex.
\index{Koszul complex}%

If $EN(\phi)$ is acyclic, then by Theorem~\ref{WMACE} the $g\times g$
minors of $\phi = \delta_{2}$ must
have grade $\geq 2$.
For the converse, suppose first that
$I_{g}(\phi)$ is the
unit ideal. We may split  $F$ as  $S\oplus G$ with $\Delta_{1} = 1$
and $\Delta_{j} = 0$
for $j>1$, and then $EN(\phi)^{*}$ has the form
$$
\begin{diagram}
&&0&\rTo&  G&\rTo^{0}&S\\
0&\rTo& \bigoplus&\ruTo^{\cong}&\bigoplus&\ruTo^{\cong}&\bigoplus\\
 &&G&\rTo^{0}&S&\rTo&0
\end{diagram}.
$$
%
%\marginpar{\vskip10pt transposition ok?}
%\vspace*{-5pt}
%$$
%\def\messy{\vbox{\hbox{$\ssty\smash{\cong}$}\vskip-3pt}}
%\xymatrix@C=3pt@R=13pt{&0\ar[d]\\
%G\ar[d]_0\ar[drr]^{\messy}  & \oplus&0\ar[d]^0\\
%S\ar[d]\ar[drr]^{\messy} &\oplus&G\ar[d]^0\\
%0&\oplus& S}
%$$
Thus 
$EN(\phi)$ is split exact in this case.

We now apply Theorem~\ref{WMACE}: From what we just proved we see that
if we localize
$S$ by inverting any element of $I$ then the complex $EN(\phi)$ becomes
split exact,
and therefore, before localizing,
$\rank(\delta_{1}) = 1$ and $\rank \delta_{2} = g$ . In this
case it follows from the definition that $I_{1}(\delta_{1}) = I_{g}(\phi)
= I_{g}(\delta_{2})$
so if $I_{g}(\phi)$ has grade 2 then both conditions of
Theorem~\ref{WMACE} are
satisfied.
\end{proof}

\subsection*{The Hilbert--\kern-0.5pt Burch theorem}

\hskip-3pt
In a regular local ring any ideal of 
\null codimension\kern1.5pt 1 is 
principal (divisors are all Cartier). What about
ideals of codimension 2? The answer is the content of the
\emph{Hilbert--Burch} theorem, proven
in 1890 by David Hilbert in the case of homogeneous ideals in
\index{Hilbert, David}%
\index{Burch Lindsay}%
$\CC[x_{0},x_{1}]$ and in general by
Lindsay Burch \citeyear{MR212008}. We can deduce it as an application of
the Eagon--Northcott complex
in the case $f =g+1$:

\begin{corollary}[Hilbert--Burch theorem]\label{Hilbert--Burch}
Suppose that $R$ is a local ring. Any ideal $I\subset R$ of projective
\index{Hilbert--Burch theorem}%
dimension \1 and grade \2 has the form
$aI'$ where $I'$ is an ideal of grade 2 generated by the $g\times g$
minors
of a $g \times (g+1)$ matrix and $a$ is a nonzerodivisor of $R$; and
conversely any ideal of this form
has projective dimension \1.

In particular, if $C\subset \PP^{3}$ is an 
\blue{ACM curve}
\index{ACM!curve}%
whose homogeneous
ideal $I$ is generated by
$f$ elements, then $I$ is minimally generated by the $(f-1)\times (f-1)$
minors of the 
\blue{syzygy matrix}
\index{syzygy matrix}%
 of $I$.
\unif
\end{corollary}

\begin{proof}
If $C\subset \PP^{3}$ is ACM, then the projective dimension of the
homogeneous coordinate ring $R_{C}$
is 2  by the 
\blue{Auslander--Buchsbaum theorem,}
\index{Auslander--Buchsbaum theorem}%
and thus the ideal of $C$
has projective dimension 1.

Now suppose that $I\subset R$ is an ideal of projective dimension 1 in
any local ring, and suppose
that $I$ is generated by $f$ elements, so that we have a surjection
$F\colonequals  R^{f} \to I$.  The module $R/I$
has free resolution of the form
$$
\FF:\quad R\luto{\ \alpha} R{f}\luto{\ \phi} G\leftarrow 0,
$$
where $I = I_{1}(\alpha)$, so by Theorem~\ref{WMACE} the free module $G$
has rank $g = f-1$, the $g\times g$
minors of $\phi$ generate an ideal $I'$ of grade $\geq 2$, and the ideal
$I$ has grade 
at least
$1$. Theorem~\ref{WMACE} implies
that both the Eagon--Northcott complex $EN(\phi)$
and its dual are acyclic.

The dual of the complex $\FF$ will not be acyclic unless 
$\grade I = 2$, but there is at least a comparison map
\vspace*{-5pt}
$$
\xymatrix@C=30pt{
\llap{$\FF^{*}:\quad$}
G^{*}\ar[d]^=&F^*\ar[l]_{\phi^*}\ar[d]^=&R\ar[l]_{\alpha^*}\ar[d]_a &0\ar[l]\\
\llap{$EN(\phi)^{*}:\quad$}
G^{*}&F^*\ar[l]_{\phi^*}&R\ar[l]_{\ssty\bigwedge^g``\phi^{*}}&0\ar[l] \\
}
$$
It follows that $I = aI'$, and since $I$ has grade 1, $a$ must be a
nonzerodivisor.

Conversely, if $\phi: R^{f}\to R^{g}$ is a map with $f = g+1$ and $\grade
I_{g}(\phi)\geq 2$,
then the acyclicity of $EN(\phi)$ shows that $I_{g}(\phi)$ has projective
dimension 1; and if
$a$ is a 
\blue{nonzerodivisor,}
\index{nonzerodivisor}%
then $I \colonequals  aI_{g}(\phi) \cong
I_{g}(\phi)$ as $R$-modules, so
$I$ has projective dimension 1 as well.
\unif
\end{proof}

This argument applies, for example,
to the case of a 
\blue{nonhyperelliptic curve} 
\index{nonhyperelliptic curve!of genus 3 and degree 6}%
of genus 3 and
degree 6 in $\PP^{3}$, discussed on page~\pageref{other genus 3}.

\subsection*{The general case of the Eagon--Northcott complex}

With these two special cases in mind, we are ready for the general
case. 

\begin{definition}
If $\phi: F\to G$ is a map of free $S$-modules with 
$f\colonequals \rank F\geq  g\colonequals  \rank G$, then the
\emph{Eagon--Northcott complex of $\phi$}
\index{Eagon--Northcott complex}%
is the complex of free $S$-modules
\begin{multline*}
EN(\phi): \quad
S \luto{\delta_1\colonequals \ssty\bigwedge^g``\phi}\hskip-30pt-\hskip-4pt-\hskip-4pt-
\hskip3pt
\mwedge^g @F
\luto{@\delta_{2}}
G^*\otimes \mwedge^{g+1}@ F  \luto{@\delta_{3}}
(\Sym^2G)^*\otimes\mwedge^{g+2}@F  \\
\luto{\delta_{4}}\cdots\luto{\delta_{f-g+1}}\hskip-23pt-\hskip-4pt-
(\Sym^{f-g}G)^*\otimes\mwedge^fF
\leftarrow 0.
\end{multline*}
It has the following properties:
\begin{enumerate}

\item After identifying $\mwedge^{g}G$ with $S$, the map $\delta_{1}$
is identified with $\mwedge^{g}\phi$.

\item It is convenient to give a formula for $\partial_{i} =
\delta_{i}^{*}$ by taking advantage of the
algebra structures of $\Sym(G)$ and $\mwedge F^{*}$. To do this, choose
dual bases $\{e_{i}\}$ and $\{\hat e_{i}\}$ for $F$ and $F^{*}$. In
these terms
$$
\delta_{i}^{*} = \partial_{i}:
\Sym^{i-2}G \otimes \mwedge^{g+i-2}@F^{*} \to
\Sym^{i-1}G \otimes \mwedge^{g+i-1}@F^{*}
$$
is multiplication by the element
$\sum_{i = 1}^{f} \phi(e_{i}) \otimes \hat e_{i}$.
\end{enumerate}

To show that $\delta_{1}\delta_{2} = 0$ is almost the same as in the
case $f = g+1$ because
a basis element
$$
b: = e_{i_{1}}\wedge \cdots \wedge e_{i_{g+1}} \in \mwedge^{g+1}@F
$$
can be thought of as coming from a rank $g+1$ summand of $F$, and the
value of $\delta_{2}\delta_{1}b$
is the same as it would be if $F$ were replaced by this summand. Thus
from the case $f=g+1$ we see
that $\delta_{1}\delta_{2}b = 0$, and thus $\delta_{2}\delta_{1} = 0$.

On the other hand, for $i\geq 1$ the map $\partial_{i+1}\partial_{i}$
is multiplication by
$$
\biggl(@\sum_{i = 1}^{f} \phi(e_{i}) \otimes \hat e_{i}\biggr)^{\!2},
$$
which we may think of as the square of an element of degree 1 in the
exterior algebra
of the free $\Sym(G)$-module $\mwedge@(\Sym(G)\otimes F^{*}) = \Sym(G)
\otimes \mwedge \,F^{*}$, and hence this square is 0.
Thus the given maps do define a complex.
\end{definition}

\begin{theorem}\label{ENgeneral}
Suppose that $R$ is a ring and $\phi: F\to G$ is a map of  free
$R$-modules,
where $G$ has rank $g$ and $F$ has rank $f \geq g$.
The complex $EN(\phi)$ is acyclic if and only~if the ideal 
\index{acyclic!EN complex}%
$I \colonequals  I_{g}(\phi)$ has 
\index{grade}%
grade $\geq f-g+1$.
\end{theorem}

\begin{example}
If $\phi$ is a matrix of linear forms, then the first map of $EN(\phi)$
is represented by the
row of $g\times g$ minors of $\phi$, which are forms of degree $g$,
but all the rest of the maps
are represented by matrices of linear forms. Thus, for example, the
Betti table of the Eagon--Northcott complex of
\index{Betti table}%
a $2\times f$ matrix of linear forms is
$$
\small
\begin{tabular}{r|@{\hskip20pt}ccccc}
\downstrut
$j$&\llap{$i={}$}0&1&2&$\cdots$&$f{-}1$\\
\hline
\upstrut
0&1&--&--&$\cdots$&--\\
1&--&$\tbinom{f}{2}$&$2\tbinom{f}{3}$&$\cdots$&$(f-1)\tbinom{f}{f}$\\
\end{tabular}
$$
\end{example}

\begin{proof}
The dual of the last differential of $EN(\phi)$ is
$$
\partial_{f-g+1}: \Sym^{f-g-1}G \otimes \mwedge^{f-1}@F^{*} \to
\Sym^{f-g}(G) \otimes \mwedge^{f}F^{*}.
$$
With our usual identifications $\mwedge^{f}F^{*} = S$ and
$\mwedge^{f-1}F^{*} = F$ this becomes the map
$$
\Sym^{f-g-1}G \otimes F \ruto {\!1\cdot \phi} \Sym^{f-g}G
,
$$
whose cokernel is $\Sym^{f-g}(\coker \phi)$ by the right exactness of
the symmetric algebra functor \cite[Proposition A2.2]{Eisenbud1995}. 
Because $\Sym$ is a multilinear functor,
the
support of $\Sym^{f-g}(\coker \phi)$ is contained in the support
of $\coker \phi$, but in fact they are equal,
because
if a localization of
$\coker \phi$, over a local ring $S_{P}$,
is nonzero, then by
\blue{Nakayama's lemma}
it surjects onto $S_{P}/P_{P} = \kappa(P)$, and again
\index{Nakayama's lemma}%
by the right exactness
of the symmetric algebra functor $\Sym^{f-g}(\coker \phi)_{P}$ surjects
onto
$\Sym^{f-g}(\kappa(P)) = \kappa(P)$.

By Theorem~\ref{WMACE} we see from this that if $EN(\phi)$ is acyclic,
then the support of $\coker \phi$
has grade $\geq f-g+1$. This support is defined by the radical of
$I_{g}(\phi)$, so $\codim I_{g}(\phi)\geq f-g+1$ as required.

Conversely, to show that $EN(\phi)$ is acyclic under the given hypothesis
we first treat the case
$I_{g}(\phi) = S$, and prove that $EN(\phi)^{*}$ is split exact. This
is the most complicated part of the proof,
but it is purely formal:

As before we may split $F$ and
assume that $F = G\oplus F'$, the map $\phi$ being the projection onto
the first summand.
Assuming that the first summand corresponds to the basis elements $e_{1},
\dots, e_{g}\in G\subset F$
the dual differential $\partial_{i}$ takes the form $\sum_{i=1}^{g}
e_{i}\otimes \hat e_{i}$.

The map
$$
\mwedge^{g}G\lTo^{\delta_{1}}
\mwedge^{g}F =\tsty\bigoplus\limits_{j=0}^{g}\mwedge^{j}G\otimes \mwedge^{g-j}F'
$$
is the projection onto the $j=g$ summand, so we must show that the rest
of $EN(\phi)$ is a split surjection
ending with the terms of the source of $\delta_{1}$ other than
$\mwedge^{g}G$.

Once again, it will be convenient to treat the dual complex. Using
the splitting
we may write the terms of the dual as
$$
EN_{i}(\phi)^{*} = \Sym^{i-2}G \otimes  \mwedge^{g+i-2}F^{*}  =
\tsty\bigoplus\limits_{j} \Sym^{i-2}G \otimes  \mwedge^{j}G^{*} \otimes
\mwedge^{g+i-2-j}F'^{*}
$$
for $i\geq 1$.
The map $\partial_{i}= \delta_{i}^{*}$ is a direct sum from $j=0$ to $g$
of the maps
$$
\Sym^{i-2}G \otimes  \mwedge^{j}G^{*} \otimes \mwedge^{g+i-2-j}F'^{*}
\to
\Sym^{i-1}G \otimes  \mwedge^{j+1}G^{*} \otimes \mwedge^{g+i-2-j}F'^{*}
$$
that are all equal to  multiplication by $\sum_{k=1}^{g} e_{k}\otimes
\hat e_{k}\otimes 1$
where the last tensor factor is the identity map of
$\mwedge^{g+i-2-j}F'^{*}$.

Thus it suffices to show that the complexes
\begin{equation}
\Sym^{0}G\otimes\mwedge^{j}G^{*}\to\cdots \to \Sym^{i}G
\otimes  \mwedge^{i+j}G^{*}  \to \cdots
\tag{$*_j$}
\label{starj}
\end{equation}
are split exact for $0\leq j<g$.

Let $R = \Sym G = S[e_{1}, \dots, e_{g}]$. The Koszul complex over $R$
\index{Koszul complex}%
of the sequence $\phi_{i} = e_{i}$
may be written as
$$
R\otimes_{S}\mwedge G^* =   \Sym(G)\otimes_{S} \mwedge G^* = 
\tsty\bigoplus\limits_{p,q}\Sym^{p}G\otimes\mwedge^{q}@G^*
$$
and we 
proved
in Theorem~\ref{rankG1} that it is a free resolution
of $R/(e_1, \dots, e_g)=S$, which appears
as $\Sym^{0}G\otimes \mwedge^{0}@G^*` `$. This complex
is
$(\Sym G)\otimes\mwedge G^{*}$
which is the direct sum of the the complexes 
\eqref{starj} above. It follows
that these finite
complexes have no homology at all, and since the modules are free over
$S$, they are split exact.

Since the
complex $EN(\phi)$ is split exact after inverting any element of $I =
(\phi_{1}, \dots, \phi_{f})$, it follows that
the rank condition of Theorem~\ref{WMACE} is satisfied, and
$$
\tsty % tame the square root
I \subset \sqrt{I_{\rank\smash{\delta_i}}(\delta_i)}.
$$
Since the length of $EN(\phi)$  is $f-g+1$, Theorem~\ref{WMACE}
implies that
it is acyclic when $\grade I\geq f-g+1$, completing the proof.
\end{proof}

\begin{corollary}\label{E-N cor}
With notation as in Theorem~\ref{ENgeneral}, if the ideal $I_g(\phi)$
has codimension $\geq f-g+1$ then it has
codimension exactly $f-g+1$, the ring $S/I_g(M)$ is Cohen--Macaulay,
and the $\tbinom{f}{g}$ forms
that are the $g\times g$ minors of a matrix for $\phi$ are linearly
independent over $\CC$.
\end{corollary}

\begin{proof}
From the resolution $EN(M)$ we see that the projective dimension of
$S/I_g(M)$ is $f-g+1$. Since the projective dimension of a module
is at least the codimension of its annihilator, the equality follows,
and the Auslander--Buchsbaum formula implies that $S/I_2(M)$ is
\index{Auslander--Buchsbaum formula}%
\index{Cohen--Macaulay}%
Cohen--Macaulay. The linear independence of the minors of $M$ follows
because $EN(M)$ is a resolution and there
$EN(M)_2$ is generated in degree 3, so all the relations on the minors
have coefficients of degree 1.
\end{proof}

In general when $X\subset Y\subset \PP^r` `$, so that $I_X \supset I_Y$,
it may be hard to see which syzygies of $X$ come
from syzygies of $Y$. But when the degrees of the syzygies of $Y$ are
smaller than those from $X$, the situation is simpler.
Here is the special case we will use:

\begin{proposition}
Let $C\subset \PP^r$ be
a nondegenerate curve. If $C\subset X
\subset \PP^r` `$, where $X$ is a rational
\index{rational normal scroll}%
normal scroll, then the Eagon--Northcott complex that is  the minimal
free resolution of $I_X$ is termwise a direct summand
of the minimal free resolution of $I_C$. Thus each numbers in the Betti table of the
\index{Betti table}%
resolution of $I_C$ is  
no less than
the corresponding number in the Betti table of the resoluiont of $I_X$.
\unif
\end{proposition}

\begin{proof}
Let $EN$ be the minimal resolution of $I_X$, and let $\FF$ be the minimal
resolution of $I_C$.
The inclusion $I_X \subset I_C$ induces a map $\phi: EN\to \FF$, unique
up to homotopy. Since the minimal generators of $I_X$ are quadratic,
and $I_C$ contains no linear forms, $\phi_0: EN_0\to \FF_0$ is a split
monomorphism.

By induction, we may assume that $\phi_{i-1}$ is a split monomorphism. The
free module $EN_{i}$ is generated in
degree $i+1$, while the free module $\FF_i$ is generated in degrees
$\geq i+1$. It follows that the relations
represented by $EN_i$, extended by 0, are among the minimal generators
of the relations represented by $\FF_i$,
completing the proof.
\end{proof}

\section{Green's Conjecture}

Corollary~\ref{canonical hilbert function} implies that the dimension
\index{Green's Conjecture}%
of the vector space of forms of degree $d$
vanishing on a canonical curve is independent of the curve; for example,
for $d=2$ we get
$
\dim ({I_{C}})_{2} = \tbinom{g-2}{2}.
$
The Hilbert function of $I_C$ is determined by the Betti table of its
\index{Betti table}%
resolution, so that the table generally has more information.

For example,
when $C$ is trigonal then by the 
\index{Riemann--Roch theorem!geometric}%
\blue{geometric Riemann--Roch theorem,} 
$C$ has
\index{trigonal}%
a 1-dimensional family of 
\blue{trisecant lines,}
\index{trisecant}%
and any quadric containing $C$
must contain all these. As we have seen in Chapter~\ref{ScrollsChapter},
these lines sweep
out the 2-dimensional rational normal scroll defined by the 1-generic
$2\times (g-2)$ matrix $M$ corresponding to the decomposition of
$\sO_C(1)$
into a tensor product of the  line bundle $\sL$ associated to the
$g^{1}_{3}$ and the residual line bundle $\omega_{C}\otimes \sL^{-1}$. The
latter has $g-2$ sections, and we see from Section 16.2
that the scroll itself lies on the $\tbinom{g-2}{2}$ quadrics defined
by the minors of $M$. The exactness of the Eagon--Northcott complex
associated to this matrix shows that there are no relations of degree
0 on these minors\emdash that is, they are linearly independent over
the ground field. It follows that they generate the vector space of all
quadrics containing $C$.

Furthermore, if $g = 6$ and $C$ is isomorphic to a 
\blue{plane quintic} 
\index{quintic curve!plane}%
curve,
then the canonical series of the plane quintic is $5-3 = 2$ times the
hyperplane series, and it follows that the canonical image of $C$ lies on
the Veronese surface in $\PP^{5}$. Thus the Veronese surface is contained
in (in fact, equal to) the intersection of the quadrics defined by the
$2\times 2$ minors of a generic symmetric matrix, coming from the
multiplication map
$$
H^{0}(\sO_{\PP^{2}}(1))\otimes H^{0}(\sO_{\PP^{2}}(1)) \to
H^{0}(\sO_{\PP^{2}}(2)) = H^{0}(\sO_{\PP^{5}}(1))
$$
and there are $6 = \tbinom{g-2}{ 2}$ independent quadrics in this
ideal. Again in this case, they cannot generate the ideal of the curve.

One might fear that this is the beginning of some long series of examples,
but in fact it is not:

\begin{theorem} [Petri]
The ideal of a canonical curve of genus $\geq 5$ is generated by the
\index{Petri's theorem}%
$\tbinom{g-2}{ 2}$-dimensional space of quadrics it contains unless the curve
is either trigonal or isomorphic to a plane quintic; in the latter cases,
the ideal of the curve is generated by quadrics and cubics.
\unif
\end{theorem}

For a modern treatment of Petri's theorem in this level of generality see
\cite{Schreyer}; for a different treatment see \cite{Arbarello-Sernesi}.

The two exceptions can be described simultaneously by using the 
\index{Clifford index:}%
Clifford index:

\begin{definition}
The \emph{Clifford index} Cliff $\sL$ of a line bundle $\sL$ on a curve
\index{Cliff@Cliff $\sL$}%
$C$ is $d-2r$, where $d \colonequals  \deg \sL$ and $r \colonequals
h^0(\sL)-1$. The Clifford index Cliff $C$ of
a curve $C$ of genus $\geq 2$ is the minimum of the Clifford indices
of special line bundles with at least 2 sections.
\unif
\end{definition}

Clifford's theorem (Corollaries \ref{Clifford bound} and ~\ref{equality
in Clifford from Martens}) says that Cliff $C \geq 0$, and that Cliff $C =
\index{Clifford's theorem}%
0$ if and only~if $C$ is hyperelliptic. If $C$ is not hyperelliptic, then
it turns out that Cliff $C=1$ if and only~if $C$ is either trigonal or
isomorphic to a plane quintic. The Clifford index of any smooth curve of
genus $g\geq 2$ is $\leq \lceil g/2\rceil+1$, with equality for a general
curve, as one sees from the Brill--Noether Theorem~\ref{basic BN}, and for
``most'' curves the line bundle $\sL$ of maximal Clifford index has only
2 sections, though there is an infinite sequence of examples where this
``Clifford dimension'' is greater.

Moving to cubic forms, we see that $\dim ({I_C})_3 = 
\tbinom{g+2}{ 3}-(5g-5)$. Comparing this number with the number of (possibly linearly
dependent)
cubics obtained by multiplying $g$ linear forms and $\tbinom{g-2}{ 2}$
quadrics, we see that the ideal of the curve has at least
$
\tbinom{g-2}{ 2} - \tbinom{g+2}{ 3}-(5g-5)
$
independent syzygies of total degree 3 (that is, linear syzygies on the
quadrics). For example when $g=4$ so that $C\subset \PP^3$ there is one
quadric and 5 independent
cubics, at most 4 of which are multiples of the quadric. Since the curve
has degree $6 = 2\times 3$, the ideal of the curve must be generated by
the quadric and one cubic. When $g=5$ there are genuinely two
possibilities: the three quadrics in the ideal might be a complete
intersection
(then they generate the ideal), so the Betti table would be
\index{Betti table}%
$$
\small
\begin{tabular}{r|@{\hskip20pt}ccc}
\downstrut
$j$&\llap{$i={}$}0&1&2\\
\hline
\upstrut
0&1&--&--\\
1&--&2&--\\
2&--&--&$1$\\
\end{tabular}
$$
\emdash or the curve could be trigonal, in which case the 3 quadrics
generate the ideal of a surface scroll $F$. In the latter
case, the Eagon--Northcott complex resolves the 
\index{homogeneous coordinate ring}%
\blue{homogeneous coordinate ring}
$S_F$ of the scroll,
$$
0\to S^2(-3) \to S^3(-2) \to S \to S_F \to 0
,
$$
which has Betti table
$$
\small
\begin{tabular}{r|@{\hskip20pt}ccc}
\downstrut
$j$&\llap{$i={}$}0&1&2\\
\hline
\upstrut
0&1&--&--\\
1&--&3&$2$\\
\end{tabular}
$$
and we see that there are 2 linear relations among the
quadrics. Thus the minimal generators of $I_C$ must include exactly
2 cubics as well as the 3 quadrics. Since the homogeneous ring of a
canonical curve is Gorenstein, its minimal free resolution is symmetric,
and this is enough for us to fill in its Betti table:
$$
\small
\begin{tabular}{r|@{\hskip20pt}cccc}
\downstrut
$j$&\llap{$i={}$}0&1&2&3\\
\hline
\upstrut
0&1&--&--&--\\
1&--&3&$2$&--\\
2&--&$2$&$3$&--\\
3&--&--&--&$1$\\
\end{tabular}
$$
Note that we can see the scroll reflected in the top two
lines of the table.

From the analogue of the 
\blue{Hilbert--Burch theorem}
\index{Hilbert--Burch theorem}%
 for 
\blue{Gorenstein rings} 
\index{Gorenstein rings}%
of
codimension 3 one can show that the 5 generators can be written as the
\blue{Pfaffians}
\index{Pfaffian}%
of a skew symmetric $5\times 5$ matrix whose entries are of
degrees 1 and 2, in the following pattern (we give just the degrees,
and 
use -- for 0):
$$
\catcode`\-=\active \def-{\hbox{\char`\-\char`\-}}
\left(@
\begin{matrix}
-&-&1&1&1\\
-&-&1&1&1\\
1&1&-&2&2\\
1&1&2&-&2\\
1&1&2&2&-
\end{matrix}
@\right)
.
$$
Here the $2\times 2$ minors of the upper $2\times 3$ block of linear
forms generate the ideal of the scroll.

Applying this logic more generally we get the following result about
the canonical embedding of curves with low degree maps to $\PP^1$:

\begin{theorem}
Let $C\subset \PP^{g-1}$ be a reduced, irreducible canonical curve. If
$C$ has a line bundle $\sL$ of degree $d \leq g-1$ with $h^0(\sL) =
2$  then
there is a 1-generic  $2\times (g+1-d)$ matrix of linear forms whose
minors define a scroll of codimension $g-d$ containing $C$; and thus an
Eagon--Northcott complex of length $g-d$ is a subcomplex of the minimal
free resolution of $R_C$. In particular, the Betti table of $R_C$ is
\index{Betti table}%
termwise $\geq$ that of the homogeneous coordinate ring of the scroll.
\unif
\end{theorem}

(We have stated this theorem for canonical curves, but in fact the
construction applies much more generally to a linearly normal variety
$X \subset \PP^n$ of any dimension: if $X$ has a divisor $D$ that moves
in a pencil and is contained in a subspace $\PP^k$ with $k \leq n-2$,
the planes spanned by the divisors of the pencil $|D|$ sweep out a
rational normal scroll.)

Thus the existence of the $g^1_d$ on $C$, together with the symmetry
of the resolution of the Gorenstein ring $R_C$,
implies that the Betti table of $R_C$ has the form%
\index{Betti table}%
$$
\small
\medmuskip1mu
\begin{tabular}{r|@{\hskip20pt}cccccccccccc}
\downstrut
$j$&\llap{$i={}$}0&1&2&\dots&$d-3$&$d-2$&\dots&$g-d-1$&$g-d$&\dots&$g-3$&$g-2$\\
\hline
\upstrut
0&1&--&--&$\cdots$&--&--&--&--&--&--&--&--\\
1&--&*&*&$\cdots$&*&*&$\cdots$&*&$?$&$\cdots$&?&?\\
2&--&?&?&$\cdots$&?&*&$\cdots$&*&*&$\cdots$&*&*\\
3&--&--&--&$\cdots$&--&--&--&--&--&--&--&1
\end{tabular}
$$
where we have assumed for illustration that $d-2<g-d-1$. 
As before, a dash indicates a place that is
definitely 0; 
asterisks indicate some that are
definitely
nonzero. The entries of the rows marked 0 and 1 are 
greater than or equal to
the
corresponding entries of the Betti table of the scroll.

We can summarize this by saying
that if the curve $C$ has a line bundle $\sL$ of degree $d$ with exactly
2 sections (which is thus of Clifford index $c = d-2$) the row labeled  2
in the Betti diagram definitely has $\beta_{c, c+2} \neq 0$. As with
the case of the plane quintics above, one can
make a similar argument for \emph{any} line bundle of Clifford index
$c$. Thus:

\begin{corollary}
If\, $\mathrm{Cliff}\, C \leq c$ then $\beta_{c,c+2}(S/I_C)) \neq 0$.
\unif
\end{corollary}

Starting from examples such as the case of genus 6, Mark Green made a
\index{Green, Mark}%
bold conjecture that is still open as of this writing:

\begin{conjecture}[Green's conjecture]
If $C$ is a smooth canonical curve of genus $g$ and $S/I_C$ is the
\index{Green's conjecture}%
homogeneous coordinate ring of $C$ in its canonical embedding,
then the Clifford index of $C$ is $\leq c$ if and only~if
$\beta_{c,c+2}(S/I_C) \neq 0$.
\unif
\end{conjecture}

The conjecture was made for curves over a field of characteristic 0, and
is known in many cases, though it is also known to fail in small finite
characteristics (see \cite{Bopp-Schreyer} for an amended conjecture that
may hold in all characteristics.)
Claire Voisin
\citeyear{MR1941089,MR2157134} 
\index{Voisin, Claire}%
proved
the conjecture 
for generic curves of each Clifford index; 
simpler proofs then appeared in
\cite{MR4022070,MR4213770,arXiv:2205.00266}.
As of this writing the full conjecture is known up to genus 9,  for
plane curves, and in a number of other special cases.
See 
\cite{Farkas-progress-on-syzygies} for a survey on this
and related topics.

\subsection*{Low-genus canonical embeddings}
Frank-Olaf
Schreyer, in his 1983 Brandeis
thesis 
(reworked as \cite{Schreyer-canonical}),
analyzed the possibilities for reso\-lutions of smooth
canonical curves up to genus 8. The project was carried further to
genus 9 by Schreyer's student
Michael Sagraloff 
in his Saarbr\"ucken thesis \citeyear{Sagraloff}.


\section{Exercises}

\begin{exercise}\label{WMACE corollary}
Let $S = k[x_0,\dots, x_r]$, and let
$$
\FF:\quad  
F_0\luto{\phi_1}F_1 \leftarrow \cdots \leftarrow F_{n-1}\luto{\phi_n} F_n\leftarrow 0
$$
be a finite complex of free $S$-modules. Set
$$
X_i =\big\{p\in \AA^{n+1} \mid  H_i(\FF \otimes \kappa(p)) \neq 0 \big\}.
$$
Use Theorem~\ref{WMACE} to prove that $\FF$ is 
\blue{acyclic}
\index{acyclic}%
if and only~if
$
\codim X_i \geq i
$
for all $i>0$. Moreover, $X_{0}\supseteq X_{1}\supseteq \cdots \supseteq
X_{n}$.

Hint: Elementary linear algebra shows that, if $k$ is a field, then a
complex $$k^p \lTo^{\phi} k^q \lTo^\psi k^r$$ is exact at $k^q$ if and
only~if $\rank \phi +\rank \psi = q$.
\end{exercise}

\begin{exercise}
Prove that if $X\subset \PP^r$ is 
\blue{arithmetically Cohen--Macaulay}
\index{ACM}%
then
the dual of the minimal free resolution of $S/I_X$
is the minimal free resolution of $\omega_X$.

Hint: Use Theorem~\ref{WMACE}
and the characterization of $\omega_{S/I_X}$
as an Ext module.
\end{exercise}

\begin{exercise}
The \emph{depth lemma} states that if
\index{depth lemma}%
$$
0\to A\to B\to C \to 0
$$
is an exact sequence of nonzero finitely generated modules over a local
ring $R$ then
$$
\begin{aligned}
\depth C &\geq \min\{\depth B, \depth A-1\},\\
\depth A & \geq \min\{\depth B, \depth C +1\}.
\end{aligned}
$$
Prove this in the special case when $R$ is regular using the
characterization of depth
via projective dimension.
\end{exercise}

\begin{exercise}
\begin{enumerate}
\item Prove that if $\phi: F\to G$ is a free presentation of a finitely
generated module $M$
then
$$
\ann_{R}(\coker \phi)^{\rank G}\subset \Fitt_{0}\phi \subset
\ann_{R}(\coker \phi).
$$
\item Prove that over a local ring every projective module is free;
and show that
$I(\phi)$ defines the nonfree locus of $\coker \phi$.
\end{enumerate}
\end{exercise}

\begin{exercise}
In dealing with arithmetically Gorenstein schemes, we used the fact that
\blue{arithmetically Gorenstein}
\index{arithmetically Gorenstein}%
if $\omega_{S/I}$ is an invertible
sheaf (over $\Spec(S/I)$) then it is isomorphic to $S/I(a)$ for some
$a$. Why is this true?

Hint: Nakayama's lemma can be used to prove that projectives are free
\index{Nakayama's lemma}%
in some cases.
\end{exercise}

\begin{exercise}
Find a degree 6 embedding of a curve of genus 3 that is not arithmetically
Cohen--Macaulay, and another that is.

Hint: Show that the $3\times 3$ minors of a general $4\times 3$ matrix
of linear forms defines a Cohen--Macaulay curve
of genus 3. Show that a curve of type $(2,4)$ on a smooth quadric in
$\PP^3$ is not arithmetically Cohen--Macaulay.
\end{exercise}

\begin{exercise}
Referring to the Betti table of a canonical curve just before
\index{Betti table}%
Section~\ref{EN section}, give a formula
for the differences $b_i- b_{g-i-1}$ that depends only on $i$ and $g$.
\end{exercise}

\begin{exercise}
Show that if $I \subset S \colonequals  \CC[x_0,\dots, x_r]$ is a
codimension 2 ideal, then $S/I$ is Cohen--Macaulay if and only
if the minimal $S$-free resolution of $S/I$ has the form
$$
0\to S^{n-1} \to S^n \to S
$$
for some $n$. Show that $S/I$ is Gorenstein if and only~if $I$ is a
complete intersection.

Hint: for the first part, tensor with
the field of rational functions.
\end{exercise}

\begin{exercise}
Which sets of 4 distinct points in $\PP^2$ are arithmetically
Gorenstein? Which sets of 5 points? Which sets of 6 points?
\end{exercise}

\begin{exercise}
Give an example of a set of points in $\PP^3$ that is arithmetically
Gorenstein but not a complete intersection.

Hint: take the
hyperplane section of a trigonal canonical curve of genus 5.
\end{exercise}

\begin{exercise}
Let $q:F\to G$, with $F = S^2(-1)$ and $G = S^2$,
be described by the matrix $\bigl(` `\begin{smallmatrix} x_0&x_1\\ x_2&x_3 \end{smallmatrix}` `\bigr)@$, and let $Q\subset \PP^3$ be the quadric defined by the determinant of $q$.
\begin{enumerate}

\item Show that the sheafification of the graded module $M \colonequals
\coker q$ is $\sO_Q(1,0)$ and the sheafification
of $\coker q^*$ is $\sO_Q(0,1)$ by computing the vanishing locus
of the two sections corresponding to the generators of the module.

\item Show that the sheafification of $\Sym^a(M)$ is
$\sO_Q(a,0)$. Conclude that
if $a\leq \nobreak b$ then the relative ideal sheaf $\sI_{C/Q} = \sO(-a,-b)$
of a curve $C$ of type $(a,b)$
is the sheafification of the module $\Sym^{b-a}(M)(-b)$.

\item Let $S = \CC[x_0,\dots, x_3]$. Show that the minimal $S$-free
resolution of $\Sym^a(M)$
has the form
$$
0 \to \mwedge^2 F \otimes \Sym^{a-2} G(-2)\to F\otimes \Sym^{a-1}
G(-1)\to \Sym^a G.
$$

Hint: Use multilinear algebra (as in \cite{Eisenbud1995}) to define the
maps, and use
Theorem~\ref{WMACE} to prove that this is a resolution.

\item Show that if $C\subset \PP^3$ is a curve of type $(a, b)$ with
$a\leq b$ then
there is a free resolution of a module
whose sheafification is $\sI_{C/\PP^3}$ that is a mapping cone of the
map of complexes
\vspace*{-10pt}
$$
\small
\quad
\medmuskip0mu
\xymatrix@C=15pt{
0\ar[r]  &0\ar[r]& \mwedge^2 F \ar[r]^ {\ssty\bigwedge^{`2}``q}&\mwedge^2 G\\
0\ar[r]\ar[u]  & \mwedge^2 F @\otimes@ \Sym^{b-a-2} G(-b-2) \ar[r]\ar[u]  
&F @\otimes@\Sym^{b-a-1} G(-b-1) \ar[r]\ar[u]& \Sym^{b-a} G(-b)\ar[u]
}
\vspace*{5pt}
$$

\item Conclude that the deficiency module of a curve of type $(a, b)$
with $a\leq b$ is the cokernel of a map
$$
\mwedge^2 F^* \otimes \Sym^{b-a-2} (G^*)(b+2) \luto{\,F^*}\otimes \Sym^{b-a-1}
G^*(b+1)
$$
and thus, after choosing a basis of $F = S^2` `$, may be identified as
the sheafification of the cokernel of
$$
\Sym^{b-a-2} (G^*)(b+2) \luto {\ F}\otimes \Sym^{b-a-1} G^*(b+1)
$$
where the map is the action of $F$ on $\mwedge \,G^*$ via the map $q:F\to G$.
\end{enumerate}

Hint:  Imitate the proof of Theorem~\ref{ENgeneral} to prove
the exactness of the given resolution of $\Sym^a(M)$. See also
\cite[Appendix A2.6]{Eisenbud1995}.
\end{exercise}

\begin{exercise}
\label{Fitt}
Let $\phi: F\to G \to M\to 0$ be an exact sequence of finitely generated
$R$-modules,
with $F$ and $G$ free.

\begin{enumerate}
\item Show that the annihilator of  $\coker \phi$ has the
same radical as the ideal 
of minors
$I_{\rank G}(\phi)$.
\item 
Show that the cokernel of $\phi$
is locally free if and only~if $I_{\rank \phi}(\phi)= R$.
\end{enumerate}
\end{exercise}

\input{footer}
