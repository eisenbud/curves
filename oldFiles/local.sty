
%\RequirePackage{mathrsfs} 
%\let\cal\mathscr \let\mathcal\cal
\RequirePackage{amssymb}
\RequirePackage{diagrams}
\RequirePackage{amsthm}
\RequirePackage{amsmath}


\def\see#1#2{\textit{see} #1}
\def\seealso#1#2{\textit{see also} #1}

\renewcommand{\@idxitem}  {\par\hangindent 8\p@}
\renewcommand{\subitem}   {\par\hangindent 16\p@ \hspace*{8\p@}}
\renewcommand{\subsubitem}{\par\hangindent 24\p@ \hspace*{16\p@}}

\def\theindex{\@restonecoltrue\if@twocolumn\@restonecolfalse\fi
\columnseprule \z@
\raggedright
\columnsep 20pt\twocolumn[\@makeschapterhead{Index}\vskip-48pt]
    \addcontentsline{toc}{chapter}{\protect\numberline{}Index}%
    \@mkboth{Index}{Index}\thispagestyle{empty}\parindent\z@
    \parskip\z@ plus .3pt\relax\let\item\@idxitem}

\setcounter{tocdepth}{5}
\renewcommand*{\l@chapter}[2]{%
  \ifnum \c@tocdepth >\m@ne
    \addpenalty{-\@highpenalty}%
    \vskip 1.0em \@plus\p@
    \setlength\@tempdima{1.8em}%
    \begingroup
      \parindent \z@ \rightskip \@pnumwidth
      \parfillskip -\@pnumwidth
      \leavevmode \bfseries
      \advance\leftskip\@tempdima
      \hskip -\leftskip
      #1\nobreak\hfil \nobreak\hbox to\@pnumwidth{\hss #2}\par
      \penalty\@highpenalty
    \endgroup
  \fi}
\renewcommand*{\l@section}      {\@dottedtocline{1}{1.8em}{2.3em}}
\renewcommand*{\l@subsection}   {\@dottedtocline{2}{4.1em}{3.2em}}
\renewcommand*{\l@subsubsection}{\@dottedtocline{3}{7.3em}{1em}}

\def\cite{\def\@citeseppen{-1000}%
    \def\@cite##1##2{##1\if@tempswa , ##2\fi]}%
    \def\citeauthoryear##1##2##3{##1\ [##3}\@internalcite}

\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
    \hbox{}\thispagestyle{empty}\newpage\if@twocolumn\hbox{}\newpage\fi\fi\fi}

\def\MARGINPAR#1{\marginpar{\normalsize #1}}
%\def\marginpar#1{} \def\MARGINPAR#1{}

\def\displaymatrix#1{{\openup4pt\null\,\vcenter{
    \ialign{\hfil$\displaystyle##$\hfil&&\quad\hfil$\displaystyle##$\hfil\crcr
      \mathstrut\crcr\noalign{\kern-\baselineskip}
      #1\crcr\mathstrut\crcr\noalign{\kern-\baselineskip}}}\,}}
\def\figdir{/u/levy/texts/SLAG/Figures}
\let\hyperactivelabels\small

\leftmargini=13.5pt

\diagramstyle[%
height=20pt%
,width=30pt%
,dpi=1200%
%,heads=littlevee% 
,PostScript=Rokicki%
]

\def\binom#1#2{{#1\choose#2}}
\let\ell=l
\def\[{[\![} \def\]{]\!]}
\def\tfrac#1#2{{\textstyle{#1\over#2}}}
\let\emptyset\varnothing
\def\mod#1{\allowbreak\mathrel{\mathrm{mod}}#1}
\def\tightpluses{\medmuskip 1mu plus 1mu \binoppenalty=10000 }

\def\emdash{\kern.16667em---\hskip.16667em\ignorespaces}

\newmuskip\themshift
\def\mshift#1#2{\themshift=#1 mu \mskip-\themshift #2 \mskip\themshift }
\def\$#1{\mshift2{#1}$}

\def\sink#1{\lower1.8pt\hbox{$\scriptstyle#1$}}
\def\resa#1#2{\smash{\res_{\sink{#1,\mskip2mu #2}}}}

\def\limind{\mathop{\oalign{\hfil$\mathrm{lim}$\hfil\cr
        $\longrightarrow$\cr}}\nolimits}
\def\limproj{\mathop{\oalign{\hfil$\mathrm{lim}$\hfil\cr
        $\longleftarrow$\cr}}\nolimits}

\def\hint{\par{\it Hint. }\ignorespaces}
\def\theenumi{\alph{enumi}}
\def\labelenumi{\textnormal{(\theenumi)}}
\leftmargini=18.3333pt

\def\th@plain{%
%  \thm@notefont{\fontseries{b}\selectfont}%
  \thm@notefont{\mdseries}%
  \thm@preskip6\p@\@plus6\p@
  \thm@postskip6\p@\@plus6\p@
  \itshape % body font
}
\def\th@definition{%
%  \thm@notefont{\fontseries{b}\selectfont}%
  \thm@notefont{\mdseries}%
  \thm@preskip6\p@\@plus6\p@
  \thm@postskip6\p@\@plus6\p@
  \normalfont % body font
}

\newtheorem{thm}{Theorem}[chapter]
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{lem}[thm]{Lemma}

\theoremstyle{definition}
\newtheorem{exe}[thm]{Exercise}
\newtheorem{dfn}[thm]{Definition}
\newtheorem{exam}[thm]{Example}
\newtheorem{notation}{Notation}
\newtheorem{remark}{Remark}
\def\theremark{\unskip}

%\renewcommand{\thechapter}{\Roman{chapter}}

%\renewcommand{\thethm}{\hbox{\thechapter-\arabic{thm}}}

% CALLIGRAPHIC LETTERS

\def\CA{\mathcal A}
\def\CB{\mathcal B}
\def\CC{\mathcal C}
\def\CE{\mathcal E}
\def\CF{\mathcal F}
\def\CG{\mathcal G}
\def\CH{\mathcal H}
\def\CI{\mathcal I}
\def\CJ{\mathcal J}
\def\CK{\mathcal K}
\def\CL{\mathcal L}
\def\CM{\mathcal M}
\def\CN{\mathcal N}
\def\CO{\mathcal O}
\def\CP{\mathcal P}
\def\CQ{\mathcal Q}
\def\CS{\mathcal S}
\def\CU{\mathcal U}
\def\CV{\mathcal V}
\def\CX{\mathcal X}
\def\CY{\mathcal Y}
\def\SC{\mathcal C}


% GREEK LETTERS

\newcommand{\al}{\alpha}
\newcommand{\be}{\beta}
\newcommand{\si}{\sigma}
\newcommand{\ga}{\gamma}
\newcommand{\Ga}{\Gamma}
\newcommand{\varp}{\varphi}
\renewcommand{\phi}{\varphi}
\newcommand{\Si}{\Sigma}
\newcommand{\vare}{\varepsilon}
\newcommand{\ti}{\tilde}
\newcommand{\de}{\delta}
\def\d{\delta }
\def\e{\epsilon}
\def\l{\lambda}
\def\s{\sigma}
\def\a{\alpha}
\def\b{\beta}
\def\g{\gamma}
\def\k{\kappa}
\def\o{\omega}

\def\D{\Delta}



% GOTHIC LETTERS

\def\frp{\mathfrak p}
\def\frm{\mathfrak m}
\def\frq{\mathfrak q}
\def\fm{\mathfrak m}
\def\hx{h_X}
\def\hxx{h_{X'}}
\def\gp{\mathfrak p}
\def\gm{\mathfrak m}
\def\gS{\mathfrak S}

% MATH SYMBOLS/TYPESETTING INSTRUCTIONS

\def\overl#1{\mskip4mu\overline{\mskip-4mu#1\mskip-1mu}\mskip1mu}
\newcommand{\oCF}{\mskip7mu\overline{\mskip-7mu\CF\mskip-1mu}\mskip1mu}
\newcommand{\oQ}{\mskip3mu\overline{\mskip-3mu\bQ\mskip-3mu}\mskip3mu}
\newcommand{\CCi}{{\CC}^\infty}
\newcommand{\ra }{\rightarrow}
\newcommand{\lra}{\longrightarrow}
\newcommand{\ptl}{\partial}
\def \iso {\cong}
\def \tensor {\otimes}
\def \intersect {{\cap}}
\def\la{ \; \longrightarrow \; }
\def\ul{\underline}
\def\ol{\overline}
\def\ni{\noindent}
\def\cl{\centerline}
\def\rk{{\it Remark}.}

\def\exhale{\smallbreak}

\def\makeop#1{\@namedef{#1}{\mathop{\mathrm{#1}}\nolimits}}

\let\intersection\cap \let\intersect\cap

\makeop{ann}
\makeop{Ass}
\makeop{Bl} \let\bl\Bl
\makeop{codim}
\makeop{coker} \let\Coker\coker
\makeop{deg}
\makeop{depth}
\makeop{Div}
\makeop{Ext}
\makeop{Fitt}
\makeop{Fun} \let\Funct\Fun
\makeop{Gal}
\makeop{grade}
\makeop{Hom}
\makeop{Hot}
\makeop{fun}
\makeop{id}
\makeop{Im} \let\Imm\Im
%\makeop{Img}
%\let\im\Img \let\image\Img \let\Im\Img
\let\im\Im
\makeop{isom}
\makeop{Ker}\let\ker\Ker
\makeop{lcm}
\makeop{Mor}\let\Morph\Mor
\makeop{mult}
\makeop{Pic}
\makeop{pd}
\makeop{Proj} \let\proj\Proj \let\gproj\Proj \let\Projs\Proj
        \def\projs{{\proj}\,}
\makeop{rad}
\makeop{rank}
\makeop{res}
\makeop{red}
\makeop{sgn}
\makeop{sing} \let\Sing\sing
\makeop{Spec} \let\spec\Spec \let\gspec\spec
        \def\specs{{\spec}\,} \let\gspecs\specs \let\Specs\specs
\makeop{supp} \let\Supp\supp
\makeop{Syl}
\makeop{Sym}\let\sym\Sym \let\syms\Sym

\makeop{Tor}

\def \sm  {{\rm smooth}}
\def\th{{\rm th}}
\def\ecd{Cartier subscheme }

\def\th{-th}

% BLACKBOARD BOLD SYMBOLS

\def\A{{\mathbb A\mskip1mu}}
\def\F{{\mathbb F\mskip1mu}}
\def\G{{\mathbb G\mskip1mu}}
\def\C{{\mathbb C\mskip1mu}}
\def\Q{{\mathbb Q\mskip1mu}}
\def\P{{\mathbb P\mskip1mu}}
\def\R{{\mathbb R\mskip1mu}}
\def\Z{{\mathbb Z\mskip1mu}}
\def\T{{\mathbb T\mskip1mu}}
\def\bN{{\mathbb N\mskip1mu}}
\def\bE{{\mathbb E\mskip1mu}}
\def\bR{{\mathbb R\mskip1mu}}
\def\bC{{\mathbb C\mskip1mu}}
\def\bZ{{\mathbb Z\mskip1mu}}
\def\bA{{\mathbb A\mskip1mu}}
\def\bQ{{\mathbb Q\mskip1mu}}
\def\bP{{\mathbb P\mskip1mu}}
\def\bF{{\mathbb F\mskip1mu}}
\def\bG{{\mathbb G\mskip1mu}}
\def\bT{{\mathbb T\mskip1mu}}

%%%%%%%%%%%%%%%%%%%%Joe's current macros%%%%%%%%%%%%%%

 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\threed/{three-dimen\-sional}


\def\eqalign#1{\null\,\vcenter{\openup\jot\m@th
  \ialign{\strut\hfil$\displaystyle{##}$&$\displaystyle{{}##}$\hfil
      \crcr#1\crcr}}\,}
\def\eqaligntop#1{\null\,\vtop{\openup\jot\m@th
  \ialign{\strut\hfil$\displaystyle{##}$&$\displaystyle{{}##}$\hfil
      \crcr#1\crcr}}\,}
\def\eqalignbot#1{\null\,\vbox{\openup\jot\m@th
  \ialign{\strut\hfil$\displaystyle{##}$&$\displaystyle{{}##}$\hfil
      \crcr#1\crcr}}\,}

\marginparwidth =100pt
\marginparsep   =8pt
\makeatletter
\long\def \@savemarbox #1#2{%
  \global\setbox #1%
      \vtop{%
        \hsize\marginparwidth
        \@parboxrestore
        \reset@font
        \@setnobreak
        \@setminipage
        \@marginparreset
        \tiny
        \raggedright
        #2%
        \par
        \global\@minipagefalse
%        \outer@nobreak
        }%
}

%\def\st{:}
\def\st{\mid}

\renewcommand\normalsize{%
   \@setfontsize\normalsize\@xpt\@xiipt
   \abovedisplayskip 6\p@ \@plus3\p@ \@minus2\p@
   \abovedisplayshortskip 2\p@ \@plus3\p@
   \belowdisplayshortskip 6\p@ \@plus3\p@ \@minus2\p@
   \belowdisplayskip \abovedisplayskip
   \let\@listi\@listI}

\def\@listi{\leftmargin\leftmargini
            \parsep 0\p@
            \topsep 4\p@ \@plus\p@ \@minus\p@
            \itemsep4\p@ \@plus\p@ \@minus\p@}
\let\@listI\@listi
\@listi
\normalsize

\def\subsubsection#1{\@startsection
    {subsubsection}{3}{\z@}{-6\p@ plus-6\p@ }{-.5em}%
        {\xONxii\bf\raggedright}{#1}}

\def\@sect#1#2#3#4#5#6[#7]#8{%
     \ifnum #2>\c@secnumdepth
       \let\@svsec\@empty\else
       \refstepcounter{#1}%
       \protected@edef\@svsec{\@seccntformat{#1}}%
     \fi
     \@tempskipa #5\relax
      \ifdim \@tempskipa>\z@
        \begingroup #6\relax
          \@hangfrom{\hskip #3\relax\@svsec}%
                    {\interlinepenalty \@M #8\ifnum#2>2.\fi\par}%
        \endgroup
       \csname #1mark\endcsname{#7}\addcontentsline
         {toc}{#1}{\ifnum #2>\c@secnumdepth \else
                      \protect\numberline{\csname the#1\endcsname}\fi
                    #7}\else
        \def\@svsechd{#6\hskip #3\relax  %% \relax added 2 May 90
                   \@svsec #8\ifnum#2>2.\fi\csname #1mark\endcsname
                      {#7}\addcontentsline
                           {toc}{#1}{\ifnum #2>\c@secnumdepth \else
                           \protect\numberline{\csname the#1\endcsname}%
                                     \fi
                       #7}}\fi
     \@xsect{#5}}

\newarrow{Into}{boldhooka}---{vee}

%%%  #1= {} or \boldmath; #2= + or -; #3=\subset or \supset
%\def\raisehook#1#2#3{\hbox{\setbox3=\hbox{#1$\scriptscriptstyle#3$}%
%%% the character to use
%\dimen0\ss@axisheight%% \scriptscriptstyle axis height
%\dimen1\axisheight\advance\dimen1-\dimen0%% difference in axis heights
%\dimen2\ht3\advance\dimen2-\dimen0%
%%%  height of char above axis (half spread)
%\advance\dimen1 #2\dimen2%% shift = axis_difference +/- half_spread
%\raise.96\dimen1\box3}}%% print the character
%
%%% Mark Dawson suggested using the width
%\def\shifthook#1#2#3{\setbox0=\hbox{#1$\scriptscriptstyle#3$}\dimen0\wd0%
%\divide\dimen0 12\Cd@MH{\dimen0}%%  "u"
%\dimen1\wd0\advance\dimen1-2\dimen0\advance\dimen1-\Cd@@I\Cd@MH{\dimen1}\kern
%#2.94\dimen1\box0}%% print
%

