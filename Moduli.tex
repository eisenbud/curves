\input{header}

\chapter{Appendix 1: Moduli} 
\label{Moduli chapter}

Philosophy of this chapter: the book \emph{Moduli of Curves} has already been written, and we don't want to write it again. But a summary of the basic information would be useful

\section{What is a moduli problem?}

We've already seen, in the preceding chapters, examples of \emph{moduli}, or \emph{parameter spaces}---spaces parametrizing algebro-geometric objects of a specified sort. In this chapter, we'll try to systematize this, giving a general framework for the notion of moduli space, introducing the main examples we'll be dealing with here, and mentioning some common variants.

As for the question of the title, in colloquial terms a \emph{moduli problem} consist of two things: a class of objects in algebraic geometry---schemes, subschemes of a given scheme, sheaves on schemes, maps of schemes and the like---and a notion of what it means to have a \emph{family} of these objects parametrized by a scheme $B$. As usual, some examples will make this somewhat vague notion more real. In each case, we'll discuss the notion as it applies to curves.

\subsection{Examples}

These are the four main instances of moduli spaces we'll encounter in this book.

\begin{enumerate}\label{list of moduli problems}
\item \emph{Curves of genus $g$}. Here, the objects are simply (isomorphism classes of) smooth, projective curves of genus $g$. By a family of such curves, we'll mean a smooth, projective morphism $f : \cC \to B$ whose fibers are  curves of genus $g$.

\item \emph{Curves in projective space}. Here, the objects are simply subschemes $C \subset \PP^r$ of degree $d$, isomorphic to smooth, projective curves of genus $g$. By a family of such curves, we'll mean a subscheme $\cC \subset B \times \PP^r$, flat over $B$,  whose fibers are smooth, projective curves of genus $g$.

\item \emph{Effective divisors on a given curve}. The objects are divisors of degree $d$ on a given smooth, projective curve $C$. To define a family of such divisors, we use the equivalence between effective divisors and subschemes to define a family to be subscheme $\cD \subset B \times C$, flat of relative degree $d$ over $B$.


\item \emph{Line bundles on a given curve}. Now the objects are line bundles of degree $d$ on a given smooth, projective curve $C$; by a family of line bundles we'll mean simply a line bundle $\cL$ on $B \times C$, whose restriction to each fiber of $B \times C$ over $B$ has degree $d$.

\end{enumerate}

\section{What is a solution to a moduli problem?}

The basic idea here is straightforward: given a moduli problem, we want to construct a scheme $M$ whose closed points are in natural  1-to-1 correspondence with the objects we're trying to parametrize. The problem, as it so often is, is the word ``natural" appearing in that last sentence: given that most of the time, the set of objects has cardinality $\aleph_1$, as do all positive-dimensional varieties $M$ over $\CC$, the existence of a bijection between the points of $M$ and the objects to be parametrized is not much of a condition!

In the pre-scheme days, the answer was not entirely satisfactory, but at least easy to understand:  for any family of objects parametrized by a variety $B$, we have an induced map of sets from the closed points of $B$ to the set of closed points in $M$, and the requirement is simply that this be the underlying set map of a regular morphism $B \to M$.

In the world of schemes, however, a map is not determined by its underlying set map, and this needs to be updated. In the end, rather than construct a morphism $B \to M$ associated to a family of objects over $B$ and then require it to be a regular map, we simply require that there exist a natural bijection, for any scheme $B$, between the set of families $\cC$ over $B$ and the set of morphisms $\phi_\cC : B \to M$. Moreover, here the word ``natural" is easy to make precise: we require that the association to a family of a morphism to $M$ \emph{commute with base change}; that is, if $\pi : B \to B_0$ is any morphism of schemes, $\cC_0 \to B_0$ a family over $B_0$ and $\cC := \cC_0 \times_{B_0} B \to B$ the induced family over $B$, then the morphism
$$
\phi_B = \phi_{B_0} \circ \pi.
$$
In other words, we have two functors from the category of schemes to the category of sets: the functor $h$ that associates to a scheme $B$ the set of families over $B$; and the functor $\rm{Mor}(\bullet, M)$ that associates to a scheme $B$ the set of morphisms $B \to M$. We'll say that $M$ is a \emph{fine moduli space} for the given moduli problem if there exists an isomorphism of functors $h \cong \rm{Mor}(\bullet, M)$, and this is what we call a solution to the moduli problem.

One problem: fine moduli spaces may not exist. Indeed, this is the case for the fundamental Example 1 of ~\ref{list of moduli problems}, which we'll discuss in the following section. There is a weaker notion, that of a \emph{coarse moduli space} $M$, where we require a bijection between families $\cC$ over $B$ and the set of morphisms $\phi_\cC : B \to M$ only after finite base change: that is, we have an association to any family $\cC$ over $B$ of a morphism $\phi_\cC : B \to M$ such that

\begin{enumerate}
\item if $\phi_\cC : B_0 \to M$ is any morphism, then there exists a finite cover $\pi : B \to B_0$ such that $\phi_\cC \circ \pi : B \to M$ is the morphism associated to some family; and
\item if $\cC \to B_0$ and $\cC' \to B_0$ are two families such that the associated morphisms $\phi_\cC = \phi_{\cC'} : B_0 \to M$ are equal, then there exists a finite cover $\pi : B \to B_0$ such that the pullbacks of $\cC$ and $\cC'$ to $B$ are equal.
\end{enumerate}

\section{$M_g$}

The space $M_g$ parametrizing isomorphism classes of smooth projective curves of genus $g$---Example 1 of ~\ref{list of moduli problems}---is at the heart of the mystery that is algebraic curves. We'll talk briefly here about what is known about these spaces, and how our understanding has developed over the last two centuries.

Algebraic geometers of the 19th century were certainly aware that, while every smooth projective curve of genus 0 was isomorphic to the Riemann sphere, in  genus 1 and higher you could have continuously varying families of non-isomorphic curves. It's not clear at what point geometers started to think about the set of isomorphism classes as the points of a space, but the idea was clearly present in the work of Riemann, who asked among other things what the dimension of that space should be. He thought of $M_g$ as a real manifold, and arrived at the (correct) answer $\dim M_g = 6g-6$ for $g \geq 2$ by using the auxilliary construction of the \emph{Hurwitz space}, which we'll describe in Section~\ref{hurwitz spaces} below. The same auxilliary construction was used by Hurwitz, Clebsch and others to assert the irreducibility of $M_g$; this was a crucial development, in that it allows us to talk unambiguously about a ``general curve."

In low genus it is possible to give explicit constructions of $M_g$, though not necessarily to describe its geometry in full. For example, in genus 2 we have seen that every curve of genus 2 is expressible as a double cover of $\PP^1$ branched at six points, and  that the curve is determined by those points. Now, given six distinct points in $\PP^1$ we can find an automorphism of $\PP^1$ carrying three of the points to 0, 1 and $\infty$. The remaining three points will be sent to three distinct points in $\PP^1 \setminus \{0, 1, \infty \} $. Of course, this depends on how we order the points in the first place; at the end of the day, we see that the symmetric group $S_6$ acts on the quasi-projective variety
$$
\Gamma = \left( \PP^1 \setminus \{0, 1, \infty \} \right)^3 \setminus \Delta
$$
(where $\Delta$ is the union of all diagonals in the triple product), and we may realize the moduli space $M_2$ as the quotient $\Gamma/S_6$. There is clearly much more to say, but this construction at least does two things:

One, it may serve to convince us that $M_2$ is irreducible of dimension 3; and

Two, it allows us to write down explicitly a ``general curve of genus 2:" this is just the curve
$$
y^2 = x(x-1)(x-a)(x-b)(x-c)
$$
with $a, b$ and $c$ general scalars.

There are similarly ad-hoc ways of describing the moduli spaces $M_g$ for other small values of $g$. For example, in genus 3 we've seen that a non-hyperelliptic curve of genus 3 is embeddable as a smooth plane quartic curve $C \subset \PP^2$. Now, the space of all quartic curves is a projective space $\PP^{14}$, and the subset of smooth curves is an open subset $U \subset \PP^{14}$. Moreover, the group $PGL_3$ of automorphisms of $\PP^2$ acts on this open set $U$, and  the moduli of (nonhyperelliptic) curves of genus 3 is --at lease set-theoretically--the quotient $U/PGL_3$.

This is bogus in several respects: apart from the fact that we're excluding hyperelliptic curves, a much more serious issue is that we're taking the quotient of a variety by the positive-dimensional group $PGL_3$; and while the quotient of a variety by a finite group is always a variety, quotients by positive-dimensional groups may not be (think of $\CC^*$ acting on $\CC$ by scalar multiplication: as a topological space, the quotient has two points, one in the closure of the other. \fix{but the reader wants to know whether THIS quotient is a variety, or not!} Nonetheless, it does two things:

One, it may serve to convince us that $M_3$ is irreducible of dimension $14-8 = 6$; and

Two, it allows us to write down explicitly a ``general curve of genus 3:" this is just the curve in $\PP^2$ given by
$$
\sum_{i+j+k = 4} a_{i,j,k} X^iY^jZ^k = 0
$$
with $a_{i,j,k}$ general scalars.

\subsection{The Deligne-Mumford paper}

Though mathematicians had long accepted the idea, born of such examples, that $M_g$ would be some sort of algebraic variety, the first rigorous proof did not come until 1969, with the publication of the landmark paper \cite{Deligne-Mumford}. Two results in that paper fundamentally altered the landscape of curve theory:

First, they gave a precise, rigorous construction of the moduli space $M_g$ for any $g \geq 2$ (showing in particular that it was a coarse moduli space, but that no fine moduli scheme can exist. They also proved the existence of a fine moduli space, which exists as a \emph{ stack} $\cM_g$.). Second, they gave a modular compactification of $M_g$ (described in Section~\ref{} below), called the \emph{Deligne-Mumford compactification} and denoted $\overline M_g$. 

Surpisingly, the compactification proved crucial in understanding the (uncompactified) $M_g$ itself, because it opened up the study of the moduli space of curves to the powerful techniques of modern projective geometry. This made possible the resolution of many outstanding problems related to moduli of curves, to which we shall return. 
\subsection{$M_g$ is only a coarse moduli space}

The fact that $M_g$ is a coarse moduli space, not a fine one, manifests itself in two concrete ways:

\begin{enumerate}
\item There exists a scheme $B$ and a map $B \to M_g$ that does not arise from a family $\cC \to B$ of curves over $B$; and
\item There exists a scheme $B$ and two families $\cC \to B$ and $\cC' \to B$ such that the associated maps $\phi_\cC$ and $\phi_{\cC'} \to B$ are equal (meaning in particular that for each closed point $b \in B$ the fibers $C_b$ and $C'_b$ are isomorphic); but such that $\cC$ and $\cC'$ are not isomorphic.
\end{enumerate}

Examples of both of these can be found in \cite{Geometry of Schemes}.

\subsection{Compactifying $M_g$}

We mentioned above that Deligne and Mumford constructed a \emph{modular} compactification of $M_g$. What does the word ``modular" mean in this context, and how did they do it?

In general, if $X$ is any variety a compactification of $X$ is simply the inclusion of $X$ as an open subset of a compact, or proper variety $Y$. The compactification is called \emph{modular} if $Y$ itself is a moduli space of some sort of objects including those corresponding to points of $X$. In practice, if $X$ is a moduli space parametrizing a certain class $\Sigma$ of geometric objects---for example, smooth projective curves of genus $g$---and $Y$ is a moduli space of the class of objects $\overline \Sigma$, then we apply the valuative criterion to test whether $Y$ is proper (in the complex case, compact): If every family of objects in $\Sigma$ parametrized by a punctured disc $\Delta^*$ can be extended to a family of objects in the larger class $\overline \Sigma$ over the full disc $\Delta$ in a unique way, then the valuative criterion tells us that $Y$ is proper. Assuming in addition that every object in the class $\overline \Sigma$ appears as a limit of objects in $\Sigma$ in this way, $Y$ is called a \emph{modular compactification} of the moduli space $X$.

In the example of the moduli space $M_g$ parametrizing smooth, projective curves of genus $g$, Deligne and Mumford introduced the larger class of \emph{stable curves}. These are by definition connected curves $C$ of arithmetic genus $g$, with two properties:

\begin{enumerate}
\item $C$ has only nodes as singularities; and
\item the automorphism group of $C$ is finite.
\end{enumerate}

This  solution to the problem is not the only one: For example, David Schubert, a student of ****, showed that we can also give a modular compactification by enlarging the class of smooth curves to the class of \emph{pseudo-stable} curves, in which we allow cusps as well as nodes, but disallow elliptic tails (smooth components of genus 1 meeting the rest of the curve in only one point). Many other compactifications have been studied by Hassett, Keel, Smyth, Fedorchuk, Alper \fix{add references}.

\section{Can one write down a general curve of genus $g$?}

The first important result about the moduli space is that $M_g$ is irreducible; we will sketch the characteristic 0 proof in Section~\ref{ hurwitz spaces}  (a proof of the irreducibility of $M_g$ valid in arbitrary characteristic was not found until much later. \fix{reference!})

Given that a moduli space $M_g$ exists and is irreducible, we can make sense of the question: Can one write down a general curve of genus $g$?
That is: can we find a family of curves depending freely on parameters---in other words, a family $\cC \to B$ over an open subset $B \subset \AA^n$---that includes a general curve of genus $g$, in the sense that the induced map $\phi_\cC : B \to M_g$ is dominant? This is of course just the first step in knowing the structure of $M_g$.

We have done this in the case of genus 2 and 3. Essentially
the same approach works in genera $4$ and $5$; in each case a general canonical curve is a complete intersection, so that if we take the coefficients of its defining polynomials to be general scalars we have a general curve.

This method breaks down when we get to genus 6, where a canonical curve is not a complete intersection. But it's close enough: a general canonical curve of genus 6 is the intersection of a smooth del Pezzo surface $S \subset \PP^5$ with a quadric hypersurface $Q$; since all smooth del Pezzo surfaces in $\PP^5$ are isomorphic, we can just fix one such surface $S$ and let $Q$ be a general quadric.

It gets harder as the genus increases. Let's do one more case, genus 7, which already calls for a different approach. Here we want to argue that, by Brill-Noether theory, a general curve of genus $7$ can be realized as (the normalization of) a plane septic curve with 8 nodes $p_1,\dots,p_8 \in \PP^2$. Equivalently, if we let $S = Bl_{p_1,\dots,p_8}(\PP^2)$ be the blow-up, and let $l$ and $e_1,\dots,e_8$ be the classes of the pullback of a line and of the eight exceptional divisors respectively, a divisor of class $7l - 2 \sum e_i$ is a curve of genus 7 on $S$. Thus the curves on $S$ form a linear series, parametrized by a projective space $\PP^{11}$.

The problem is, there are many such surfaces $S$; we don't have a single linear system that includes the general curve of genus 7. The good news is, that's OK because the surfaces $S$ themselves form a rationally parametrized family. Explicitly, if we look at the set $\Phi$ of pairs $(S, C)$ with $S = Bl_{p_1,\dots,p_8}(\PP^2)$  the blow-up of $\PP^2$ at eight points and $C \subset S$ a curve of class $7l - 2 \sum e_i$ on $S$, then $\Phi$ is a $\PP^{11}$-bundle over $(\PP^2)^8$, and so is again a rational variety; choosing a rational parametrization of $\Phi$ we get a family of curves of genus $7$ parametrized by $\PP^{27}$ and dominating $M_7$. As before, then, a general point in $\PP^{27}$ yields a general curve of genus 7.

Things continued in this vein up through genus 10, but then this approach fails as well: if we represent a general curve of genus 11 as a plane curve with nodes, the nodes are no longer general points of $\PP^2$, and the same argument doesn't work. Ad hoc (and much more difficult) arguments were given in genera 11, 12 13 and 14, but so far no-one can go further in producing general curves. 

A spectacular application of the existence of $\overline M_g$ was the proof that this sequence cannot go much further! To say that there exists a family $\cC \to B$ over an open subset $B \subset \AA^n$ such that the induced map $\phi_\cC : B \to M_g$ is dominant implies that $M_g$ is \emph{unirational}, an assertion that we can disprove simply by exhibiting a pluricanonical divisor on a desingularization of $\overline M_g$. This was carried out in (many references) for all genera $g \geq 23$; in a neat twist, the divisor used consisted of curves possessing a special linear system with Brill-Noether number $-1$, meaning its existence was dependent on the proof of the Brill-Noether Theorem.

The existence of an effective pluricanonical divisor on $\overline M_g$ tells us even more: for example it implies that \emph{$M_g$ is not uniruled}, meaning that through a general point $[C] \in M_g$ there are no rational curves. This is because the restriction (or pullback) of a nonzero differential to such a curve would be a nonzero diferential, contradicting the fact that the canonical bundle of $\PP^1$ has  negative degree. A consequence is that the sort of descriptions of embeddings with which much of this book is concerned, where we produce a surface on which a general curve of a certain sort lies, cannot be continued to high genus:

\begin{corollary}
 A general curve $C$ of  genus $\geq 22$ does not lie in a nontrivial linear series on any surface
 except those birational to $C\times \PP^1$.
\end{corollary}
\begin{proof}
 A linear family of curves containing $C$ that are not all isomorphic would map to a rational curve in $M_g$; if the curves are all isomorphic, one can show that the family
 covers a surface birational to a product of $C$ and some other curve \cite{???}.
\end{proof}


\section{Curves with additional structure}

It is hard to specify an abstract curve. It is much easier if the curve $C$ comes to us with some additional structure, such as a map to projective space; for example, if the map is a birational embedding, we can specify the curve just by specifying a set of polynomial equations cutting it out. 

For example, we can look at pairs $(C,f)$ where $f : C \to \PP^1$ is a branched cover of degree $d$; this which yields various flavors of the \emph{Hurwitz spaces}.
Also, we can look at pairs $(C,f)$ where $f : C \to \PP^2$ is a birational embedding of $C$ as a plane curve of degree $d$, yielding the \emph{Severi varieties}. These spaces are more readily described and better-behaved than the moduli space $M_g$ of abstract curves, or the Hilbert scheme $\cH$ of curves in higher-dimensional space. They have been useful in proving theorems about $M_g$ and $\cH$.

\subsection{Hurwitz spaces}\label{hurwitz spaces}

Fix integers $d \geq 2$ and $g \geq 0$. By the \emph{small Hurwitz space} $\cH^\circ_{d,g}$ we will mean a space parametrizing simply branched covers $f : C \to \PP^1$ of degree $d$, with $C$ a smooth projective curve of genus $g$. Here ``simply branched" means that every fiber  either is reduced---that is, consists of $d$ reduced points---or consists of one double point and $d-2$ reduced points. If a map $f : C \to \PP^1$ is simply branched, then Hurwitz' Theorem~\ref{***} implies that the branch divisor $B \subset \PP^1$ of the map will consist of $b = 2d+2g-2$ distinct points in $\PP^1$

It is easiest to understand $\cH^\circ_{d,g}$ if we work over $\CC$ and use the classical topology \fix{I suppressed "\'etale"}. To begin with, the effective divisors of degree $b$ on a curve $C$ are parametrized by the $b$th symmetric product $C_b$ of $C$~\ref{***}; in the case of $C = \PP^1$, since an effective divisor on $\PP^1$ is given by a homogeneous polynomial $F \in H^0(\cO_{\PP^1}(b))$, the space of all effective divisors is $(\PP^1)_b \cong \PP^b$, and the locus of reduced divisors---divisors consisting of $b$ distinct points---is an open subset $U \subset \PP^b$.

\fix{after this $\cH^\circ_{d,g}$ lost its $\circ$; I put it back, but maybe we nee to do something about $\cH_{d,g}$ itself.}
Consider the incidence correspondence
\begin{align*}
 \cH^\circ_{d,g}&:= \{(F,C) \in U\times M_g \mid \\&\hbox{C admits a branched cover of $\PP^1$ with branch divisor $F = 0$}\},
\end{align*}
and the associated projections
\begin{diagram}
& & \cH^\circ_{d,g} & & \\
& \ldTo^\alpha & & \rdTo^\beta & \\
U \subset \PP^b & & & & M_g
\end{diagram} 
Here $\alpha$ is the map associating to a branched cover $f : C \to \PP^1$ its branch divisor, and $\beta$ the map sending $f : C \to \PP^1$ to the point $[C] \in M_g$; the open set $U \subset \PP^b$ is the open set of $b$-tuples of distinct points in the space $\PP^b$ of all effective divisors of degree $b$ on $\PP^1$.

Over $\CC$, we can describe a branched cover concretely: if we make a collection of cuts in $\PP^1$ joining a base point $p$ to each of the branch points $p_1, p_2, \dots, p_b$ of the map, the preimage in $C$ of the complement of the cuts will consist of $d$ disjoint copies of the complement of the cuts in $\PP^1$ (the ``sheets" of the cover), which we can label with the integers $1, 2, \dots, d$. In these terms, we can associate to each branch point $p_i \in \PP^1$ the transposition $\tau_i \in S_d$ exchanging the two sheets that come together over $p_i$. We arrive at a sequence of transpositions $\tau_1, \tau_2, \dots, \tau_b \in S_d$, that satisfies two conditions:

\begin{enumerate}
\item the product $\tau_1\cdot \tau_2 \cdots \tau_b$ is the identity; and
\item the $\tau_i$ together generate a transitive subgroup of $S_d$.
\end{enumerate}

Note that the sequence $\tau_1, \tau_2, \dots, \tau_b \in S_d$ is determined by the cover $f : C \to \PP^1$ up to simultaneous conjugation in $S_d$: we can revise our labelling of the sheets, which has the effect of conjugating all the $\tau_i$ by the relabelling permutation.

Thus the map $\alpha : \cH^\circ_{d,g} \to U$ is a finite branched covering, which gives us a picture of the local geometry of $$\cH^\circ_{d,g}$$. 
The degrees of the covering spaces $\alpha : \cH^\circ_{d,g} \to U$ are what are called \emph{Hurwitz numbers}; they arise in many contexts, and in many cases, they can be calculated **\cite{}**. Clebsch, Hurwitz and others (**??**) analyzed the monodromy of the cover $\alpha : \cH^\circ_{d,g} \to U$, and showed that it is transitive, proving that $\cH^\circ_{d,g}$ is irreducible for all $d$ and $g$ and hence, since $\cH^\circ_{d,g}$ dominates $M_g$ for $d \gg g$, that $M_g$ is irreducible for all $g$. (Because of the reliance on the classical topology, this argument only works in characteristric 0).
\begin{exercise}
Find the degree of the covering space $\alpha : \cH_{3,g} \to U \subset \PP^{2g+4}$
\end{exercise}

The Hurwitz spaces also give us a way to estimate the dimension of the moduli space $M_g$. Since $\cH_{d,g}$ is a finite-sheeted cover of an open subset $U \subset \PP^b$, it has dimension  $b = 2d+2g-2$. To find the dimension of $M_g$, we can choose $d \gg g$ (so that $\cH_{d,g}$ dominates $M_g$), and estimate the dimension of the fibers of $\cH_{d,g}$ over $M_g$.

To do this, fix a curve $C$. To specify a map $f : C \to \PP^1$ we have to specify first a line bundle $L$ of degree $d$ on $C$ ($g$ parameters, as described in Chapter~\ref{new Jacobians chapter}. We then have to specify a pair of sections of $L$ (up to multiplying the pair by a scalar). By the Riemann-Roch Theorem, $h^0(L) = d-g+1$, so to specify a pair of sections (mod scalars) is $2(d-g+1)-1$ parameters. Altogether, we have
$$
2d+2g-2 = \dim \cH^\circ_{d,g} = \dim M_g + g + 2(d-g+1)-1;
$$
and solving, we arrive at
$$
\dim M_g \; = \; 3g-3.
$$1

\subsection{Severi varieties}

Just as the small Hurwitz space $$\cH^\circ_{d,g}$$ parametrizes pairs $(C,f)$ consisting of a smooth curve $C$ of genus $g$ and a map $f : C \to \PP^1$ of degree $d$
with simple branching, the \emph{small Severi variety} parametrizes pairs $(C,f)$ consisting of a smooth curve $C$ of genus $g$ and a map $f : C \to \PP^2$ of degree $d$ that are birational onto a plane curve $C_0$ having only nodes as singularities. In this case, the curve $C$ is determined simply as the normalization of $C_0$, so we can define the \emph{small Severi variety} $V_{d,g}$ to be the locally closed subset of the projective space $\PP^N$ parametrizing plane curves of degree $d$ corresponding to irreducible nodal curves of degree $d$ and geometric genus $g$.

With both the small Hurwitz and small Severi varieties, it is useful to have a modular compactification or partial compactification of these spaces. In the case of the Hurwitz space, we have the \emph{space of admissible covers}, which parametrizes  maps of degree $d$ from nodal curves $C$ of arithmetic genus $g$ to nodal curves of arithmetic genus 0 satisfying certain local conditions. In the case of Severi varieties, we could simply take the closure $\overline{V_{d,g}}$ of $V_{d,g}$ in the space $\PP^N = \PP^{\binom{d+2}{2}-1}$ of all plane curves of degree $d$, but this is unsatisfactory in a number of ways: the singularities of $\overline{V_{d,g}}$ are arbitrarily awful, as are those of the curves $C_0 \subset \PP^2$ corresponding to the added points. \fix{having proposed the problem, we should say whether there's a good answer!}

In fact, the Severi varieties share two key attributes with Hurwitz spaces, the first of which is that their dimensions are readily calculable. In brief, the curve $C_0 \subset \PP^2$ corresponding to a point on the small Severi variety $V_{d,g}$ will have $\delta = \binom{d-1}{2} - g$ nodes; to describe the locus of such points, we can introduce the incidence correspondence
$$
\Sigma = \{(C_0,p_1,\dots,p_\delta) \in V_{d,g} \times (\PP^2)^\delta \; \mid \; C_0 \text{ has a node at $p_i$} \}.
$$
The fibers of the projection $\Sigma \to (\PP^2)^\delta$ are linear subspaces of $\PP^N$, and either a calculation in local coordinates or a little deformation theory shows that they have the expected dimension $N - 3\delta$. We see thus that
$$
\dim V_{d,g} = \dim \Sigma = 2\delta + N - 3\delta = 3d+g-1.
$$

As in the case of Hurwitz spaces, this knowledge is enough for us to determine the dimension of $M_g$. Again, for any given $g$ if we choose $d \gg g$ the map $V_{d,g} \to M_g$ sending the pair $(C, f)$ to the point $C \in M_g$ will be dominant. And again, we can readily calculate the dimension of the fibers: if $C$ is a given curve of genus $g$, to specify a map $f : C \to \PP^2$ of degree $d$ we have to choose a line bundle $L$ of degree $d$ on $C$ ($g$ parameters), and then choose 3 global sections of $L$ up to simultaneous multiplication by a scalar. Since by Riemann-Roch we will have $h^0(L) = d-g+1$, we arrive at
$$
3d+g-1 = \dim V_{d,g}  = g + 3(d-g+1) - 1,
$$
and solving we see again that $\dim M_g = 3g-3$.

Like the Hurwitz space, the Severi variety $V_{d,g}$ is irreducible for all $d$ and $g\leq \binom{d-1}{2}$, and this could be used to prove that $M_g$ is irreducible for all $g$. However it is not so easy to prove irreducibility of the Severi variety\footnote{The second author of the current volume owes his current employment to this fact.}; the fastest way to prove irreducibility of $M_g$ (in characteristic 0, at least) is still via the Hurwitz spaces.

\section{Hilbert schemes}\label{hilbert scheme section}

The Hilbert schemes---schemes $\cH_{d,g,r}$ parametrizing curves of given degree and arithmetic genus in $\PP^r$ for any $r$---are the subject of a later chapter in their own right. But it should be said at this point that the sort of regular behavior exhibited by the Hurwitz spaces and the Severi varieties is completely absent from the Hilbert scheme. Even if we restrict out attention to  what we might call the ``small Hilbert scheme"---the open subset corresponding to smooth, irreducible and nondegenerate curves---Hilbert schemes are truly wild. Locally, they can have arbitrarily bad singularities (ref to Vakil:  Ravi proves it for Hilbert schemes of smooth curves in $\PP^r$ for all $r \geq 4$; I think the question of curves in $\PP^3$ is still open); globally, they can have many irreducible components---no one has any idea how many in general---of many different dimensions.

\begin{exercise}\label{symmetric power vs Hilbert scheme}
\begin{enumerate}
 \item If $X$ is a smooth curve, then the Hilbert scheme of finite subschemes of $X$ of degree $d$ is
 isomorphic to the symmetric product of $d$ copies of $X$.
 \item If $X$ is a singular curve or any variety of dimension $r \geq 2$, the symmetric power $X^{(d)}$ is \emph{not} the Hilbert scheme of subschemes of dimension 0 and degree $d$ on $X$. \fix{maybe needs a hint, esp at this early stage in the book.}
\end{enumerate}
 \end{exercise}

%
%\section{Unirationality}
%
%The Brill-Noether theorem, in all its many forms, deals with a simple question: what linear series $g^r_d$ does a curve $C$ of genus $g$ possess? Of course, the answer depends on $C$, but we know from general principles that it's constant on an open subset of $M_g$; so it's natural to ask what the answer is on that open set. That is the subject of the Brill-Noether theorem: what linear series exist on a general curve $C$ of genus $g$? This raises, naturally, a question we'll take up next.
%
%\subsection{Can we write down a general curve of genus $g$?}
%
%Let's do this one genus at a time. For curves of genus 2, the family of curves given by
%$$
%y^2 = x^6 + a_5x^5 + \dots + a_1x + a_0
%$$
%includes every curve of genus $2$; in other words, the induced (rational) map $\AA^6 \to M_2$ is dominant, so that  a general choice of the coefficients $a_i$ will yield a general curve.



\input{footer}