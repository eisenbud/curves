
\input{header}

\chapter{Moduli of curves} 
\label{CurvesModuli chapter}\label{CurvesModuliChapter}


In the preceding chapter, we described the \emph{Hilbert scheme}, a fine moduli space for curves in projective space. In
this chapter we will discuss the second moduli space central to the theory of algebraic curves: $M_g$, whose points are in one-to-one correspondence with the isomorphism classes of smooth projective
curves of genus $g$. There does not exist a fine moduli space, and to construct the coarse moduli space  we have to take an indirect route via geometric invariant theory. We will start with the case of curves of genus 1, where everything can be made explicit.

\section{Curves of genus 1}

Let $E$ be a smooth curve of genus 1. Any invertible sheaf of degree 2 on $E$ can be written as
$\sO_E(2p)$, and defines
a morphism to $\PP^1$ with 4 distinct branch points. Since the automorphism group of $E$ is transitive,
these 4 points in $\PP^1$ are independent of the choice of $p$, and are well-defined
up to an automorphism of $\PP^1$.    As explained in Section~\ref{branched covers},  this means that every curve $C$ of genus 1 can be realized as the completion of the affine curve
$$
y^2 = f(x)
$$
where $f$ is a quartic polynomial with distinct roots $\lambda_1, \dots \lambda_4$; that is, 
$$
f(x) = \prod_{i=1}^4 (x - \lambda_i).
$$
Thus we would like to define $M_1$ to be the set of 4-tuples of distinct points of $\PP^1$ modulo the action of $\Aut(\PP^1) = PGL_2$.

As we will explain in the next sections, quotients by infinite groups can behave badly,
but in this case we can compute the quotient in a much simpler way:
There is a unique automorphism of $\PP^1$ carrying the three points $\lambda_1, \lambda_2,\lambda_3$ to the points $0, 1$ and $\infty \in \PP^1$ respectively, so that we can write $C$ as the zero locus of
$$
y^2 = x(x-1)(x-\lambda)
$$
for some complex number $\lambda  \in \PP^1 \setminus \{0,1,\infty\}$; we'll call this curve $C_\lambda$. 
This expression is not unique, since if we reordered the original  four points $\lambda_i$, we might arrive at a different value of $\lambda$; for example, if we exchanged 0 and $\infty$ and fixed 1, $\lambda$ would be replaced by $1/\lambda$. Thus the symmetric group $S_4$ acts on the set $\AA^1 \setminus \{0,1,\infty\}$
and one can show that the orbit of $\lambda$ under this action is
$$
 \left\{ \lambda, 1-\lambda, \frac{1}{\lambda}, \frac{1}{1-\lambda}, \frac{\lambda-1}{\lambda}, \frac{\lambda}{\lambda - 1} \right\}.
$$
(There are 6 points in the orbit rather than 24 because the Klein 4-group
$K = \ZZ/2\times \ZZ/2 \subset S_4$ of fixed-point free involutions acts trivially, so what we really have is an action of $S_4/K \cong S_3$.) 

Since $S_3$ is finite and $\PP^1 \setminus \{0,1,\infty\}$ is a normal affine curve, the quotient space by the action is again a normal affine curve whose points are in one-to-one
correspondence with the orbits, and thus with the set of curves of genus 1. 
 Moreover, by L\"uroth's theorem, Theorem~\ref{}, the quotient is rational, meaning that the field of rational functions on the quotient---that is, the subfield of $\CC(\lambda)$ invariant under the action of $S_3$---is of the form $\CC(j)$ for some rational function $j(\lambda)$ of degree 6. Of course, $j$ is not unique; one that works is
\begin{equation}\label{formula for j}
j(\lambda) := 256\frac{(\lambda^2-\lambda + 1)^3}{\lambda^2(\lambda-1)^2},
\end{equation}
known as the \emph{$j$-function}. Note that as $\lambda$ varies in $\PP^1 \setminus \{0,1,\infty\}$, $j(\lambda)$ can assume any value in $\AA^1$.
 
 
%One can check that the quotient map $\PP^1 \setminus \{0,1,\infty\} \to \PP^1\setminus \infty = \AA^1$
%is given by the rational function
%$$
%j(\lambda) := 256\frac{(\lambda^2-\lambda + 1)^3}{\lambda^2(\lambda-1)^2},
%$$
%known as the $j$-function. A

Summarizing, we have proven:

\begin{theorem}
The set of isomorphism classes of smooth projective curves of genus 1 is in bijection with the points of the affine line $M_1 \cong \AA^1$, with the curve defined by $y^2 = x(x-1)(x-\lambda)$
corresponding to $j(\lambda)\in \AA^1$.
\end{theorem}

\subsection{$M_1$ is a coarse moduli space}

 As we will see,
$M_1$ is not a fine moduli space, but it comes close in two senses. First:

\begin{proposition}\label{M1 is coarse}
To any family $\pi : \cC \to B$  of smooth projective curves of genus 1 over a reduced base $B$ we can associate a morphism of schemes $\phi : B \to M_1$ whose value at any point $b \in B$ is the $j$-invariant of the corresponding fiber $C_b$.
\end{proposition} 

Note that this is slightly weaker than saying that $M_1$ is a coarse moduli space, because we are restricting ourselves to families with reduced bases; in fact, the statement is true in general, but requires more machinery to prove.

\begin{proof}
To start, we will work locally in $B$: for a given $b_0 \in B$, we will choose a suitably small neighborhood $U$ of $b_0 \in B$ and restrict ourselves to the preimage $\CC_U = \pi^{-1}(U)$. The first thing to do is to express the curves $C_b$ in our family as 2-sheeted covers of $\PP^1$, which is to say we want to choose an invertible sheaf on $\CC_U$ having degree 2 on each fiber $C_b$. This is not hard: since we're working locally in $B$,
we can find a section $\rho : U \to \cC_U$ of $\pi : \cC \to B$. If we let $D = \rho(U) \subset \cC_U$ be the image, then we can take our invertible sheaf to be $\cL := \cO_{\cC_U}(2D)$.

Next, by the theorem on cohomology and base change, the direct image $\cE := \pi_*(\cO_{\cC_U}(2D))$ will be locally free of rank 2, and we get a morphism $\cC_U \to \PP(\cE)$ expressing each curve $C_b$ as a two-sheeted cover of the corresponding fiber $\PP(\cE_b)$. Again, since we are working locally in $B$, we can trivialize the bundle $\cE$, so that we get a diagram
$$
\begin{diagram}
\cC_U & & \rTo & & U \times \PP^1 \\
& \rdTo & & \ldTo & \\
& & U & &
\end{diagram} 
$$
Once more restricting to a smaller neighborhood $U$ is necessary, this means we can write the family $\cC_U \to U$ as the locus
$$
y^2 = \prod_1^4 (x - \lambda_i),
$$
where the $\lambda_i$ are regular functions on $U$. Taking the $j$-function of the $\lambda_i$  yields a map $U \to M_1$; by the uniqueness of the $j$-function, these maps agree on overlaps to give  the desired map $B \to M_1$.
\end{proof}

Is $M_1$ in fact a fine moduli space for smooth curves of genus 1?
It is not, as can be seen directly from the explicit formula~\ref{formula for j} for the $j$-function. For example, from ~\ref{formula for j}, we see that if $j : B \to M_1$ is the map associated to a family $\cC \to B$ of curves of genus 1, then every zero of the $j$-function must have multiplicity divisible by 3. (We can make a similar observation about the value $j = 1728$, corresponding to the value $\lambda = -1, 2$ or $1/2$; from the formula for $\j(\lambda)$, we see that every zero of $j - 1728$ must have even multiplicity.)
Thus we do not have a bijection between such families and maps of $B$ to $M_1$; and in particular there is no universal family over $M_1$. 

\subsection{The good news}

As we said, $M_1$ is not a fine moduli space for smooth curves of genus 1. It comes close, however, in the following sense

\begin{proposition} Let $B$ be a reduced scheme.
\begin{enumerate}
\item If $j : B \to \AA^1$ is any regular function on $B$, then there exists a finite cover $\alpha : B' \to B$ such that $j \circ \alpha$ is the $j$-function of a family of curves of genus 1 on $B'$; and
\item If $\pi : \cC \to B$ and $\eta : \cD \to B$ are two families of curves of genus 1 with the same associated $j$-function, then there exists a finite cover $\alpha : B' \to B$ and an isomorphism $\cC \times_B B' \cong \cD \times_B B'$ such that the diagram
$$
\begin{diagram}
\cC \times_B B' & & \rTo & & \cD \times_B B' \\
& \rdTo & & \ldTo & \\
& & B' & &
\end{diagram} 
$$
commutes.
\end{enumerate}
\end{proposition}

\begin{proof}
We will just prove the first of these assertions. This is straightforward: we just take
$$
B' := \{(b, \lambda) \in B \times (\AA^1 \setminus \{0,1\}) \mid j(b) = j(\lambda)\}
$$
where $j(\lambda)$ is as given in~\ref{formula for j}. We hve already described a family of curves of genus 1 over the ``$\lambda$-line $\AA^1 \setminus \{0,1\}$; the pullback to $B'$ is the desired family.
\end{proof}

Thus, $M_1$ is not a fine moduli space for smooth curves of genus 1, but it is the next best thing: we don't get a bijection between families of curves of genus 1 over a base $B$ and maps $j : B \to M_1$; but we do get a map from the former to the latter with ``finite kernel and cokernel"---what we might call a \emph{Deligne-Mumford moduli space}.

\subsection{Compactifying $M_1$}

A natural question to ask is, if every value of $j \in \AA^1$ corresponds to an isomorphism class of curves $C_j$ of genus 1, what happens to the curves $C_j$ as $j$ goes to $\infty$? Or, equivalently, what happens to the curve $C_\lambda$ given as the double cover
$$
y^2 = x(x-1)(x - \lambda)
$$
as $\lambda$ approaches 0, 1 or $\infty$---the other branch points of the double cover? The answer is clear from the equation: when two branch points of a double cover of smooth curves come together, the limiting curve has a node. In fact, there is a unique isomorphism class of irreducible curves of arithmetic genus 1 having a node; it's represented by the curve with equation $y^2=x^2(x-1)$.

The upshot of this is that if we enlarge the original class of curves parametrized by $M_1$---``smooth projective curves of genus 1"---to the slightly larger class, ``irreducible nodal projective curves of arithmetic genus 1," we still have a coarse moduli space $\overline M_1$ for this slightly larger class of objects; and this enlarged moduli space is simply the space obtained by adding one point ``at $\infty$" to the existing space $M_1 \cong \AA^1$ to form $\overline M_1 \cong \PP^1$.

This is a basic example of what is called a \emph{modular compactification}. The basic situation is this: we have a class of objects parametrized by a (non-compact) moduli space $M$; and we enlarge the class of objects to be parametrized, with the result that the moduli space $\overline M$ of the larger class is compact. 

Modular compactifications of a given moduli problem may or may not exist. It's sometimes a tricky problem to find a suitable class of objects to parametrize: if we don't add enough additional isomorphism classes, not every 1-parameter family of objects in our original class will have a limit in the larger class, meaning the enlarged moduli space will still not be compact; if we add too many,  1-parameter families may have more than one possible limit, meaning the enlarged space won't be separated.


 When modular compactifications do exist, however, they are extremely valuable for the study of both the space $M$ and of the objects parametrized by $M$: compactness allows us to apply the techniques of modern algebraic geometry to the space $\overline M$, while the fact that it is still a moduli space gives us a handle on its geometry. In the following section, we will see (or at least assert) that modular compactifications of $M_g$ do exist, and describe the class of objects parametrized (``stable curves").

Getting back to the moduli space $\overline M_1$, there are two caveats to bear in mind. The first is that not every family of curves of genus 1 specializing to a singular curve corresponds to a pole of the $j$-function: for example, in the family of curves $C_t$ given as
$$
C_t = V(y^2 -x^3 - t^2x - t^3)
$$
the $j$ function is constant, but of course the limiting curve $C_0$ has a cusp. And conversely, not every family of curves of genus 1 whose $j$-function has a pole has limit an irreducible curve of arithmetic genus 1 with a node; for example, the limit of the curves
$$
y^2 = x(x-t)(x-\frac{1}{t})
$$
as $t \to 0$ will be reducible, with two components meeting in two points.

\section{Higher genus}

We now ask how much of the above description of the moduli space $M_1$ of curves of genus 1 can be carried out for curves of higher genus $g$. The answer is, virtually all of it; though the techniques needed to verify the statements are vastly more sophisticated. In this section, we'll state the main results about the moduli spaces $M_g$, and then describe one way in which they may be constructed.

We start with the fundamental

\begin{theorem}\label{moduli}
There does not exist a fine moduli space for smooth projective curves of genus $g$ for any $g\geq 1$; but there does exist a coarse moduli space $M_g$, whose points correspond bijectively to isomorphism classes of smooth projective curves of genus $g$ and such that for any family $\cC \to B$ of such curves we have an induced map $\phi : B \to M_g$.
\end{theorem}

(Note that the existence of nontrivial $\PP^1$-bundles implies that there is no fine moduli space $M_0$ either.)

There is also a modular compactification of $M_g$. To describe it, we have to introduce a class of curves as follows:

\begin{definition}
By a \emph{stable} curve of genus $g \geq 2$ we will mean a connected curve $C$ with at most nodes as singularities, of arithmetic genus $g$, and such that every smooth rational component of $C$ meets the other components at least three times.
\end{definition}

(The word ``stable," it should be said, is one of the most overworked terms in algebraic geometry; when we want to distinguish the usage above, we sometimes say, ``Deligne-Mumford stable," or simply ``DM stable.")

We have then our second main theorem:

\begin{theorem}\label{stable moduli}
There exists a coarse moduli space $\overline M_g$, whose points correspond bijectively to isomorphism classes of smooth projective curves of genus $g$ and such that for any family $\cC \to B$ of stable curves we have an induced map $\phi : B \to \overline M_g$. Moreover, $\overline M_g$ is a projective variety.
\end{theorem}

\section{How we might construct the moduli space $\overline M_g$}

As we indicated, we will not give anything like a proof of the main theorems~\ref{moduli} and~\ref{stable moduli}. But we will describe one approach, via \emph{geometric invariant theory}.

The basic idea here is basically analogous to the one used above for genus 1 curves: to construct a moduli space, first parametrize curves with a choice of some additional structure, such as a map to projective space, and then mod out by the choices made. For any smooth projective curve $C$ of genus $g\geq 2$, the tricanonical linear series $|3K_C|$ is very ample; it embeds $C$ as a curve of degree $6g-6$ in $\PP^{5g-6}$. Thus we have a way of realizing a given abstract curve $C$ as a curve in projective space, unique up to automorphisms of $\PP^{5g-6}$.

We claim next that the set of smooth, tricanonically embedded curves is a locally closed subset $X$ of the Hilbert scheme $\cH_{(6g-6)m+1-g}(\PP^{5g-6})$ parametrizing curves of genus $g$ and degree $6g-6$ in $\PP^{5g-6}$. To see this, note first that the singular locus of the fibers in any family of curves is closed, so the set of points in the base over which the curves are smooth is open.  Let 
$$
\cH^\circ = \cH^\circ_{(6g-6)m+1-g}(\PP^{5g-6})\subset \cH_{(6g-6)m+1-g}(\PP^{5g-6})
$$
be this open set.

Next, on the universal family $\cC \subset \cH^\circ \times \PP^{5g-6}$, we have two families of invertible sheaves: we have the pullback of $\cO_{\PP^{5g-6}}(1)$; and we have the cube $K^3$ of the dualizing sheaf. Each gives rise to a section of the relative Picard variety over $\cH^\circ$, and the locus where they agree is thus a closed subset $X \subset \cH^\circ$.

 
%The canonical bundle of each fiber is the restriction of the relative cotangent bundle $\Omega$ of the family,
%so a fiber $C_\lambda$ is tricanonically embedded if $(\Omega_\lambda)^{\otimes 3}(-H)$ has a nonzero section. By the semicontinuity of cohomology, this is a closed condition on $\lambda.$  Thus
%the set of tricanonically embedded smooth curves is a closed subset of the open set of smooth
%curves---a locally closed subset $X$ of the Hilbert scheme.

%Moreover, as tricanonically embedded smooth curves are parametrized by a locally closed subvariety of the Hilbert scheme $\cH\circ_{(6g-6)m+1-g}(\PP^{5g-6}$: Quite generally, a curve is smooth if
%the the set of points representing smooth curves
%is open in the Hilbert scheme, since  and  the morphism $\sC \subset U \times \PP^{5g-6} \to U$ from the universal family to the Hilbert scheme is a smooth morphism over the open set of smooth curves, and therefore the relative cotangent sheaf is a bundle whose top exterior power is the family of canonical bundles. 
%%The third tensor power  of this bundle times the inverse of the restriction of $\sO_\PP{5g-6}(1)$ has a nonzero global section at a point if and only if
%%that point represents a tricanonical curve, and thus by semicontinuity of cohomology, the locus of smooth tricanonical curves is closed
%%in the open set of smooth curves. 

Now, the group $PGL_{5g-5}$ of automorphisms of $\PP^{5g-6}$ acts on variety $X$ and its orbits
are the isomorphism classes of smooth curves of genus $g$; thus, we might hope to realize the moduli space $M_g$ as the quotient of $X$ by $PGL_{5g-5}$. But here things go awry in a hurry: unlike the case of an action of a finite group on a variety,
the orbit spaces of infinite groups are often not algebraic varieties. (Think of the action of $\CC^*$ on $\CC$ by multiplication.) What is needed is a tool to extract the ``	best possible approximation" to a quotient, and that is exactly what geometric invariant theory does for us. We'll begin, accordingly, with a brief introduction to the technique.

%
%, but this case is well-behaved. This is the content of the main (and last) theorem of \cite{GIT}:
%
%\begin{theorem}(Mumford)
%The space of orbits of $PGL_{5g-5}$ acting on the subset of the Hilbert scheme representing
%tricanonical curves has the structure of an algebraic variety $M_g$ which is a \emph{coarse moduli
%space} in the sense that
%\begin{enumerate}
% \item Given any flat family $Y\to B$ of smooth curves of genus $g$ there is a morphism of schemes
% $B\to M_g$ sending each closed point $p\in B$ to the point of $M_g$ representing the fiber $Y_b$;
% \item These maps form a natural transformation from the functor $G(-)$ of families of stable curves to the functor 
% $\Mor_{\rm schemes}(-, \overline M_g)$ through which any natural transformation $G \to \Mor_{\rm schemes}(-, M')$
% factors;
%Given any variety $M$ with this property, there is a unique morphism $M\to M_g$ that
% sending each closed point $p\in M$ to the point of $M_g$ representing the same curve as $p$.
% 
%
%\end{enumerate}
%\end{theorem}

%The power of the theory of the moduli space of curves was greatly increased when compactifications of the space (there are many interesting ones) were understood. One of these, the compactification
%of $M_1 = \AA^1$ to $\overline M_1 \PP^1$ by adding a nodal curve, has already been mentioned. This has the desirable properties that the subset added to $M_1$ is a divisor; and the compactification is \emph{modular} in the sense
%that the point added corresponds to a curve almost of the same type as the curves in $M_g$.
%
%There are two reasons why a compactification is  important:
%
%First, the great majority of the techniques that algebraic geometers have developed for dealing with varieties apply directly only to projective varieties. For example, the Satake compactification is a projective variety containing $M_g$ in such a way that the complement---usually referred to as the "boundary"---has codimension 2. Taking successive hyperplane sections that pass through a given point but don't meet the boundary, we see that for $g\geq 2$ there is a complete one-dimensional family of \emph{smooth} curves containing any smooth curve of genus $\geq 2$. 
%
%Often, though, we can learn the most from a compactification where the ``boundary''---the part that is added---is ad divisor, and this is the case for the Deligne-Mumford compactification
%$\overline M_g$ introduced by Deligne and Mumford in their groundbreaking 1969 paper~\cite{Deligne-Mumford}, described below. A central example of how this is used is given in Section~\ref{mgunirational}, where we take up the question, ``can we write down a general curve of genus $g$?" 
%
%To describe this compactification, we first explain some of the language and results of geometric
%invariant theory.
%
%%The variety $\overline M_g$ has an important extra property: it is a \emph{modular}  compactification in the sense that the points of the boundary correspond to slightly more general
%%objects of the same type as the points of $M_g$. 
%%Briefly, a projective curve $C$ of arithmetic genus $g$ is said to be \emph{stable} if its singularities, if any, are all nodes, and its automorphism group is finite. These are precisely the stable points in the Hilbert scheme of tri-canonical embeddings in the sense of geometric invariant theory. \fix{is this true? Check Harris-Morrison}
%
%%But while orbit spaces of finite groups always exist  and behave well, quotients by positive-dimensional algebraic groups are a very different story; to deal with these, we have to introduce the methods of \emph{geometric invariant theory}, which we'll do now.
%
%
%%The morphism $\sC \subset U \times \PP^{5g-6} \to U$ from the universal family to the Hilbert scheme is a smooth morphism over the open set of smooth curves, and therefore the relative cotangent sheaf is a bundle whose top exterior power is the family of canonical bundles. 
%%\fix{I think the morphism has relative dim 1, so the bundle IS the canonical bundle.}
%%The third tensor power  of this bundle times the inverse of the restriction of $\sO_\PP{5g-6}(1)$ has a nonzero global section at a point if and only if
%%that point represents a tricanonical curve, and thus by semicontinuity of cohomology, the locus of smooth tricanonical curves is closed
%%in the open set of smooth curves. We would now like to take the quotient by the group of automorphisms
%%of $\PP^{5g-6}.$ This requires geometric invariant theory.


\subsection{Stable, semistable, unstable}

Given a quasi projective variety $X \subset \PP^N$ and a group $G \subset PGL_{N+1}$ that carries $X$ into itself, we wish to construct as good a map as possible from the set of orbits
to a projective space. If we succeed, then the closure of the
image will correspond to a graded ring. We want to preserve as much of the structure of the orbit space as possible, and on an open affine cover
this means finding as many functions as possible that are invariant on the orbits. Thus it is natural to take the ring of invariants
of the homogeneous coordinate ring $A$ of the closure of $X$ as the homogeneous coordinate ring of the closure
of the image of $X$. 

The first difficulty is that the elements of $A$ are not functions on $X$, so $G$ may not even act on $A$. However, 
it is possible to lift the action of $G$ to an action on $A$ of a slightly larger group, in this case
$SL_{N+1}$ a process called \emph{linearization}. The kernel of the map $SL_{N+1} \to PGL_{N+1}$ consists of diagonal matrices of finite order dividing $N+1$, and the choice of
a linearization amounts to a choice of a character of this abelian group. However, the choice doesn't matter: since the kernel acts trivially on forms of degree a multiple
of $N+1$, and thus the action of $PGL_{N+1}$ itself  extends to an action on the homogeneous coordinate ring of the $(N+1)$-st Veronese embedding. 

The second difficulty in this program is that the ring of invariants of an infinite group may not even be finitely generated,
so it may not correspond to a projective variety. Hilbert showed that if $G= SL_{N+1}$, then the ring of invariants
is finitely generated. Since Hilbert's time this result has been extended to the class of 
\emph{linearly reductive} groups---see~\cite{MR0382294}.
Thus the subring $A^G \subset A$ of invariant elements is finitely generated over the ground field, and the projective variety best approximating the set of orbits of $G$ on $X$ 
is $\Proj(A^G)$, usually denoted $X//G$. In view of the example above, we must ask what might be
the relationship between the points of $X//G$ and the orbits of $G$? 

To answer this question, geometric invariant theory performs a sort of triage on the points of $X$ (or their orbits), dividing them into three classes,
and provides tools for determining this stratification. 
\begin{enumerate}


\item  \emph{Stable} points. These are the points whose orbits are closed. They comprise an open subset $X^s \subset X$, and the points of an open subset of $X//G$ correspond one-to-one to the stable orbits, that is, an open subset that is set-theoretically $X^s/G$. In general, this set may be empty, but in the case of the action of $PGL_3$ on the $\PP^9$ of plane cubics, the stable points are the smooth plane cubics, and the quotient is the affine $j$-line.

\item \emph{Strictly semistable} points. These are the points $p$ such that there exists an invariant form not vanishing at $p$.  Together with the stable points, comprise a larger open subset $X^{ss} \subset X$, called the \emph{semistable} locus. Two  semistable points $p,q$ map to the same point in $X//G$ if and only if $\overline{Gp}\cap \overline{Gq} \neq \emptyset$. In the example of the action of $PGL_3$ on  $\PP^9$, the semistable  locus contains  the orbits of smooth and nodal plane cubics; that is, smooth cubics together with the three orbits consisting of irreducible cubics with a node, unions of lines and conics meeting transversely, and triangles. In the quotient, these last three orbits correspond to just one additional point, and this quotient is the compactification of the affine line to the projective line obtained by adding one point.

\item  \emph{Unstable} orbits. These are the points $p$ on which all invariant polynomials vanish, so that the induced map
$\Proj A \to \Proj (A^G)$ is not even defined at $p$. Thus unstable points do not correspond to any points of $X//G$; in fact, they cannot be included in any topologically separated quotient of an open subset of $X$ (but there are other compactifications, coming from
other representations of $M_g$ as $X'//G'$; see \cite{MR3044128}).
\end{enumerate}
\fix{The notation $X^s$ conflicts with our usual notation for a product. Maybe $X^{\rm stable}, X^{\rm semistable}$? We're not going to use these notations for long}

%\subsection{Construction and characterization of the moduli space of curves}
%
%Even so, these curves do \emph{not} form a family over $M_g$; that is, there is no universal family, for reasons discussed in Section~\ref{almost fine}. But it is a ``coarse moduli space", the best possible approximation to a fine moduli space in the category of varieties. Even though the
%functor $\Mor_{\rm schemes}(-, M_g)$ is not isomorphic to the functor $F(-)$ of families of curves of genus $g$, there is
%a natural transformation
%$$
%\Psi: F\to \Mor_{\rm schemes}(-, M_g)
%$$
%such that 
%for every scheme $M'$ and natural transformation $\Psi': F \to \Mor(-, M')$
%there is a unique morphism $\eta: M\to M'$ so that $\Psi' = \Psi\circ \Mor(-, \eta)$.
%
%Since $M_g$ does not support a universal family of curves, we cannot expect an arbitrary family $\pi: X \to B$ of smooth curves of genus $g$ to arise as the pull-back along a morphism $B\to M_g$. However, the property of functors above
%says that the set-theoretic
%map $\rho_\pi: B \to M_g$ sending each closed point  $b\in B$ to the point of $M_g$ corresponding to the class of the fiber
%over $b$ is actually a morphism of schemes. \fix{ I think we're dropping the idea expressed in the next sentence} Even more is true, as explained below in Section~\ref{almost fine}. 
%
%%%%Edited to here Jul 14
%
%To summarize:
%\begin{enumerate}
%  \item The points of $M_g$ correspond one-to-one to isomorphism classes of smooth curves.
% \item For every family $\cC \to B$ of smooth curves there is a map $B\to M_g$ carrying
% each closed point  $b \in B$ to the point representing the isomorphism class of the fiber of $\cC$ over $b$,
% \end{enumerate}
%in a ``maximal'' way.
%

\section{Stable curves}

The compactification $\overline M_g$ is also a \emph{modular}  compactification in the sense that the points of the boundary correspond to slightly more general
objects of the same type as the points of $M_g$. 
Briefly, a projective curve $C$ of arithmetic genus $g$ is said to be \emph{stable} if its singularities, if any, are all nodes, and the automorphism group is finite. These are stable points in the Hilbert scheme of tri-canonical embeddings in the sense of geometric invariant theory.

\begin{theorem}(Deligne, Mumford, Knudsen) \cite{Deligne-Mumford}, \cite{MR702954}\label{DM is coarse}
$\overline M_g$ is a projective variety such that
\begin{enumerate}
 \item The points of $M_g$ correspond one-to-one to isomorphism classes of smooth curves.
 \item For every family $\cC \to B$ of stable curves there is a morphism of schemes $B\to M_g$ carrying
 each closed point  $b \in B$ to the point representing the isomorphism class of the fiber of $\cC$ over $b$. 
 These maps form a natural transformation from the functor $G(-)$ of families of stable curves to the functor 
 $\Mor_{\rm schemes}(-, \overline M_g)$ through which any natural transformation $G \to \Mor_{\rm schemes}(-, M')$
 factors;
\end{enumerate}
\end{theorem}


\subsection{$M_g$ and $\overline M_g$ are almost fine}\label{almost fine}

Though these are not fine moduli spaces, they come close. We state the result for $\overline M_g$, and the similar statement follows for $M_g$:

\begin{fact}
\begin{enumerate}
\item If $X \to B$ and $X' \to B$ are families whose associated maps $B \to \overline M_g$ are the same then there exists a finite cover $\pi : \tilde B \to B$ such that the pullback families $X \times_B \tilde B$ and $X' \times_B \tilde B$ are the same; and
\item For any morphism $B \to \overline M_g$, there exists a finite cover $\pi : \tilde B \to B$ such that the composition $\pi \circ \phi : \tilde B \to \overline M_g$ is the map associated to a family $X \to \tilde B$
\end{enumerate}
\end{fact}

In other words, while the definition of a fine moduli space would require an isomorphism $\phi$ from the functor of families
to $\Mor(-, \overline M_g)$ in fact the natural transformation has ``finite kernel and cokernel".
%\cite[****]{MR1631825}
% \fix{need citations and/or text.}

The fact that the moduli space of stable curves is projective and almost fine in the sense above has a striking consequence: When a singular curve, no matter how complicated, is the limit of a 1-parameter family of smooth curves, it can be replaced, in a certain sense, by a \emph{unique} stable curve. Here is a precise statement:

\begin{theorem}[Stable reduction]
If $\cC \to \Delta$ is an arbitrary family of curves over the spectrum of a discrete valuation ring, smooth over the complement $\Delta^*$ of the closed point, then after pulling back via a ramified map of
discrete valuation rings and a birational modification of the total space , we can arrive at a family $\tilde \cC \to \Delta'$, whose fiber over the closed point is a stable curve, uniquely determined by the original family.
\end{theorem}

\begin{proof} The uniqueness follows immediately from Theorem~\ref{DM is coarse}; the existence of the family follows from the property explained in Section~\ref{almost fine}. However, there is also a constructive proof, which we  illustrate with a simple example, below.
\end{proof}

\begin{example}[A smooth curve specializing to a cusp]
Suppose that 
$\Delta$ be $\Spec \CC[z]_{(z)}$, and $\pi : \cC \to \Delta$ a family of curves such that:
\begin{enumerate}
\item The generic fiber $C_\eta$ is smooth
\item The fiber $C_0$ is reduced and irreducible, with one ordinary cusp $p$; and
\item The total space $\cC$ is smooth.
\end{enumerate}
In this simplest case, the process of semistable reduction proceeds by repeatedly  blowing up and normalizing $\cC$
and  making a ramified
covering of the base. This can be done in such a way that at last
the resulting surface will be smooth, and the central fiber will be nodal, but the  central 
fiber will have some rational components meeting only
two others, and thus with infinite automorphism group, so it is not semi-stable. \fix{picture for the case of a cusp}
However, these have self-intersection $-1$,
so they can be blown down to get a smooth surface $\cC''$ over $\Delta$ whose central fiber has just two components:
the normalization $C_1$ of the original cuspidal curve $C_0$, and a curve of genus 1 meeting $C_1$ at the preimage
of the cusp.
\fix{picture}
This example is written out in detail in \cite[pp. 122-128]{MR1631825}.%this is Harris-Morrison
\end{example}


\subsection{Can one write down a general curve of genus $g$?}\label{mgunirational}

More precisely: does there exist  a family of curves depending freely on parameters---in other words, a family $\cC \to B$ over an open subset $B \subset \AA^n$---that includes a general curve of genus $g$, in the sense that the induced map $\phi_\cC : B \to M_g$ is dominant? 	

We have produced such a family in genera 2 and 3. Essentially
the same approach works in genera $4$ and $5$; in each case a general canonical curve is a complete intersection, so that if we take the coefficients of its defining polynomials to be general scalars we have a general curve.

This method breaks down when we get to genus 6, where a canonical curve is not a complete intersection. But it's close enough: as discussed in Chapter~\ref{Brill-Noether}, a general canonical curve of genus 6 is the intersection of a smooth del Pezzo surface $S \subset \PP^5$ with a quadric hypersurface $Q$; since all smooth del Pezzo surfaces in $\PP^5$ are isomorphic, we can just fix one such surface $S$ and let $Q$ be a general quadric.

It gets harder as the genus increases. Already genus 7 calls for a different approach. Here we want to argue that, by Brill-Noether theory, a general curve of genus $7$ can be realized as (the normalization of) a plane septic curve with 8 nodes $p_1,\dots,p_8 \in \PP^2$. Moreover, t having nodes at 8 general points imposes $24= 3\times 8$ independent conditions on the $\PP^{35}$ of curves of degree 7. 
If we let $S = Bl_{p_1,\dots,p_8}(\PP^2)$ be the blow-up, and let $l$ and $e_1,\dots,e_8$ be the classes of the pullback of a line and of the eight exceptional divisors respectively, a divisor of class $7l - 2 \sum e_i$ is a curve of genus 7 on $S$. Thus the curves on $S$ form a linear series, parametrized by a projective space $\PP^{11}$.

The problem is, there are many such surfaces $S$; we don't have a single linear system that includes the general curve of genus 7. The good news is, that's OK because the surfaces $S$ themselves form a rationally parametrized family. Explicitly, if we look at the set $\Phi$ of pairs $(S, C)$ with $S = Bl_{p_1,\dots,p_8}(\PP^2)$  the blow-up of $\PP^2$ at eight points and $C \subset S$ a curve of class $7l - 2 \sum e_i$ on $S$, then $\Phi$ is a $\PP^{11}$-bundle over $(\PP^2)^8$, and so is again a rational variety; choosing a rational parametrization of $\Phi$ we get a family of curves of genus $7$ parametrized by $\PP^{27}$ and dominating $M_7$. As before a general point in $\PP^{27}$ yields a general curve of genus 7.

A similar approach works through genus 10, and Severi conjectured that it would be possible to do something similar for all genera. The approach through plane curves, however, fails in genus 11: by the Brill-Noether theorem, the smallest degree of a planar embedding of a general curve of genus 11 is 10; by our $g+2$ theorem, such a curve has ${9\choose 2}-11 = 25$ nodes. But $3 \times 25 > 65$, the dimension of the space of plane curves of degree 10, and the situation only gets worse if we look at higher degrees. Thus the nodes are no longer general points of $\PP^2$, and the genus 7 argument doesn't work. 
 Ad hoc (and much more difficult) arguments have been given in genera 11, 12 13 and 14, but so far no-one can go further in producing general curves. 

But the sequence cannot go on much longer! To say that there exists a family $\cC \to B$ over an open subset $B \subset \AA^n$ such that the induced map $\phi_\cC : B \to M_g$ is dominant is to say that $M_g$ is \emph{unirational}. Using $\overline M_g$ one can show that for higher $g$ this is not the case, and in fact:

\begin{theorem}
If $g\geq 23$ then there is no rational curve through a general point of $M_g$; that is, $M_g$ is not uniruled.
\end{theorem}
\begin{proof}[Proof sketch]
The set of curves of genus $g$ posessing a divisor $D$ with $\rho(D) = g - (r(D)+1)(\deg(D) -g + r(D)) = -1$ is an effective divisor
in the moduli space, and this leads to the construction of an effective pluricanonical divisor on the desingularization of $\overline M_g$. The proof of this
was carried out in
\cite{Harris-Mumford-Moduli}, \cite{HarrisModuli}, and \cite{Eisenbud-HarrisModuli}
 for all genera $g \geq 23$.
If $M_g$ were uniruled, then there would be non-trivial deformations of a general rational curve in $M_g$, 
and thus the normal bundle of the general rational curve $\phi: \PP^1 \to M_g$, pulled back to $\PP^1$, would have positive degree. 
Furthermore, an effective pluricanonical form is by definition represented by a nontrivial global section of a tensor power
of $\wedge^{\dim M_g}\Omega_{M_g}$ and the pull-back of this section section 
along a nontrivial map from $\PP^1$ to $\overline M_g$, and thus to a desingularization, that met the pluricanonical divisor properly, would lead to an effective canonical divisor on $\PP^1$, a contradiction.
\fix{say something about restricting a plurican div. Change this vague statement to the one in Mumford.} 
\end{proof}
 
 A consequence is that the sort of descriptions of embeddings with which much of this book is concerned, where we produce a surface on which a general curve of a certain sort lies, cannot be continued to high genus:

\begin{fact}
 A general curve $C$ of  genus $\geq 22$ does not lie in a nontrivial linear series on any surface
 except those birational to $C\times \PP^1$. 
 \fix{ref to "isotrivial moving divisor implies birat to product".}
\end{fact}


\subsection{$M_g$ is not a fine moduli space}\label{coarse moduli}

Let $B$ be a curve with a fixed-point free involution $\sigma$; equivalently, let $B \to B_0$ be a map of smooth curves of degree 2, with no branching. It is easy to construct such a map by homotopy theory starting with any curve $B_0$ of genus $\geq 1$. 
To show that no fine moduli space of smooth curves can exist, we will construct two non-isomorphic families over $B_0$ that
would both correspond to the same map $B_0\to M_g$. Another somewhat different obstruction to the existence is given in 
\cite[Chapter 6]{DE-JH-schemes}

Let $C$ be any smooth curve of genus $g$ with an involution $\tau : C \to C$, and consider the family
$$
S := B \times C/\langle (\sigma, \tau) \rangle \to B_0 := B/\langle \sigma \rangle.
$$
For each $b \in B$ we are identifying the fiber of $B \times C$ over $b$ with the fiber over $\sigma(b)$ via the map $\tau$. Since $\sigma$ has no fixed points, neither does the involution $(\sigma, \tau)$ of $B \times C$; so that the map $S \to B_0$ is a family of smooth curves of genus $g$.

All the fibers of $S \to B_0$ are isomorphic to $C$. Thus if $M$ were a fine moduli space for curves of genus $g$,
 the induced map $B_0 \to M$ would be the constant map sending $B_0$ to the point $[C] \in M_g$. This would be the
 same for the trivial family over $C\times B_0 \to B_0$. This contradicts the hypothesis that $M$ is a fine moduli space. 


\section{Hurwitz spaces and the dimension of $M_g$}\label{Hurwitz section}

Recall that the \emph{Hurwitz spaces},  parametrize branched covers of $\PP^1$ of specified degree and genus. In the simplest case, where we consider only simply branched covers, we can give at least a local description of these spaces. 

We start by recalling from Chapter~\ref{genus 2 and 3 chapter} the description of connected, simply branched covers of $\PP^1$: given $b = 2d + 2g - 2$ distinct points $p_1,\dots,p_b \in \PP^1$, we have a  bijection between the set of maps $C \to \PP^1$ of degree $d$ simply branched over the points $p_i$ and unramified elsewhere; and the set of $b$-tuples $\tau_1, \dots, \tau_b \in S_d$ of transpositions in the symmetric group $S_d$
satisfying the conditions that the product $\tau_1\cdot \dots \cdot \tau_b = e$ is the identity, and $\tau_1, \dots, \tau_b$ generate a transitive subgroup of $S_d$, modulo simultaneous conjugation by elements of $S_d$. 

Now suppose we allow the points $p_i$ to vary in $(\PP^1)^{2g+2} \setminus \Delta$, where $\Delta$ is the union of the 
diagonals $p_i=p_j$. Locally, the same correspondence between branched covers and $b$-tuples of transpositions can be carried out simultaneously and consistently. Thus, if we let $U = (\PP^1)^b \setminus \Delta$ be the complement of the big diagonal in $(\PP^1)^b$---that is, the space of ordered $b$-tuples of distince points in $\PP^1$---the set
$$
H := \{ (f, B) \mid f : C \to \PP^1 \text{ is simply branched over } B \}
$$
can be given the structure of a topological covering space of $U$ via projection on the second factor. From $U$ the space $H$ inherits the structure of a complex manifold of dimension $b$.
In fact, $H$ has the structure of an algebraic variety. The space $H$ also has a useful modular compactification, as shown in \cite{Harris-Mumford-Moduli}. 

To estimate the dimension of the moduli space $M_g$, consider the map $\rho : H \to M_g$, in which we forget everything except the domain $C$ of the map $f$. For $d \gg g$, this map is surjective (this follows, for example from the $g+1$ theorem of Chapter~\ref{JacobianChapter}). Thus it suffices to know the dimension of the general fiber: how many simply branched maps $f : C \to \PP^1$ are there on a general curve of genus $g$?

A map $f : C \to \PP^1$ is given by a rational function on $C$, whose polar divisor $D = f^{-1}(\infty)$ has degree $d$.
If $d$ is large, then $D$ can be any divisor of degree $d$ on $C$ if $d$. Once we specify $d\gg 0$ and $D$, the Riemann-Roch theorem implies that the space of rational functions with polar divisor $D$ is a subset of a vector space of dimension $d-g+1$. Thus the fibers of the map $\rho$ have dimension $2d-g+1$; and since the space $H$ has dimension $b = 2d+2g-2$, we conclude that
$$
\dim M_g = (2d+2g-2)-(2d-g+1) = 3g-3.
$$

\subsection{When is a general curve of genus $g$ a $d$-sheeted cover of $\PP^1$?}

We just used the Hurwitz space to estimate the dimension of the moduli space $M_g$; we did this by focussing on the case $d \gg  g$. Amusingly, we can now turn this around and answer (at least in one direction) the question posed above. The point is, to say that a general curve of genus $g$ a $d$-sheeted cover of $\PP^1$ is tantamount to saying that the map $H \to M_g$ from the space $H$ of $d$-sheeted covers of $\PP^1$ of genus $g$ to $M_g$ is dominant; if this is the case, we must have
$$
\dim H = 2d+2g-1 \geq \dim M_g = 3g-3;
$$
or in other words we have

\begin{corollary}\label{BN dim 1}
A general curve of genus $g$ is a $d$-sheeted cover of $\PP^1$ only if $d \geq \frac{g+2}{2}$.
\end{corollary}

In fact, the converse is also true, and together they form the case $r=1$ of the \emph{Brill-Nother theorem}, which we'll discuss in general in Chapter~\ref{BNChapter}. 

\section{Exercises}

\begin{exercise}
Consider the action of the multiplicative group $G_m$ on the affine line $\AA^1$. Does the action extend
to the projective line? What are the invariant functions? Find the sets $(\AA^1)^s, (\AA^1)^{ss}, (\AA^1)^{us}.$
\end{exercise}


\input{footer}